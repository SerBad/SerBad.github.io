{"meta":{"version":1,"warehouse":"2.2.0"},"models":{"Asset":[{"_id":"source/images/avatar.jpg","path":"images/avatar.jpg","modified":1,"renderable":0},{"_id":"themes/next/source/css/main.styl","path":"css/main.styl","modified":1,"renderable":1},{"_id":"themes/next/source/images/cc-by-nc-nd.svg","path":"images/cc-by-nc-nd.svg","modified":1,"renderable":1},{"_id":"themes/next/source/images/cc-by-nc-sa.svg","path":"images/cc-by-nc-sa.svg","modified":1,"renderable":1},{"_id":"themes/next/source/images/cc-by-nc.svg","path":"images/cc-by-nc.svg","modified":1,"renderable":1},{"_id":"themes/next/source/images/cc-by-nd.svg","path":"images/cc-by-nd.svg","modified":1,"renderable":1},{"_id":"themes/next/source/images/cc-by-sa.svg","path":"images/cc-by-sa.svg","modified":1,"renderable":1},{"_id":"themes/next/source/images/cc-by.svg","path":"images/cc-by.svg","modified":1,"renderable":1},{"_id":"themes/next/source/images/cc-zero.svg","path":"images/cc-zero.svg","modified":1,"renderable":1},{"_id":"themes/next/source/images/loading.gif","path":"images/loading.gif","modified":1,"renderable":1},{"_id":"themes/next/source/images/placeholder.gif","path":"images/placeholder.gif","modified":1,"renderable":1},{"_id":"themes/next/source/images/quote-l.svg","path":"images/quote-l.svg","modified":1,"renderable":1},{"_id":"themes/next/source/images/quote-r.svg","path":"images/quote-r.svg","modified":1,"renderable":1},{"_id":"themes/next/source/images/searchicon.png","path":"images/searchicon.png","modified":1,"renderable":1},{"_id":"themes/next/source/js/src/bootstrap.js","path":"js/src/bootstrap.js","modified":1,"renderable":1},{"_id":"themes/next/source/js/src/affix.js","path":"js/src/affix.js","modified":1,"renderable":1},{"_id":"themes/next/source/js/src/hook-duoshuo.js","path":"js/src/hook-duoshuo.js","modified":1,"renderable":1},{"_id":"themes/next/source/js/src/motion.js","path":"js/src/motion.js","modified":1,"renderable":1},{"_id":"themes/next/source/js/src/post-details.js","path":"js/src/post-details.js","modified":1,"renderable":1},{"_id":"themes/next/source/js/src/scrollspy.js","path":"js/src/scrollspy.js","modified":1,"renderable":1},{"_id":"themes/next/source/js/src/utils.js","path":"js/src/utils.js","modified":1,"renderable":1},{"_id":"themes/next/source/vendors/fastclick/LICENSE","path":"vendors/fastclick/LICENSE","modified":1,"renderable":1},{"_id":"themes/next/source/vendors/fastclick/README.md","path":"vendors/fastclick/README.md","modified":1,"renderable":1},{"_id":"themes/next/source/vendors/fastclick/bower.json","path":"vendors/fastclick/bower.json","modified":1,"renderable":1},{"_id":"themes/next/source/vendors/font-awesome/HELP-US-OUT.txt","path":"vendors/font-awesome/HELP-US-OUT.txt","modified":1,"renderable":1},{"_id":"themes/next/source/vendors/font-awesome/bower.json","path":"vendors/font-awesome/bower.json","modified":1,"renderable":1},{"_id":"themes/next/source/vendors/jquery_lazyload/CONTRIBUTING.md","path":"vendors/jquery_lazyload/CONTRIBUTING.md","modified":1,"renderable":1},{"_id":"themes/next/source/vendors/jquery_lazyload/README.md","path":"vendors/jquery_lazyload/README.md","modified":1,"renderable":1},{"_id":"themes/next/source/vendors/jquery_lazyload/bower.json","path":"vendors/jquery_lazyload/bower.json","modified":1,"renderable":1},{"_id":"themes/next/source/vendors/jquery_lazyload/jquery.lazyload.js","path":"vendors/jquery_lazyload/jquery.lazyload.js","modified":1,"renderable":1},{"_id":"themes/next/source/vendors/jquery_lazyload/jquery.scrollstop.js","path":"vendors/jquery_lazyload/jquery.scrollstop.js","modified":1,"renderable":1},{"_id":"themes/next/source/vendors/velocity/bower.json","path":"vendors/velocity/bower.json","modified":1,"renderable":1},{"_id":"themes/next/source/vendors/velocity/velocity.min.js","path":"vendors/velocity/velocity.min.js","modified":1,"renderable":1},{"_id":"themes/next/source/vendors/velocity/velocity.ui.js","path":"vendors/velocity/velocity.ui.js","modified":1,"renderable":1},{"_id":"themes/next/source/vendors/velocity/velocity.ui.min.js","path":"vendors/velocity/velocity.ui.min.js","modified":1,"renderable":1},{"_id":"themes/next/source/vendors/jquery/index.js","path":"vendors/jquery/index.js","modified":1,"renderable":1},{"_id":"themes/next/source/js/src/schemes/pisces.js","path":"js/src/schemes/pisces.js","modified":1,"renderable":1},{"_id":"themes/next/source/vendors/fancybox/source/blank.gif","path":"vendors/fancybox/source/blank.gif","modified":1,"renderable":1},{"_id":"themes/next/source/vendors/fancybox/source/fancybox_loading.gif","path":"vendors/fancybox/source/fancybox_loading.gif","modified":1,"renderable":1},{"_id":"themes/next/source/vendors/fancybox/source/fancybox_loading@2x.gif","path":"vendors/fancybox/source/fancybox_loading@2x.gif","modified":1,"renderable":1},{"_id":"themes/next/source/vendors/fancybox/source/fancybox_overlay.png","path":"vendors/fancybox/source/fancybox_overlay.png","modified":1,"renderable":1},{"_id":"themes/next/source/vendors/fancybox/source/fancybox_sprite.png","path":"vendors/fancybox/source/fancybox_sprite.png","modified":1,"renderable":1},{"_id":"themes/next/source/vendors/fancybox/source/fancybox_sprite@2x.png","path":"vendors/fancybox/source/fancybox_sprite@2x.png","modified":1,"renderable":1},{"_id":"themes/next/source/vendors/fancybox/source/jquery.fancybox.css","path":"vendors/fancybox/source/jquery.fancybox.css","modified":1,"renderable":1},{"_id":"themes/next/source/vendors/fancybox/source/jquery.fancybox.js","path":"vendors/fancybox/source/jquery.fancybox.js","modified":1,"renderable":1},{"_id":"themes/next/source/vendors/fancybox/source/jquery.fancybox.pack.js","path":"vendors/fancybox/source/jquery.fancybox.pack.js","modified":1,"renderable":1},{"_id":"themes/next/source/vendors/fastclick/lib/fastclick.js","path":"vendors/fastclick/lib/fastclick.js","modified":1,"renderable":1},{"_id":"themes/next/source/vendors/fastclick/lib/fastclick.min.js","path":"vendors/fastclick/lib/fastclick.min.js","modified":1,"renderable":1},{"_id":"themes/next/source/vendors/font-awesome/css/font-awesome.css","path":"vendors/font-awesome/css/font-awesome.css","modified":1,"renderable":1},{"_id":"themes/next/source/vendors/font-awesome/css/font-awesome.css.map","path":"vendors/font-awesome/css/font-awesome.css.map","modified":1,"renderable":1},{"_id":"themes/next/source/vendors/font-awesome/css/font-awesome.min.css","path":"vendors/font-awesome/css/font-awesome.min.css","modified":1,"renderable":1},{"_id":"themes/next/source/vendors/font-awesome/fonts/fontawesome-webfont.woff2","path":"vendors/font-awesome/fonts/fontawesome-webfont.woff2","modified":1,"renderable":1},{"_id":"themes/next/source/vendors/ua-parser-js/dist/ua-parser.min.js","path":"vendors/ua-parser-js/dist/ua-parser.min.js","modified":1,"renderable":1},{"_id":"themes/next/source/vendors/ua-parser-js/dist/ua-parser.pack.js","path":"vendors/ua-parser-js/dist/ua-parser.pack.js","modified":1,"renderable":1},{"_id":"themes/next/source/vendors/font-awesome/fonts/FontAwesome.otf","path":"vendors/font-awesome/fonts/FontAwesome.otf","modified":1,"renderable":1},{"_id":"themes/next/source/vendors/font-awesome/fonts/fontawesome-webfont.eot","path":"vendors/font-awesome/fonts/fontawesome-webfont.eot","modified":1,"renderable":1},{"_id":"themes/next/source/vendors/font-awesome/fonts/fontawesome-webfont.woff","path":"vendors/font-awesome/fonts/fontawesome-webfont.woff","modified":1,"renderable":1},{"_id":"themes/next/source/vendors/velocity/velocity.js","path":"vendors/velocity/velocity.js","modified":1,"renderable":1},{"_id":"themes/next/source/vendors/fancybox/source/helpers/jquery.fancybox-buttons.css","path":"vendors/fancybox/source/helpers/jquery.fancybox-buttons.css","modified":1,"renderable":1},{"_id":"themes/next/source/vendors/fancybox/source/helpers/jquery.fancybox-buttons.js","path":"vendors/fancybox/source/helpers/jquery.fancybox-buttons.js","modified":1,"renderable":1},{"_id":"themes/next/source/vendors/fancybox/source/helpers/fancybox_buttons.png","path":"vendors/fancybox/source/helpers/fancybox_buttons.png","modified":1,"renderable":1},{"_id":"themes/next/source/vendors/fancybox/source/helpers/jquery.fancybox-media.js","path":"vendors/fancybox/source/helpers/jquery.fancybox-media.js","modified":1,"renderable":1},{"_id":"themes/next/source/vendors/fancybox/source/helpers/jquery.fancybox-thumbs.css","path":"vendors/fancybox/source/helpers/jquery.fancybox-thumbs.css","modified":1,"renderable":1},{"_id":"themes/next/source/vendors/fancybox/source/helpers/jquery.fancybox-thumbs.js","path":"vendors/fancybox/source/helpers/jquery.fancybox-thumbs.js","modified":1,"renderable":1},{"_id":"themes/next/source/vendors/font-awesome/fonts/fontawesome-webfont.ttf","path":"vendors/font-awesome/fonts/fontawesome-webfont.ttf","modified":1,"renderable":1},{"_id":"themes/next/source/vendors/font-awesome/fonts/fontawesome-webfont.svg","path":"vendors/font-awesome/fonts/fontawesome-webfont.svg","modified":1,"renderable":1}],"Cache":[{"_id":"themes/next/.bowerrc","hash":"20038353db532b4c40625419d396da7359f89cbe","modified":1472053844889},{"_id":"themes/next/.editorconfig","hash":"211d2c92bfdddb3e81ea946f4ca7a539f150f4da","modified":1472053844897},{"_id":"themes/next/.gitignore","hash":"63d003fa46cf9665b4dab1786f9dc694812a5a79","modified":1472053844919},{"_id":"themes/next/.hound.yml","hash":"289dcf5bfe92dbd680d54d6e0668f41c9c9c0c78","modified":1472053844924},{"_id":"themes/next/.javascript_ignore","hash":"beb0b95736650284ceb712a162cc033847a83cd3","modified":1472053844932},{"_id":"themes/next/.jshintrc","hash":"b7d23f2ce8d99fa073f22f9960605f318acd7710","modified":1472053844938},{"_id":"themes/next/README.en.md","hash":"fa31bbc6dd8778b8dee469740c92b3b5b59702af","modified":1472053844985},{"_id":"themes/next/README.md","hash":"06aaf1241e9e1619956c86d8b1397a643840a9d1","modified":1472053845001},{"_id":"themes/next/_config.yml","hash":"d56ae086cebdf2977c2a936ee10cd861f07d8761","modified":1472053845021},{"_id":"themes/next/bower.json","hash":"da39b00fcdf2e7a42af412de0a4d3617cc6d7084","modified":1472053845025},{"_id":"themes/next/gulpfile.coffee","hash":"4e8c1082fa82e383494ff5b5963b7936d9c7bb2e","modified":1472053845025},{"_id":"themes/next/package.json","hash":"95eaba1607544965e432d56406bae391dd11bcbb","modified":1472053846047},{"_id":"source/_posts/ALAYNE.md","hash":"f2ba9f93ad9d6c5436587007e4eec59758474613","modified":1472053844146},{"_id":"source/_posts/ARIANNE.md","hash":"660ad5aae9f3dcf6c2777fb26a6bb2363ed7495a","modified":1472053844240},{"_id":"source/_posts/INSTALL-FAILED-NO-MATCHING-ABIS.md","hash":"3b6d3acc17c0775797359787879f067c14b6fad6","modified":1472053844286},{"_id":"source/_posts/MERCY.md","hash":"b8752aa091a11f4e75adce78031572bc4a839f81","modified":1472053844333},{"_id":"source/_posts/ThinkingOne.md","hash":"ab63fd80414d08c0132d2677cb24941ffce38d72","modified":1472053844365},{"_id":"source/_posts/a-problem-about-sharedPreferencesde.md","hash":"3d445fce8f181af820bf6e6f648ea542bec8fab9","modified":1472053844365},{"_id":"source/_posts/about-technology-selection.md","hash":"e3a09b9ffbec0c53c542a95cc813130aee940d5c","modified":1472053844380},{"_id":"source/_posts/android-animtion.md","hash":"870a88b9247118364add9b0f43951d749b7526f8","modified":1472053844380},{"_id":"source/_posts/recyclerview.md","hash":"c9dedae8a9bbec29c41ae5eccd0a5c05ae5e2324","modified":1472053844427},{"_id":"source/_posts/mysql-node-express.md","hash":"ec88900f332e2cb9c3acf4ba80c418daca8ae54e","modified":1472053844396},{"_id":"source/_posts/soft-keyboard-and-9-patch.md","hash":"5c980729e884ba133671dc05d9685cda713cf845","modified":1472053295873},{"_id":"source/about/index.md","hash":"f2bbefe157ab34f65e17017e8a1722c095ab9f0c","modified":1472053844443},{"_id":"source/tags/index.md","hash":"d1061b1c439790d5919edf75ee437cf2bd62618f","modified":1472053844458},{"_id":"themes/next/.github/CONTRIBUTING.md","hash":"4312fb37fa2b8663006be3c4fe01125ec01171c1","modified":1472053844904},{"_id":"themes/next/.github/ISSUE_TEMPLATE.md","hash":"a09da7ff6504131e928b9c99dcec98a411331812","modified":1472053844911},{"_id":"themes/next/languages/de.yml","hash":"4c3ffeb0d214c807a226dd98214958cb5483df1c","modified":1472053845056},{"_id":"themes/next/languages/default.yml","hash":"d2f6784b9c6567b64e58736e36025dbf96d863d4","modified":1472053845071},{"_id":"themes/next/languages/en.yml","hash":"df81ab6b1cf3c88ed053d3766381cd12eb659fe3","modified":1472053845087},{"_id":"themes/next/languages/fr-FR.yml","hash":"d8a40fe025fad6f42df0cf16d4be2d513769b062","modified":1472053845087},{"_id":"themes/next/languages/ja.yml","hash":"e594aa42a33c489e4a65065659a01bb76c3c0cb5","modified":1472053845139},{"_id":"themes/next/languages/pt.yml","hash":"4c64594f477905d5d2d9ca2422f03175b7b0c617","modified":1472053845157},{"_id":"themes/next/languages/ru.yml","hash":"c3aedb94decf05a301662afc3398ab563dd9995a","modified":1472053845187},{"_id":"themes/next/languages/zh-Hans.yml","hash":"23b45e77c1846c9457b98c745a60a9461678c389","modified":1472053845199},{"_id":"themes/next/languages/zh-hk.yml","hash":"88e603eb0f3fd25c35bb37bd30372fd77bba7c46","modified":1472053845267},{"_id":"themes/next/languages/zh-tw.yml","hash":"04479b419c72b71fd34046f3fc33ebda4fe8de84","modified":1472053845288},{"_id":"themes/next/layout/_layout.swig","hash":"fc92da2b0f4d368e8ae4b08c7606e11e2180120b","modified":1472053845328},{"_id":"themes/next/layout/archive.swig","hash":"b867a08f6b43de8b5d700c84b943df55917407ae","modified":1472053845984},{"_id":"themes/next/layout/category.swig","hash":"58cf08388901f7549b1fca95548b2c79173aa840","modified":1472053845984},{"_id":"themes/next/layout/index.swig","hash":"e5b52e04296203262a400e8e36ae12426d31fd5b","modified":1472053845984},{"_id":"themes/next/layout/page.swig","hash":"a91e3fd7aef26e8a02e339e3372801c517f400cf","modified":1472053846000},{"_id":"themes/next/layout/post.swig","hash":"b8334c479840b7724638eec71971cbd8512ae58d","modified":1472053846031},{"_id":"themes/next/layout/tag.swig","hash":"6f764ea3ab11eeb7c530df45528d449b14f5dc62","modified":1472053846031},{"_id":"themes/next/scripts/merge-configs.js","hash":"f8cde6953939802f92da5b7a2458c6c539e9be69","modified":1472053846062},{"_id":"themes/next/test/.jshintrc","hash":"1dae9d1cf7df1ae6d5c5efd6cffb949e9b8dcebb","modified":1472053847515},{"_id":"themes/next/test/helpers.js","hash":"f25e7f3265eb5a6e1ccbb5e5012fa9bebf134105","modified":1472053847640},{"_id":"themes/next/test/intern.js","hash":"db90b1063356727d72be0d77054fdc32fa882a66","modified":1472053847718},{"_id":"source/images/avatar.jpg","hash":"dca9ba4984244e3f68f74ea26b3ebdea82b40a59","modified":1472053844443},{"_id":"themes/next/source/fonts/.gitkeep","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1472053846929},{"_id":"themes/next/layout/_macro/post-collapse.swig","hash":"b87a5122dbff1d5fccf8f3d09d1640bd4b01c4a0","modified":1472053845335},{"_id":"themes/next/layout/_macro/post.swig","hash":"a61cf39c2d79f790fbb4a8e07ac2bbb06b95390d","modified":1472053845423},{"_id":"themes/next/layout/_macro/reward.swig","hash":"89f3d2e978d4062b470e774eda21c2ed3a086ab9","modified":1472053845438},{"_id":"themes/next/layout/_macro/sidebar.swig","hash":"3cff4179482865c7e51e4dd289372c3fc90c619c","modified":1472053845516},{"_id":"themes/next/layout/_partials/comments.swig","hash":"325dd5923d845a539fc0524ca72ce40edd1e516a","modified":1472053845532},{"_id":"themes/next/layout/_partials/duoshuo-hot-articles.swig","hash":"ba75672183d94f1de7c8bd0eeee497a58c70e889","modified":1472053845610},{"_id":"themes/next/layout/_partials/footer.swig","hash":"cba20577cea89196d714ddfe6b3ea00f7c906ba7","modified":1472053845639},{"_id":"themes/next/layout/_partials/head.swig","hash":"9d6501b54b959d28a6e0b5fde87d25fc38b97660","modified":1472053845675},{"_id":"themes/next/layout/_partials/header.swig","hash":"b3f4f07f03bedd615039934b44d552b91e2a4a1d","modified":1472053845675},{"_id":"themes/next/layout/_partials/pagination.swig","hash":"1634fb887842698e01ff6e632597fe03c75d2d01","modified":1472053845675},{"_id":"themes/next/layout/_partials/search.swig","hash":"95b55fe35f2d2c22f2cc055d4379b5435314c7ec","modified":1472053845691},{"_id":"themes/next/layout/_scripts/baidu-push.swig","hash":"c5db707b46eac6a5df1d2a77f8556945a66fd181","modified":1472053845784},{"_id":"themes/next/layout/_scripts/boostrap.swig","hash":"c0f5a0955f69ca4ed9ee64a2d5f8aa75064935ad","modified":1472053845800},{"_id":"themes/next/layout/_scripts/commons.swig","hash":"931808ad9b8d8390c0dcf9bdeb0954eeb9185d68","modified":1472053845800},{"_id":"themes/next/layout/_scripts/vendors.swig","hash":"1a51b8caa5130ff55948ae59dddb87ee0550c1e9","modified":1472053845969},{"_id":"themes/next/scripts/tags/center-quote.js","hash":"99b66949f18398689b904907af23c013be1b978f","modified":1472053846078},{"_id":"themes/next/scripts/tags/group-pictures.js","hash":"ac681b0d0d8d39ba3817336c0270c6787c2b6b70","modified":1472053846125},{"_id":"themes/next/scripts/tags/full-image.js","hash":"86194a05a8c6499de0b2aaa525d6de135778c0ae","modified":1472053846078},{"_id":"themes/next/source/css/main.styl","hash":"a91dbb7ef799f0a171b5e726c801139efe545176","modified":1472053846929},{"_id":"themes/next/source/images/cc-by-nc-nd.svg","hash":"bc3588c9b2d7c68830524783120ff6cf957cf668","modified":1472053846945},{"_id":"themes/next/source/images/cc-by-nc-sa.svg","hash":"6f55543d1fb9cbc436c101d24f802dec7b41efc3","modified":1472053846945},{"_id":"themes/next/source/images/cc-by-nc.svg","hash":"6f076713fb9bf934aa2c1046bdf2cf2e37bc1eab","modified":1472053846945},{"_id":"themes/next/source/images/cc-by-nd.svg","hash":"42cd73da328077ccc92f859bb8f3cf621b3484f8","modified":1472053846945},{"_id":"themes/next/source/images/cc-by-sa.svg","hash":"70c1535f43e54e5ff35ca81419e77e4c0c301398","modified":1472053846961},{"_id":"themes/next/source/images/cc-by.svg","hash":"e92a33c32d1dac8ed94849b2b4e6456e887efe70","modified":1472053846961},{"_id":"themes/next/source/images/cc-zero.svg","hash":"9bfb52b2f63527a7049247bf00d44e6dc1170e7d","modified":1472053846961},{"_id":"themes/next/source/images/loading.gif","hash":"5fbd472222feb8a22cf5b8aa5dc5b8e13af88e2b","modified":1472053846961},{"_id":"themes/next/source/images/placeholder.gif","hash":"5fbd472222feb8a22cf5b8aa5dc5b8e13af88e2b","modified":1472053846961},{"_id":"themes/next/source/images/quote-l.svg","hash":"cd108d6f44351cadf8e6742565217f88818a0458","modified":1472053846961},{"_id":"themes/next/source/images/quote-r.svg","hash":"2a2a250b32a87c69dcc1b1976c74b747bedbfb41","modified":1472053846976},{"_id":"themes/next/source/images/searchicon.png","hash":"67727a6a969be0b2659b908518fa6706eed307b8","modified":1472053846976},{"_id":"themes/next/layout/_scripts/schemes/mist.swig","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1472053845816},{"_id":"themes/next/layout/_scripts/schemes/muse.swig","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1472053845816},{"_id":"themes/next/source/css/_mixins/Mist.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1472053846687},{"_id":"themes/next/source/css/_mixins/Muse.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1472053846687},{"_id":"themes/next/source/css/_mixins/custom.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1472053846698},{"_id":"themes/next/source/css/_variables/Muse.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1472053846851},{"_id":"themes/next/source/css/_variables/custom.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1472053846914},{"_id":"themes/next/layout/_partials/search/localsearch.swig","hash":"efa7efcbb575381b508f9aa0e0c53140eef72a7b","modified":1472053845691},{"_id":"themes/next/layout/_partials/search/swiftype.swig","hash":"a8c7f9ca7c605d039a1f3bf4e4d3183700a3dd62","modified":1472053845706},{"_id":"themes/next/layout/_partials/search/tinysou.swig","hash":"b25002a83cbd2ca0c4a5df87ad5bff26477c0457","modified":1472053845706},{"_id":"themes/next/layout/_partials/share/baidushare.swig","hash":"3fdde03f45a80f7a85097a40b40358adde618fc7","modified":1472053845737},{"_id":"themes/next/layout/_partials/share/add-this.swig","hash":"bf8e9223a40748b2e3ef77d753a8e1dbbce8095e","modified":1472053845706},{"_id":"themes/next/layout/_partials/share/duoshuo_share.swig","hash":"d4fbffd7fa8f2090eb32a871872665d90a885fac","modified":1472053845769},{"_id":"themes/next/layout/_partials/share/jiathis.swig","hash":"12684840de632eb16e53ffa863166306a756fd4f","modified":1472053845784},{"_id":"themes/next/layout/_scripts/pages/post-details.swig","hash":"fa8f071b4bf1806dc2ae1d0021690182b85daea5","modified":1472053845816},{"_id":"themes/next/layout/_scripts/schemes/pisces.swig","hash":"a9a3995b9615adfb8d6b127c78c6771627bee19a","modified":1472053845816},{"_id":"themes/next/layout/_scripts/third-party/analytics.swig","hash":"91c5353fcb94cc3b3f265b06ad2341734bc4c826","modified":1472053845816},{"_id":"themes/next/layout/_scripts/third-party/comments.swig","hash":"8ba01f1ac07fbca62a4b00f5a0a3a506122c1530","modified":1472053845882},{"_id":"themes/next/layout/_scripts/third-party/lean-analytics.swig","hash":"aebc73513c9cbbbbda2935e2eb18e09bb1c24bf8","modified":1472053845922},{"_id":"themes/next/layout/_scripts/third-party/localsearch.swig","hash":"5bd98c26cc188a2a30504d1330a0eaae34034db0","modified":1472053845937},{"_id":"themes/next/layout/_scripts/third-party/tinysou.swig","hash":"fe95dd3d166634c466e19aa756e65ad6e8254d3e","modified":1472053845953},{"_id":"themes/next/layout/_scripts/third-party/mathjax.swig","hash":"8eecd19c756df615afb3f5ec6a527cd7bd06d20c","modified":1472053845937},{"_id":"themes/next/source/css/_custom/custom.styl","hash":"3403fdd8efde1a0afd11ae8a5a97673f5903087f","modified":1472053846687},{"_id":"themes/next/source/css/_mixins/Pisces.styl","hash":"ba8ab5a0280b953aa97435ff8946cbcbb2755a27","modified":1472053846691},{"_id":"themes/next/source/css/_mixins/base.styl","hash":"10ca6744a8594c1a085b50120f4ed0a1ef433f40","modified":1472053846698},{"_id":"themes/next/source/css/_variables/Mist.styl","hash":"e55265c8a8a6ae0c3c08e3509de92ee62c3cb5f6","modified":1472053846851},{"_id":"themes/next/source/css/_variables/Pisces.styl","hash":"6da593f19a9c8e76b43bc05172923d82b2aefa03","modified":1472053846883},{"_id":"themes/next/source/css/_variables/base.styl","hash":"d8e9da99fc980b261f8beccfef544f9e9fe914ff","modified":1472053846914},{"_id":"themes/next/source/css/_variables/default.styl","hash":"17779fa6fa3c9e1262ba100a86a8dec730c2f312","modified":1472053846929},{"_id":"themes/next/source/js/src/bootstrap.js","hash":"4a0da1bed19e65bd7db42421b447061bc1618710","modified":1472053846992},{"_id":"themes/next/source/js/src/affix.js","hash":"1b509c3b5b290a6f4607f0f06461a0c33acb69b1","modified":1472053846976},{"_id":"themes/next/source/js/src/hook-duoshuo.js","hash":"b35a7dc47b634197b93487cea8671a40a9fdffce","modified":1472053846992},{"_id":"themes/next/source/js/src/motion.js","hash":"ff9ea37d05c269e3a140c4ab448af03efc4bcc76","modified":1472053847008},{"_id":"themes/next/source/js/src/post-details.js","hash":"b8c0b5563cc6edbac82ed5a4f43f72800029ea87","modified":1472053847008},{"_id":"themes/next/source/js/src/scrollspy.js","hash":"b7657be25fc52ec67c75ab5481bdcb483573338b","modified":1472053847023},{"_id":"themes/next/source/js/src/utils.js","hash":"14521498ba62a9a4050b86fb1eae0babd5b88c8a","modified":1472053847039},{"_id":"themes/next/source/vendors/fancybox/.bower.json","hash":"9be892a4e14e0da18ff9cb962c9ef71f163b1b22","modified":1472053847086},{"_id":"themes/next/source/vendors/fancybox/.gitattributes","hash":"672d3b5767e0eacd83bb41b188c913f2cf754793","modified":1472053847086},{"_id":"themes/next/source/vendors/fastclick/.bower.json","hash":"bf3eef9d647cd7c9b62feda3bc708c6cdd7c0877","modified":1472053847148},{"_id":"themes/next/source/vendors/fastclick/LICENSE","hash":"6f474ea75c42442da7bbcf2e9143ce98258efd8d","modified":1472053847148},{"_id":"themes/next/source/vendors/fastclick/README.md","hash":"68a9b9d53126405b0fa5f3324f1fb96dbcc547aa","modified":1472053847164},{"_id":"themes/next/source/vendors/fastclick/bower.json","hash":"a9b3ee1e4db71a0e4ea6d5bed292d176dd68b261","modified":1472053847179},{"_id":"themes/next/source/vendors/font-awesome/.bower.json","hash":"bb093f2ac1f1305069d873a7941324c8e0de3135","modified":1472053847211},{"_id":"themes/next/source/vendors/font-awesome/.gitignore","hash":"03ddbf76c1dd1afb93eed0b670d2eee747472ef1","modified":1472053847226},{"_id":"themes/next/source/vendors/font-awesome/.npmignore","hash":"c31ff06a740955e44edd4403902e653ccabfd4db","modified":1472053847226},{"_id":"themes/next/source/vendors/font-awesome/HELP-US-OUT.txt","hash":"ed80b43dbc7e3009b2f436741b9796df8eb3be02","modified":1472053847226},{"_id":"themes/next/source/vendors/font-awesome/bower.json","hash":"71e7183634dc1b9449f590f15ebd7201add22ca7","modified":1472053847242},{"_id":"themes/next/source/vendors/jquery/.bower.json","hash":"865d6c1328ab209a4376b9d2b7a7824369565f28","modified":1472053847313},{"_id":"themes/next/source/vendors/jquery_lazyload/.bower.json","hash":"90fa628f156d8045357ff11eaf32e61abacf10e8","modified":1472053847357},{"_id":"themes/next/source/vendors/jquery_lazyload/CONTRIBUTING.md","hash":"4ded6fee668544778e97e38c2b211fc56c848e77","modified":1472053847388},{"_id":"themes/next/source/vendors/jquery_lazyload/README.md","hash":"b930297cb98b8e1dbd5abe9bc1ed9d5935d18ce8","modified":1472053847417},{"_id":"themes/next/source/vendors/jquery_lazyload/bower.json","hash":"e0acf1db27b0cc16128a59c46db1db406b5c4c58","modified":1472053847420},{"_id":"themes/next/source/vendors/jquery_lazyload/jquery.lazyload.js","hash":"f4a570908f6c89c6edfb1c74959e733eaadea4f2","modified":1472053847420},{"_id":"themes/next/source/vendors/jquery_lazyload/jquery.scrollstop.js","hash":"bf773ad48a0b9aa77681a89d7569eefc0f7b7b18","modified":1472053847436},{"_id":"themes/next/source/vendors/velocity/.bower.json","hash":"63da5e80ebb61bb66a2794d5936315ca44231f0c","modified":1472053847452},{"_id":"themes/next/source/vendors/velocity/bower.json","hash":"92d92860418c4216aa59eb4cb4a556290a7ad9c3","modified":1472053847467},{"_id":"themes/next/source/vendors/velocity/velocity.min.js","hash":"bf172816a9c57f9040e3d19c24e181a142daf92b","modified":1472053847499},{"_id":"themes/next/source/vendors/velocity/velocity.ui.js","hash":"dbbfb50f6502f6b81dcc9fee7b31f1e812da3464","modified":1472053847499},{"_id":"themes/next/source/vendors/velocity/velocity.ui.min.js","hash":"dde584994ac13dc601836e86f4cf490e418d9723","modified":1472053847515},{"_id":"themes/next/source/vendors/jquery/index.js","hash":"17a740d68a1c330876c198b6a4d9319f379f3af2","modified":1472053847341},{"_id":"themes/next/layout/_scripts/third-party/analytics/baidu-analytics.swig","hash":"ae5b8597603d4e42ee66ed121544e7b1c644767e","modified":1472053845837},{"_id":"themes/next/layout/_scripts/third-party/analytics/cnzz-analytics.swig","hash":"096e7a6958b3bcacaa94361266832871ccb989c0","modified":1472053845842},{"_id":"themes/next/layout/_scripts/third-party/analytics/facebook-sdk.swig","hash":"61347b9cf5c42a02f28cda4b6d920d6d17099d44","modified":1472053845853},{"_id":"themes/next/layout/_scripts/third-party/analytics/google-analytics.swig","hash":"1b6af02fd0ba3f729675cd95429a0cea4aebf358","modified":1472053845862},{"_id":"themes/next/layout/_scripts/third-party/analytics/tencent-analytics.swig","hash":"8a399df90dadba5ad4e781445b58f4765aeb701e","modified":1472053845876},{"_id":"themes/next/layout/_scripts/third-party/comments/disqus.swig","hash":"c1186e609d4810ebfb3e675e9045b023a557d1db","modified":1472053845890},{"_id":"themes/next/layout/_scripts/third-party/comments/duoshuo.swig","hash":"da8aa3beab56d8c306dd97cf41127a3859e2d00c","modified":1472053845890},{"_id":"themes/next/source/css/_common/components/back-to-top.styl","hash":"ad69cbf94eedacc27e756cdb9c7073416db697d0","modified":1472053846140},{"_id":"themes/next/source/css/_common/components/buttons.styl","hash":"22828f5141c0cecb9ef25a110e194cdfa3a36423","modified":1472053846140},{"_id":"themes/next/source/css/_common/components/comments.styl","hash":"ff4489cd582f518bba6909a301ac1292a38b4e96","modified":1472053846140},{"_id":"themes/next/source/css/_common/components/components.styl","hash":"b7d5cc29586ac796a50d90974ad99d24a5982137","modified":1472053846156},{"_id":"themes/next/source/css/_common/components/pagination.styl","hash":"88559b13ce94311405b170a0506ded91273beceb","modified":1472053846287},{"_id":"themes/next/source/css/_common/components/tag-cloud.styl","hash":"6eb4bcc3056bd279d000607e8b4dad50d368ca69","modified":1472053846497},{"_id":"themes/next/source/css/_common/outline/outline.styl","hash":"12662536c7a07fff548abe94171f34b768dd610f","modified":1472053846586},{"_id":"themes/next/source/css/_common/scaffolding/base.styl","hash":"5a35aa0381b0e1d465b952a997194441020446ea","modified":1472053846628},{"_id":"themes/next/source/css/_common/scaffolding/helpers.styl","hash":"302fca2d38d0175f5b5c7c42bc80b5a87404a50d","modified":1472053846652},{"_id":"themes/next/source/css/_common/scaffolding/normalize.styl","hash":"3f40e8a9fe8e7bd5cfc4cf4cbbbcb9539462e973","modified":1472053846668},{"_id":"themes/next/source/css/_common/scaffolding/scaffolding.styl","hash":"c9218b48c56e52c06af9ce3cc8fbdae737cf16fe","modified":1472053846674},{"_id":"themes/next/source/css/_common/scaffolding/tables.styl","hash":"d110befc142dbb881c4fdcb94df65ed2f603f1c1","modified":1472053846681},{"_id":"themes/next/source/css/_schemes/Mist/_base.styl","hash":"25d5e45a355ee2093f3b8b8eeac125ebf3905026","modified":1472053846704},{"_id":"themes/next/source/css/_schemes/Mist/_header.styl","hash":"d0bfd1bef988c76f7d7dd72d88af6f0908a8b0db","modified":1472053846711},{"_id":"themes/next/source/css/_schemes/Mist/_logo.styl","hash":"b1025c421406d2c24cc92a02ae28c1915b01e240","modified":1472053846716},{"_id":"themes/next/source/css/_schemes/Mist/_menu.styl","hash":"26666c1f472bf5f3fb9bc62081cca22b4de15ccb","modified":1472053846724},{"_id":"themes/next/source/css/_schemes/Mist/_posts-expanded.styl","hash":"55b44e03054cd20ed8129bf986b15fba5fd85aad","modified":1472053846731},{"_id":"themes/next/source/css/_schemes/Mist/_search.styl","hash":"09c965022c13b84ed8a661fee8ac2a6d550495ae","modified":1472053846736},{"_id":"themes/next/source/css/_schemes/Mist/index.styl","hash":"5187512cc4b2ce095230928c7046e0b26c3897bd","modified":1472053846746},{"_id":"themes/next/source/css/_schemes/Muse/_logo.styl","hash":"748dbfbf9c08e719ddc775958003c64b00d39dab","modified":1472053846786},{"_id":"themes/next/source/css/_schemes/Muse/_menu.styl","hash":"13af2fb21fabfc4df4b577ce5363e13d03daff71","modified":1472053846789},{"_id":"themes/next/source/css/_schemes/Muse/_layout.styl","hash":"124b540f059fd1ed13514362007cfc70355278c6","modified":1472053846780},{"_id":"themes/next/source/css/_schemes/Muse/_search.styl","hash":"09c965022c13b84ed8a661fee8ac2a6d550495ae","modified":1472053846789},{"_id":"themes/next/source/css/_schemes/Muse/index.styl","hash":"f70fa81275eb4e0ea5e5a740b7a35539c6ffa9ba","modified":1472053846789},{"_id":"themes/next/source/css/_schemes/Pisces/_brand.styl","hash":"59c0f66602ebc1c05c16f117bc8710d9f3744538","modified":1472053846804},{"_id":"themes/next/source/css/_schemes/Pisces/_full-image.styl","hash":"de31e923bf5102498f06b1ae6bdf2ea22409f3e0","modified":1472053846804},{"_id":"themes/next/source/css/_schemes/Pisces/_layout.styl","hash":"2182a6da3434a6fd4d03ab1592c645d3d3c88500","modified":1472053846804},{"_id":"themes/next/source/css/_schemes/Pisces/_menu.styl","hash":"9887bd3894db5394c1e64e800afaae55f47e8dd0","modified":1472053846820},{"_id":"themes/next/source/css/_schemes/Pisces/_posts.styl","hash":"1f6e2ce674735269599acc6d77b3ea18d31967fc","modified":1472053846820},{"_id":"themes/next/source/css/_schemes/Pisces/_sidebar.styl","hash":"441eaadb55541a3721e7fbff92e5e2ed50859897","modified":1472053846836},{"_id":"themes/next/source/css/_schemes/Pisces/index.styl","hash":"88a5e0e95f93e4adb196bff1aac17d6cfb03768a","modified":1472053846851},{"_id":"themes/next/source/js/src/schemes/pisces.js","hash":"a9d064d600ee35acd66508167e1ac8c6cfdbdcd8","modified":1472053847023},{"_id":"themes/next/source/vendors/fancybox/source/blank.gif","hash":"2daeaa8b5f19f0bc209d976c02bd6acb51b00b0a","modified":1472053847086},{"_id":"themes/next/source/vendors/fancybox/source/fancybox_loading.gif","hash":"1a755fb2599f3a313cc6cfdb14df043f8c14a99c","modified":1472053847086},{"_id":"themes/next/source/vendors/fancybox/source/fancybox_loading@2x.gif","hash":"273b123496a42ba45c3416adb027cd99745058b0","modified":1472053847086},{"_id":"themes/next/source/vendors/fancybox/source/fancybox_overlay.png","hash":"b3a4ee645ba494f52840ef8412015ba0f465dbe0","modified":1472053847086},{"_id":"themes/next/source/vendors/fancybox/source/fancybox_sprite.png","hash":"17df19f97628e77be09c352bf27425faea248251","modified":1472053847086},{"_id":"themes/next/source/vendors/fancybox/source/fancybox_sprite@2x.png","hash":"30c58913f327e28f466a00f4c1ac8001b560aed8","modified":1472053847086},{"_id":"themes/next/source/vendors/fancybox/source/jquery.fancybox.css","hash":"82f33ad0842aa9c154d029e0dada2497d4eb1d57","modified":1472053847117},{"_id":"themes/next/source/vendors/fancybox/source/jquery.fancybox.js","hash":"d71602cbca33b9ecdb7ab291b7f86a49530f3601","modified":1472053847133},{"_id":"themes/next/source/vendors/fancybox/source/jquery.fancybox.pack.js","hash":"ae6318aeb62ad4ce7a7e9a4cdacd93ffb004f0fb","modified":1472053847148},{"_id":"themes/next/source/vendors/fastclick/lib/fastclick.js","hash":"1d6aeda0480d0e4cb6198edf7719d601d4ae2ccc","modified":1472053847179},{"_id":"themes/next/source/vendors/fastclick/lib/fastclick.min.js","hash":"2cae0f5a6c5d6f3cb993015e6863f9483fc4de18","modified":1472053847211},{"_id":"themes/next/source/vendors/font-awesome/css/font-awesome.css","hash":"811432ad1e2d6c1f6da9a63fd919bf2a02b71dd9","modified":1472053847246},{"_id":"themes/next/source/vendors/font-awesome/css/font-awesome.css.map","hash":"1573904b82807abbb32c97a3632c6c6808eaac50","modified":1472053847250},{"_id":"themes/next/source/vendors/font-awesome/css/font-awesome.min.css","hash":"4c2c5f5f6cc86d775a44b944661e038b7be98149","modified":1472053847255},{"_id":"themes/next/source/vendors/font-awesome/fonts/fontawesome-webfont.woff2","hash":"574ea2698c03ae9477db2ea3baf460ee32f1a7ea","modified":1472053847293},{"_id":"themes/next/source/vendors/ua-parser-js/dist/ua-parser.min.js","hash":"41ea797c68dbcff2f6fb3aba1d1043a22e7cc0f6","modified":1472053847436},{"_id":"themes/next/source/vendors/ua-parser-js/dist/ua-parser.pack.js","hash":"a817b6c158cbc5bab3582713de9fe18a18a80552","modified":1472053847452},{"_id":"themes/next/source/vendors/font-awesome/fonts/FontAwesome.otf","hash":"0112e96f327d413938d37c1693806f468ffdbace","modified":1472053847262},{"_id":"themes/next/source/vendors/font-awesome/fonts/fontawesome-webfont.eot","hash":"b3c2f08e73320135b69c23a3908b87a12053a2f6","modified":1472053847278},{"_id":"themes/next/source/vendors/font-awesome/fonts/fontawesome-webfont.woff","hash":"507970402e328b2baeb05bde73bf9ded4e2c3a2d","modified":1472053847293},{"_id":"themes/next/source/vendors/velocity/velocity.js","hash":"4237c6e9d59da349639de20e559e87c2c0218cfd","modified":1472053847483},{"_id":"themes/next/source/css/_common/components/footer/footer.styl","hash":"4c4ef6e997d0c6e21de39c2daa0c768e12c8c6fa","modified":1472053846156},{"_id":"themes/next/source/css/_common/components/header/header.styl","hash":"53cde051e0337f4bf42fb8d6d7a79fa3fa6d4ef2","modified":1472053846172},{"_id":"themes/next/source/css/_common/components/header/headerband.styl","hash":"d63e0cacc53dd375fcc113465a4328c59ff5f2c1","modified":1472053846178},{"_id":"themes/next/source/css/_common/components/header/menu.styl","hash":"852fd77500bda2c1a6651a14aa48d7d6222adc9d","modified":1472053846183},{"_id":"themes/next/source/css/_common/components/header/site-meta.styl","hash":"f168f79ba8cc80c775907da4cc00d01771ac1e1e","modified":1472053846190},{"_id":"themes/next/source/css/_common/components/header/site-nav.styl","hash":"1727702eac5d326b5c81a667944a245016668231","modified":1472053846209},{"_id":"themes/next/source/css/_common/components/highlight/highlight.styl","hash":"17fbd0f0c4938bcfff2a47e69d939e101863053b","modified":1472053846240},{"_id":"themes/next/source/css/_common/components/highlight/theme.styl","hash":"12e366f04497e3f44388fd40111a03e02f7c26af","modified":1472053846256},{"_id":"themes/next/source/css/_common/components/pages/archive.styl","hash":"8539c1122966a6aea64267d48af05603caa5fa29","modified":1472053846271},{"_id":"themes/next/source/css/_common/components/pages/categories.styl","hash":"7fb593f90d74a99c21840679933b9ef6fdc16a61","modified":1472053846271},{"_id":"themes/next/source/css/_common/components/pages/pages.styl","hash":"b8f9c95702e87fd0b170ab586c82c9718a245f8a","modified":1472053846271},{"_id":"themes/next/source/css/_common/components/pages/post-detail.styl","hash":"4e3838d7ac81d9ad133960f0f7ed58a44a015285","modified":1472053846287},{"_id":"themes/next/source/css/_common/components/post/post-collapse.styl","hash":"68ed6b0ad40745cb07ecd38f13960bb217aef848","modified":1472053846305},{"_id":"themes/next/source/css/_common/components/post/post-eof.styl","hash":"a200c0a1c5a895ac9dc41e0641a5dfcd766be99b","modified":1472053846311},{"_id":"themes/next/source/css/_common/components/post/post-expand.styl","hash":"4866fb9453d7d4c83a1c4e55d74e4afed336eb8b","modified":1472053846318},{"_id":"themes/next/source/css/_common/components/post/post-gallery.styl","hash":"cd9e214e502697f2f2db84eb721bac57a49b0fce","modified":1472053846324},{"_id":"themes/next/source/css/_common/components/post/post-meta.styl","hash":"5dba4ca272d7c767b57233cd99fba95dbf82153f","modified":1472053846331},{"_id":"themes/next/source/css/_common/components/post/post-more-link.styl","hash":"2bc3e33fdfbcf348c96ca60598f629dcd7ba3617","modified":1472053846338},{"_id":"themes/next/source/css/_common/components/post/post-nav.styl","hash":"929fac3a505bacbce6ba63009fd15851e2a8669d","modified":1472053846343},{"_id":"themes/next/source/css/_common/components/post/post-tags.styl","hash":"5a982d8ef3b3623ea5f59e63728990f5623c1b57","modified":1472053846389},{"_id":"themes/next/source/css/_common/components/post/post-title.styl","hash":"758d64ad65f718537ab5bfe5592a626abc40987e","modified":1472053846395},{"_id":"themes/next/source/css/_common/components/post/post-type.styl","hash":"01567edaea6978628aa5521a122a85434c418bfd","modified":1472053846405},{"_id":"themes/next/source/css/_common/components/post/post.styl","hash":"0e91a5a80fb62ed38c97cb649b166f945c6ce5f1","modified":1472053846413},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-author-links.styl","hash":"7f2bdd6109614d35408ee5ac3335aad4464c69c7","modified":1472053846434},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-author.styl","hash":"70407054dbb5180c69e50ea2655d32835494394e","modified":1472053846441},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-blogroll.styl","hash":"821991c0890966a512b43e8b1cf9537e738a09a0","modified":1472053846448},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-feed-link.styl","hash":"61f8cea3c01acd600e90e1bc2a07def405503748","modified":1472053846456},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-nav.styl","hash":"1153bb71edf253765145559674390e16dd67c633","modified":1472053846462},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-toc.styl","hash":"394888efec32749b353292a59ec7f1b609d6325e","modified":1472053846470},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-toggle.styl","hash":"06b9a99d63b4d57fdbf70b88ab7036fbc47e3f52","modified":1472053846476},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar.styl","hash":"702be9e57dd6ff5fa99642a1f6e3df26215b8805","modified":1472053846484},{"_id":"themes/next/source/css/_common/components/sidebar/site-state.styl","hash":"99c4b7d1459569cda394c733845d368008a180bf","modified":1472053846491},{"_id":"themes/next/source/css/_common/components/tags/blockquote-center.styl","hash":"2fe76476432b31993338cb45cdb3b29a518b6379","modified":1472053846505},{"_id":"themes/next/source/css/_common/components/tags/full-image.styl","hash":"dd941824210733588841897457e0cc9697ca5608","modified":1472053846511},{"_id":"themes/next/source/css/_common/components/tags/group-pictures.styl","hash":"2ad1a2a9bbf6742d1b0762c4c623b68113d1e0fe","modified":1472053846519},{"_id":"themes/next/source/css/_common/components/tags/tags.styl","hash":"a83f493e494f5c73fab8f6f5b686ef1670490095","modified":1472053846525},{"_id":"themes/next/source/css/_common/components/third-party/baidushare.styl","hash":"5dbeed535d63a50265d96b396a5440f9bb31e4ba","modified":1472053846531},{"_id":"themes/next/source/css/_common/components/third-party/duoshuo.styl","hash":"717cc7f82be9cc151e23a7678601ff2fd3a7fa1d","modified":1472053846556},{"_id":"themes/next/source/css/_common/components/third-party/jiathis.styl","hash":"15975ba7456b96916b1dbac448a1a0d2c38b8f3d","modified":1472053846562},{"_id":"themes/next/source/css/_common/components/third-party/localsearch.styl","hash":"dcb4548d07cbb38b645b1753cf3ee7157e16921a","modified":1472053846574},{"_id":"themes/next/source/css/_common/components/third-party/third-party.styl","hash":"0f368e6e95c0ba46580b491819e46ae31910c94b","modified":1472053846580},{"_id":"themes/next/source/css/_schemes/Mist/outline/outline.styl","hash":"a07aa12cc36ac5c819670c2a3c17d07ed7a08986","modified":1472053846751},{"_id":"themes/next/source/vendors/fancybox/source/helpers/jquery.fancybox-buttons.css","hash":"6394c48092085788a8c0ef72670b0652006231a1","modified":1472053847086},{"_id":"themes/next/source/vendors/fancybox/source/helpers/jquery.fancybox-buttons.js","hash":"ee948b4489aedeb548a77c9e45d8c7c5732fd62d","modified":1472053847101},{"_id":"themes/next/source/vendors/fancybox/source/helpers/fancybox_buttons.png","hash":"e385b139516c6813dcd64b8fc431c364ceafe5f3","modified":1472053847086},{"_id":"themes/next/source/vendors/fancybox/source/helpers/jquery.fancybox-media.js","hash":"51139a4c79573d372a347ef01a493222a1eaf10a","modified":1472053847101},{"_id":"themes/next/source/vendors/fancybox/source/helpers/jquery.fancybox-thumbs.css","hash":"b88b589f5f1aa1b3d87cc7eef34c281ff749b1ae","modified":1472053847101},{"_id":"themes/next/source/vendors/fancybox/source/helpers/jquery.fancybox-thumbs.js","hash":"d22b1629cb23a6181bebb70d0cf653ffe4b835c8","modified":1472053847117},{"_id":"themes/next/source/vendors/font-awesome/fonts/fontawesome-webfont.ttf","hash":"27cf1f2ec59aece6938c7bb2feb0e287ea778ff9","modified":1472053847293},{"_id":"themes/next/source/vendors/font-awesome/fonts/fontawesome-webfont.svg","hash":"f346b8b3df147e4059e1a7d66c52c9a6e1cec3e8","modified":1472053847278}],"Category":[],"Data":[],"Page":[{"title":"about","date":"2016-04-06T12:17:53.000Z","updated":"2016-08-24T15:50:44.443Z","tags":null,"comments":0,"_content":"{% fullimage /images/avatar.jpg %}\n\n### 说明\n上面的图片，应该有人知道的，冰火里面提利昂，是一个侏儒，受尽了歧视，为了生存和证明自己，不断地学习，是一个很有智慧的人物，拥有很多粉丝，不会那么快领便当的。\n\n其实在这里开通博客来更新，有几点不方便的地方就在于说，不能做到随时随地就来更新，所以，一般都是现在CSDN上面写好的，那边现在也支持markdown了，回到家以后，修改修改就可以直接放出去来。虽然，很多文章，我觉得其实没太多的技术含量，整天思考我要写多少多少含有技术含量的文章，会使自己忘记初心的，干脆就写工作遇到的一些问题好了，这样便于日后来查询，也便于自己思考是否把这块去深入理解一下了。而且，其实相对CSDN，自己建立的博客站，有个好处就是一来可以装逼，二来这边可以选择自己喜欢的主题。对了，CSDN上面的地址：\n<http://blog.csdn.net/ser_bad>\n\n图片出处：\n<http://techgnotic.deviantart.com/journal/Watch-The-Throne-The-Wars-To-Come-526718761>\n","source":"about/index.md","raw":"---\ntitle: about\ndate: 2016-04-06 20:17:53\nupdated:\ntags:\ncomments: false\n---\n{% fullimage /images/avatar.jpg %}\n\n### 说明\n上面的图片，应该有人知道的，冰火里面提利昂，是一个侏儒，受尽了歧视，为了生存和证明自己，不断地学习，是一个很有智慧的人物，拥有很多粉丝，不会那么快领便当的。\n\n其实在这里开通博客来更新，有几点不方便的地方就在于说，不能做到随时随地就来更新，所以，一般都是现在CSDN上面写好的，那边现在也支持markdown了，回到家以后，修改修改就可以直接放出去来。虽然，很多文章，我觉得其实没太多的技术含量，整天思考我要写多少多少含有技术含量的文章，会使自己忘记初心的，干脆就写工作遇到的一些问题好了，这样便于日后来查询，也便于自己思考是否把这块去深入理解一下了。而且，其实相对CSDN，自己建立的博客站，有个好处就是一来可以装逼，二来这边可以选择自己喜欢的主题。对了，CSDN上面的地址：\n<http://blog.csdn.net/ser_bad>\n\n图片出处：\n<http://techgnotic.deviantart.com/journal/Watch-The-Throne-The-Wars-To-Come-526718761>\n","path":"about/index.html","layout":"page","_id":"cis92vea60001h8dqg7190tvp","content":"<img src=\"/images/avatar.jpg\" class=\"full-image\">\n<h3 id=\"说明\"><a href=\"#说明\" class=\"headerlink\" title=\"说明\"></a>说明</h3><p>上面的图片，应该有人知道的，冰火里面提利昂，是一个侏儒，受尽了歧视，为了生存和证明自己，不断地学习，是一个很有智慧的人物，拥有很多粉丝，不会那么快领便当的。</p>\n<p>其实在这里开通博客来更新，有几点不方便的地方就在于说，不能做到随时随地就来更新，所以，一般都是现在CSDN上面写好的，那边现在也支持markdown了，回到家以后，修改修改就可以直接放出去来。虽然，很多文章，我觉得其实没太多的技术含量，整天思考我要写多少多少含有技术含量的文章，会使自己忘记初心的，干脆就写工作遇到的一些问题好了，这样便于日后来查询，也便于自己思考是否把这块去深入理解一下了。而且，其实相对CSDN，自己建立的博客站，有个好处就是一来可以装逼，二来这边可以选择自己喜欢的主题。对了，CSDN上面的地址：<br><a href=\"http://blog.csdn.net/ser_bad\" target=\"_blank\" rel=\"external\">http://blog.csdn.net/ser_bad</a></p>\n<p>图片出处：<br><a href=\"http://techgnotic.deviantart.com/journal/Watch-The-Throne-The-Wars-To-Come-526718761\" target=\"_blank\" rel=\"external\">http://techgnotic.deviantart.com/journal/Watch-The-Throne-The-Wars-To-Come-526718761</a></p>\n","excerpt":"","more":"<img src=\"/images/avatar.jpg\" class=\"full-image\" />\n<h3 id=\"说明\"><a href=\"#说明\" class=\"headerlink\" title=\"说明\"></a>说明</h3><p>上面的图片，应该有人知道的，冰火里面提利昂，是一个侏儒，受尽了歧视，为了生存和证明自己，不断地学习，是一个很有智慧的人物，拥有很多粉丝，不会那么快领便当的。</p>\n<p>其实在这里开通博客来更新，有几点不方便的地方就在于说，不能做到随时随地就来更新，所以，一般都是现在CSDN上面写好的，那边现在也支持markdown了，回到家以后，修改修改就可以直接放出去来。虽然，很多文章，我觉得其实没太多的技术含量，整天思考我要写多少多少含有技术含量的文章，会使自己忘记初心的，干脆就写工作遇到的一些问题好了，这样便于日后来查询，也便于自己思考是否把这块去深入理解一下了。而且，其实相对CSDN，自己建立的博客站，有个好处就是一来可以装逼，二来这边可以选择自己喜欢的主题。对了，CSDN上面的地址：<br><a href=\"http://blog.csdn.net/ser_bad\">http://blog.csdn.net/ser_bad</a></p>\n<p>图片出处：<br><a href=\"http://techgnotic.deviantart.com/journal/Watch-The-Throne-The-Wars-To-Come-526718761\">http://techgnotic.deviantart.com/journal/Watch-The-Throne-The-Wars-To-Come-526718761</a></p>\n"},{"title":"tags","date":"2016-04-15T17:12:59.000Z","comments":0,"tags":null,"type":"tags","_content":"","source":"tags/index.md","raw":"---\ntitle: tags\ndate: 2016-04-16 01:12:59\ncomments: false\ntags:\ntype: \"tags\"\n---\n","updated":"2016-08-24T15:50:44.458Z","path":"tags/index.html","layout":"page","_id":"cis92veab0003h8dqc06hj7y8","content":"","excerpt":"","more":""}],"Post":[{"title":"ALAYNE","date":"2016-04-06T12:59:24.000Z","comments":1,"_content":"## ALAYNE\\--EXCERPT FROM THE WINDS OF WINTER\n\nShe was reading her little lord a tale of the Winged Knight when Mya Stone came knocking on the door of his bedchamber, clad in boots and riding leathers and smelling strongly of the stable. Mya had straw in her hair and a scowl on her face. That scowl comes of having Mychel Redfort near, Alayne knew.\n\n“Your lordship,” Mya informed Lord Robert, “Lady Waynwood’s banners have been seen an hour down the road. She will be here soon, with your cousin Harry. Will you want to greet them?”\n\nWhy did she have to mention Harry? Alayne thought. We will never get Sweetrobin out of bed now. The boy slapped a pillow. “Send them away. I never asked them here.”\n<!-- more -->\nMya looked nonplussed. No one in the Vale was better at handling a mule, but lordlings were another matter. “They were invited,” she said uncertainly, “for the tourney. I don’t… “\n\nAlayne closed her book.  “Thank you, Mya. Let me talk with Lord Robert, if you would.”\n\nRelief plain on her face, Mya fled without another word.\n\n“I hate that Harry,” Sweetrobin said when she was gone. “He calls me cousin, but he’s just waiting for me to die so he can take the Eyrie. He thinks I don’t know, but I do.”\n\n“Your lordship should not believe such nonsense,” Alayne said. “I’m sure Ser Harrold loves you well.” And if the gods are good, he will love me too. Her tummy gave a little flutter.\n\n“He doesn’t,” Lord Robert insisted. “He wants my father’s castle, that’s all, so he pretends.” The boy clutched the blanket to his pimply chest. “I don’t want you to marry him, Alayne. I am the Lord of the Eyrie, and I forbid it.” He sounded as if he were about to cry. “You should marry me instead. We could sleep in the same bed every night, and you could read me stories.”\n\nNo man can wed me so long as my dwarf husband still lives somewhere in this world. Queen Cersei had collected the head of a dozen dwarfs, Petyr claimed, but none were Tyrion’s. “Sweetrobin, you must not say such things. You are the Lord of the Eyrie and Defender of the Vale, and you must wed a highborn lady and father a son to sit in the High Hall of House Arryn after you are gone.”\n\nRobert wiped his nose. “But I want — “\n\nShe put a finger to his lips. “I know what you want, but it cannot be. I am no fit wife for you. I am bastard born.”\n\n“I don’t care. I love you best of anyone. “\n\nYou are such a little fool.  “Your lords bannermen will care. Some call my father upjumped and ambitious. If you were to take me to wife, they would say that he made you do it, that it was no will of yours. The Lords Declarant might take arms against him once again, and he and I should both be put to death.”\n\n“I wouldn’t let them hurt you!” Lord Robert said. “If they try I will make them all fly.” His hand began to tremble.\n\nAlayne stroked his fingers. “There, my Sweetrobin, be still now.” When the shaking passed, she said, “You must have a proper wife, a trueborn maid of noble birth.”\n\n“No. I want to marry you, Alayne.”\n\nOnce your lady mother intended that very thing, but I was trueborn then, and noble. “My lord is kind to say so.” Alayne smoothed his hair. Lady Lysa had never let the servants touch it, and after she had died Robert had suffered terrible shaking fits whenever anyone came near him with a blade, so it had been allowed to grow until it tumbled over his round shoulders and halfway down his flabby white chest. He does have pretty hair.  If the gods are good and he lives long enough to wed, his wife will admire his hair, surely.  That much she will love about him. “Any child of ours would be baseborn. Only a trueborn child of House Arryn can displace Ser Harrold as your heir. My father will find a proper wife for you, some highborn girl much prettier than me. You’ll hunt and hawk together, and she’ll give you her favor to wear in tournaments. Before long, you will have forgotten me entirely.”\n\n“I won’t!”\n\n“You will. You must.” Her voice was firm, but gentle.\n\n“The Lord of the Eyrie can do as he likes. Can’t I still love you, even if I have to marry her? Ser Harrold has a common woman. Benjicot says she’s carrying his bastard.”\n\nBenjicot should learn to keep his fool’s mouth shut. “Is that what you would have from me? A bastard?” She pulled her fingers from his grasp. “Would you dishonor me that way?”\n\nThe boy looked stricken. “No. I never meant — “\n\nAlayne stood. “If it please my lord, I must go and find my father. Someone needs to greet Lady Waynwood.” Before her little lord could find the words to protest, she gave him a quick curtsy and fled the bedchamber, sweeping down the hall and across a covered bridge to the Lord Protector’s apartments.\n\nWhen she had left Petyr Baelish that morning he had been breaking his fast with old Oswell who had arrived last night from Gulltown on a lathered horse. She hoped they might still be talking, but Petyr’s solar proved empty. Someone had left a window open and a stack of papers had blown onto the floor. The sun was slanting through the thick yellow windows, and dust motes danced in the light like tiny golden insects. Though snow had blanketed the heights of the Giant’s Lance above, below the mountain the autumn lingered and winter wheat was ripening in the fields.  Outside the window she could hear the laughter of the washerwomen at the well, the din of steel on steel from the ward where the knights were at their drills. Good sounds.\n\nAlayne loved it here. She felt alive again, for the first since her father… since Lord Eddard Stark had died.\n\nShe closed the window, gathered up the fallen papers, and stacked them on the table. One was a list of the competitors. Four-and-sixty knights had been invited to vie for places amongst Lord Robert Arryn’s  new Brotherhood of Winged Knights, and four­ and-sixty knights had come to tilt for the right to wear falcon’s wings upon their warhelms and guard their lord.\n\nThe competitors came from all over the Vale, from the mountain valleys and the coast, from Gulltown and the Bloody Gate, even the Three Sisters. Though a few were promised, only three were wed; the eight victors would be expected to spend the next three years at Lord Robert’s side, as his own personal guard (Alayne had suggested seven, like the Kingsguard, but Sweetrobin had insisted that he must have more knights than King Tommen), so older men with wives and children had not been invited.\n\nAnd they came, Alayne thought proudly. They all came.\n\nIt had fallen out just as Petyr said it would, the day the ravens flew. “They’re young, eager, hungry for adventure and renown. Lysa would not let them go to war. This is the next best thing. A chance to serve their lord and prove their prowess. They will come. Even Harry the Heir.” He had smoothed her hair and kissed her forehead. “What a clever daughter you are.”\n\nIt was clever. The tourney, the prizes, the winged knights, it had all been her own notion. Lord Robert’s mother had filled him full of fears, but he always took courage from the tales she read him of Ser Artys Arryn, the Winged Knight of legend, founder of his line. Why not surround him with Winged Knights?  She had thought one night, after Sweetrobin had finally drifted off to sleep. His own Kingsguard, to keep him safe and make him brave. And no sooner did she tell Petyr her idea than he went out and made it happen. He will want to be there to greet Ser Harrold. Where could he have gone?\n\nAlayne swept down the tower stairs to enter the pillared gallery at the back of the Great Hall. Below her, serving men were setting up trestle tables for the evening feast, while their wives and daughters swept up the old rushes and scattered fresh ones. Lord Nestor was showing Lady Waxley his prize tapestries, with their scenes of hunt and chase. The same panels had once hung in the Red Keep of King’s Landing, when Robert sat the Iron Throne. Joffrey had them taken down and they had languished in some cellar until Petyr Baelish arranged for them to be brought to the Vale as a gift for Nestor Royce. Not only were the hangings beautiful, but the High Steward delighted in telling anyone who’d listen that they had once belonged to a king.\n\nPetyr was not in the Great Hall. Alayne crossed the gallery and descended the stair built into the thick west wall, to come out in the inner ward, where the jousting would be held. Viewing stands had raised for all those who had come to watch, with four long tilting barriers in between. Lord Nestor’s men were painting the barriers with whitewash, draping the stands with bright banners, and hanging shields on the gate the competitors would pass through when they made their entrance.\n\nAt the north end of the yard, three quintains had been set up, and some of the competitors were riding at them. Alayne knew them by their shields; the bells of Belmore, green vipers for the Lynderlys, the red sledge of Breakstone, House Tollett’s black and grey pily. Ser Mychel Redfort set one quintain spinning with a perfectly placed blow. He was one of those favored to win wings.\n\nPetyr was not at the quintains, nor anywhere in the yard, but as she turned to go a woman’s voice called out. “Alayne!” cried Myranda Royce, from a carved stone bench beneath a beech tree, where she was seated between two men. She looked in need of rescue. Smiling, Alayne walked toward her friend.\n\nMyranda was wearing a grey woolen dress, a green hooded cloak, and a rather desperate look. On either side of her sat a knight. The one on her right had a grizzled beard, a bald head, and a belly that spilled over his swordbelt where his lap should have been. The one on her left was no more than eighteen, and skinny as a spear. His ginger-colored whiskers only partially served to disguise the angry red pimples that dotted his face.\n\nThe bald knight wore a dark blue surcoat emblazoned with a huge pair of pink lips. The pimply-gingerlad countered with nine white seagulls on a field of brown, which marked him for a Shett of Gulltown. He was staring so intently at Myranda’s breasts that he hardly noticed Alayne until Myranda rose to hug her. “Thank you, thank you, thank you ” Randa whispered in her ear, before she turned to say, “Sers, may I present you the Lady Alayne Stone?”\n\n“The Lord Protector’s daughter,” the bald knight announced, all hearty gallantry. He rose ponderously. “And full as lovely as the tales told of her, I see.”\n\nNot to be outdone, the pimply knight hopped up and said,  “Ser Ossifer speaks truly, you are the most beautiful maid in all the Seven Kingdoms.” It might have been a sweeter courtesy had he not addressed it to her chest.\n\n“And have you seen all those maids yourself, ser?” Alayne asked him. “You are young to be so widely travelled.”\n\nHe blushed, which only made his pimples look angrier.  “No, my lady.   I am from Gulltown.”\n\nAnd I am not, though Alayne was born there. She would need to be careful around this one. “I remember Gulltown fondly,” she told him, with a smile as vague as it was pleasant. To Myranda she said, “Do you know where my father’s gotten to, perchance?”\n\n“Let me take you to him, my lady.”\n\n“I do hope you will forgive me for depriving you of Lady Myranda’s company,” Alayne told the knights. She did not wait for a reply, but took the older girl arm-in-arm and drew her away from the bench. Only when they were out of earshot did she whisper,  “Do you really know where my father is?”\n\n“Of course not. Walk faster, my new suitors may be following.” Myranda made a face. “Ossifer Lipps is the dullest knight in the Vale, but Uther Shett aspires to his laurels. I am praying they fight a duel for my hand, and kill each other.”\n\nAlayne giggled. “Surely Lord Nestor would not seriously entertain a suit from such men.”\n\n“Oh, he might. My lord father is annoyed with me for killing my last husband and putting him to all this trouble.”\n\n“It was not your fault he died.”\n\n“There was no one else in the bed that I recall.”\n\nAlayne could not help but shutter. Myranda’s husband had died when he was making love with her. “Those Sistermen who came in yesterday were gallant,” she said, to change the subject. “If you don’t like Ser Ossifer or Ser Uther, marry one of them instead. I thought the youngest one was very handsome.”\n\n“The one in the sealskin cloak?” Randa said, incredulous.\n\n“One of his brothers, then.”\n\nMyranda rolled her eyes. “They’re from the Sisters. Did you ever know a Sisterman who could joust? They clean their swords with codfish oil and wash in tubs of cold seawater.”\n\n“Well,” Alayne said, “at least they’re clean.”\n\n“Some of them have webs between their toes. I’d sooner marry Lord Petyr. Then I’d be your mother. How little is his finger, I ask you?”\n\nAlayne did not dignify that question with an answer. “Lady Waynwood will be here soon, with her sons.”\n\n“Is that a promise or a threat?” Myranda said. “The first Lady Waynwood must have been a mare, I think. How else to explain why all the Waynwood men are horse-faced? If I were ever to wed a Waynwood, he would have to swear a vow to don his helm whenever he wished to fuck me, and keep the visor closed.” She gave Alayne a pinch on the arm. “My Harry will be with them, though. I notice that you left him out. I shall never forgive you for stealing him away from me. He’s the boy I want to marry.”\n\n“The betrothal was my father’s doing,”  Alayne protested, as she had a hundred times before.  She is only teasing, she told herself… but behind the japes, she could hear the hurt.\n\nMyranda stopped to gaze across the yard at the knights at their practice. “Now there’s the very sort of husband I need.”\n\nA few feet away, two knights were fighting with blunted practice swords. Their blades crashed together twice, then slipped past each other only to be blocked by upraised shields, but the bigger man gave ground at the impact. Alayne could not see the front of his shield from where she stood, but his attacker bore three ravens in flight, each clutching a red heart in its claws. Three hearts and three ravens.\n\nShe knew right then how the fight would end.\n\nA few moments later and the big man sprawled dazed in the dust with his helm askew. When his squire undid the fastenings to bare his head, there was blood trickling down his scalp. If the swords had not been blunted, there would be brains as well. That last head blow had been so hard Alayne had winced in sympathy when it fell. Myranda Royce considered the victor thoughtfully.  “Do you think if I asked nicely Ser Lyn would kill my suitors for me?”\n\n“He might, for a plump bag of gold.” Ser Lyn Corbray was forever desperately short of coin, all the Vale knew that.\n\n“Alas, all I have is a plump pair of teats. Though with Ser Lyn, a plump sausage under my skirts would serve me better.”\n\nAlayne’s giggle drew Corbray’s attention. He handed his shield to his loutish squire, removed his helm and quilted coif.  “Ladies.” His long brown hair was plastered to his brow by sweat.\n\n“Well struck, Ser Lyn,” Alayne called out. “Though I fear you’ve knocked poor Ser Owen insensible.”\n\nCorbray glanced back to where his foe was being helped from the yard by his squire. “He had no sense to start with, or he should not have tried me.”\n\nThere is truth in that, Alayne thought, but some demon of mischief was in her that morning, so she gave Ser Lyn a thrust of her own. Smiling sweetly, she said, “My lord father tells me your brother’s new wife is with child.”\n\nCorbray gave her a dark look. “Lyonel sends his regrets. He remains at Heart’s Home with his peddler’s daughter, watching her belly swell as if he were the first man who ever got a wench pregnant.”\n\nOh, that’s an open wound, thought Alayne. Lyonel Corbray’s first wife had given him nothing but a frail, sickly babe who died in infancy, and during all those years Ser Lyn had remained his brother’s heir. When the poor woman finally died, however, Petyr Baelish had stepped in and brokered a new marriage for Lord Corbray. The second Lady Corbray was sixteen, the daughter of a wealthy Gulltown merchant, but she had come with an immense dowry, and men said she was a tall, strapping, healthy girl, with big breasts and good, wide hips. And fertile too, it seems.\n\n“We are all praying that the Mother grants Lady Corbray an easy labor and a healthy child,” said Myranda.\n\nAlayne could not help herself. She smiled and said, “My father is always pleased to be of service to one of Lord Robert’s leal bannermen. I’m sure he would be most delighted to help broker a marriage for you as well, Ser Lyn.”\n\n“How kind of him.” Corbray’s lips drew back in something that might have been meant as a smile, though it gave Alayne a chill. “But what need have I for heirs when I am landless and like to remain so, thanks to our Lord Protector?  No.  Tell your lord father I need none of his brood mares.”\n\nThe venom in his voice was so thick that for a moment she almost forgot that Lyn Corbray was actually her father’s catspaw, bought and paid for. Or was he?  Perhaps, instead of being Petyr’s man pretending to be Petyr’s foe, he was actually his foe pretending to be his man pretending to be his foe.\n\nJust thinking about it was enough to make her head spin. Alayne turned abruptly from the yard… and bumped into a short, sharp-faced man with a brush of orange hair who had come up behind her.  His hand shot out and caught her arm before she could fall.   “My lady.  My pardons if I took you unawares.”\n\n“The fault was mine. I did not see you standing there.”\n\n“We mice are quiet creatures.” Ser Shadrich was so short that he might have been taken for a squire, but his face belonged to a much older man. She saw long leagues in the wrinkles at the corner of his mouth, old battles in the scar beneath his ear, and a hardness behind the eyes that no boy would ever have. This was a man grown. Even Randa overtopped him, though.\n\n“Will you be seeking wings?” the Royce girl said.\n\n“A mouse with wings would be a silly sight.”\n\n“Perhaps you will try the melee instead?” Alayne suggested.  The melee was an afterthought, a sop for all the brothers, uncles, fathers, and friends who had accompanied the competitors to the Gates of the Moon to see them win their silver wings, but there would be prizes for the champions, and a chance to win ransoms.\n\n“A good melee is all a hedge knight can hope for, unless he stumbles on a bag of dragons. And that’s not likely, is it?”\n\n“I suppose not. But now you must excuse us, ser, we need to find my lord father. “\n\nHorns sounded from atop the wall.  “Too late,” Myranda said. “They’re here.  We shall need to do the honors by ourselves.”  She grinned.   “Last one to the gate must marry Uther Shett.”\n\nThey made a race of it, dashing headlong across the yard and past the stables, skirts flapping, whilst knights and serving men alike looked on, and pigs and chickens scattered before them. It was most unladylike, but Alayne sound found herself laughing. For just a little while, as she ran, she forget who she was, and where, and found herself remembering bright cold days at Winterfell, when she would race through Winterfell with her friend Jeyne Poole, with Arya running after them trying to keep up.\n\nBy the time they arrived at the gatehouse, both of them were red-faced and panting. Myranda had lost her cloak somewhere along the way. They were just in time. The portcullis had been raised, and a column of riders twenty strong were passing underneath. At their head rode Anya Waynwood, Lady of Ironoaks, stern and slim, her grey-brown hair bound up in a scarf. Her riding cloak was heavy green wool trimmed with brown fur, and clasped at the throat by a niello brooch in the shape of the broken wheel of her House.\n\nMyranda Royce stepped forward and sketched a curtsy. “Lady Anya. Welcome to the Gates of the Moon.”\n\n“Lady Myranda. Lady Alayne.” Anya Waynwood inclined her head to each of them in turn. “It is good of you to greet us. Allow me to present my grandson, Ser Roland Waynwood.”  She nodded at the knight who had spoken.  “And this is my youngest son, Ser Wallace Waynwood.  And of course my ward, Ser Harrold Hardyng.”\n\nHarry the Heir, Alayne thought. My husband-to-be, if he will have me.  A sudden terror filled her.  She wondered if her face was red. Don’t stare at him, she reminded herself, don’t stare, don’t gape, don’t gawk.  Look away. Her hair must be a frightful mess after all that running.  It took all her will to stop herself from trying to tuck the loose strands back into place. Never mind your stupid hair.  Your hair doesn’t matter.  It’s him that matters.  Him, and the Waynwoods.\n\nSer Roland was the oldest of the three, though no more than five-and-twenty. He was taller and more muscular than Ser Wallace, but both were long-faced and lantern-jawed, with stringy brown hair and pinched noses.  Horsefaced and homely, Alayne thought.\n\nHarry, though…\n\nMy Harry.  My lord, my lover, my betrothed.\n\nSer Harrold Hardyng looked every inch a lord-in-waiting; clean-limbed and handsome, straight as a lance, hard with muscle. Men old enough to have known Jon Arryn in his youth said Ser Harrold had his look, she knew. He had a mop of sandy blond hair, pale blue eyes, an aquiline nose. Joffrey was comely too, though, she reminded herself.   A comely monster, that’s what he was.  Little Lord Tyrion was kinder, twisted though he was.\n\nHarry was staring at her. He knows who I am, she realized, and he does not seem pleased to see me. It was only then that she took note of his heraldry. Though his surcoat and horse trappings were patterned in the red-and-white diamonds of House Hardyng, his shield was quartered. The arms of Hardyng and Waynwood were displayed in the first and third quarters, respectively, but in the second and fourth quarters he bore the moon-and-falcon of House Arryn, sky blue and cream. Sweetrobin will not like that.\n\nSer Wallace said, “Are we the l-l-last?”\n\n“You are, sers,” replied Myranda Royce, taking absolutely no notice of his stammer.\n\n“Wh-wh-when will the t-t-tilts commence?”\n\n“Oh, soon, I pray,” said Randa. “Some of the competitors have been here for almost a moon’s turn, partaking of my father’s meat and mead. All good fellows, and very brave… but they do eat rather a lot.”\n\nThe Waynwoods laughed, and even Harry the Heir cracked a thin smile. “It was snowing in the passes, else we would have been here sooner,” said Lady Anya.\n\n“Had we known such beauty awaited us at the Gates, we would have flown,” Ser Roland said.  Though his words were addressed to Myranda Royce, he smiled at Alayne as he said them.\n\n“To fly you would need wings,” Randa replied, “and there are some knights here who might have a thing to say concerning that.”\n\n“I look forward to a spirited discussion.” Ser Roland swung down from his horse, turned to Alayne, and smiled.  “I had heard that Lord Littlefinger’s daughter was fair of face and full of grace, but no one ever told me that she was a thief.”\n\n“You wrong me, ser. I am no thief!”\n\nSer Roland placed his hand over his heart. “Then how do you explain this hole in my chest, from where you stole my heart?”\n\n“He is only t-teasing you, my lady,” stammered Ser Wallace. “My n-n-nephew never had a h-h-heart.”\n\n“The Waynwood wheel has a broken spoke, and we have my nuncle here.” Ser Roland gave Wallace a whap behind the ear.  “Squires should be quiet when knights are speaking.”\n\nSer Wallace reddened.  “I am no more a s-squire, my lady.  My n-nephew knows full well that I was k-k-kni-k-k-kni –“\n\n“Dubbed?” Alayne suggested gently.\n\n“Dubbed,” said Wallace Waynwood, gratefully.\n\nRobb would be his age, if he were still alive, she could not help but think, but Robb died a king, and this is just a boy.\n\n“My lord father has assigned you rooms in the East Tower,” Lady Myranda was telling Lady Waynwood, “but I fear your knights will need to share a bed. The Gates of the Moon were never meant to house so many noble visitors.”\n\n“You are in the Falcon Tower, Ser Harrold,” Alayne put in. Far away from Sweetrobin. That was intentional, she knew. Petyr Baelish did not leave such things to chance. “If it please you, I will show you to your chambers myself.” This time her eyes met Harry’s.  She smiled just for him, and said a silent prayer to the Maiden. Please, he doesn’t need to love me, just make him like me, just a little, that would be enough for now.\n\nSer Harrold looked down at her coldly. “Why should it please me to be escorted anywhere by Littlefinger’s bastard?”\n\nAll three Waynwoods looked at him askance. “You are a guest here, Harry,” Lady Anya reminded him, in a frosty voice. “See that you remember that.”\n\nA lady’s armor is her courtesy. Alayne could feel the blood rushing to her face. No tears, she prayed. Please, please, I must not cry. “As you wish, ser. And now if you will excuse me, Littlefinger’s bastard must find her lord father and let him know that you have come, so we can begin the tourney on the morrow.”  And may your horse stumble, Harry the Heir, so you fall on your stupid head in your first tilt. She showed the Waynwoods a stone face as they blurted out awkward apologies for their companion. When they were done she turned and fled.\n\nNear the keep, she ran headlong into Ser Lothor Brune and almost knocked him off his feet. “Harry the Heir?  Harry the Arse, I say. He’s just some upjumped squire.”\n\nAlayne was so grateful that she hugged him. “Thank you. Have you seen my father, ser?”\n\n“Down in the vaults, ” Ser Lothar said, “inspecting Lord Nestor’s granaries with Lord Grafton and Lord Belmore.”\n\nThe vaults were large and dark and filthy. Alayne lit a taper and clutched her skirt as she made the descent. Near the bottom, she heard Lord Grafton’s booming voice, and followed.”The merchants are clamoring to buy, and the lords are clamoring to sell,” the Gulltowner was saying when she found them.  Though not a tall man, Grafton was wide, with thick arms and shoulders.  His hair was a dirty blond mop.  “How am I to stop that, my lord?”\n\n“Post guardsmen on the docks. If need be, seize the ships. How does not matter, so long as no food leaves the Vale. “\n\n“These prices, though,”  protested fat Lord Belmore,”  these prices are more than fair.”\n\n“You say more than fair, my lord.  I say less than we would wish.  Wait.  If need be, buy the food yourself and keep it stored.  Winter is coming.  Prices must go higher.”\n\n“Perhaps,”  said Belmore, doubtfully.\n\n“Bronze Yohn will not wait, ”  Grafton complained.  “He need not ship through Gulltown, he has his own ports.  Whilst we are hoarding our harvest, Royce and the other Lords Declarant will turn theirs into silver, you may be sure of that.”\n\n“Let us hope so,”  said Petyr.  “When their granaries are empty, they will need every scrap of that silver to buy sustenance from us.  And now if you will excuse me, my lord, it would seem my daughter has need of me.”\n\n“Lady Alayne,” Lord Grafton said. “You look bright-eyed this morning.”\n\n“You are kind to say so, my lord. Father, I am sorry to disturb you, but I thought you would want to know that the Waynwoods have arrived.”\n\n“And is Ser Harrold with them?”\n\nHorrible Ser Harrold.  “ He is.”\n\nLord Belmore laughed. “I never thought Royce would let him come. Is he blind, or merely stupid?”\n\n“He is honorable.  Sometimes it amounts to the same thing.  If he denied the lad the chance to prove himself, it could create a rift between them, so why not let him tilt?  The boy is nowise skilled enough to win a place amongst the Winged Knights.”\n\n“I suppose not,” said Belmore, grudgingly.  Lord Grafton kissed Alayne on the hand, and the two lords went off, leaving her alone with her lord father.\n\n“Come,” Petyr said, “walk with me.”  He took her by the arm and led her deeper into the vaults, past an empty dungeon.  “And how was your first meeting with Harry the Heir?”\n\n“He’s horrible.”\n\n“The world is full of horrors, sweet.  By now you ought to know that.  You’ve seen enough of them.”\n\n“Yes,” she said, “but why must he be so cruel?  He called me your bastard.  Right in the yard, in front of everyone.”\n\n“So far as he knows, that’s who you are.  This betrothal was never his idea, and Bronze Yohn has no doubt warned him against my wiles.  You are my daughter.  He does not trust you, and he believes that you’re beneath him.”\n\n“Well, I’m not.  He may think he’s some great knight, but Ser Lothor says he’s just some upjumped squire.”\n\nPetyr put his arm around her.  “So he is, but he is Robert’s heir as well.  Bringing Harry here was the first step in our plan, but now we need to keep him, and only you can do that.  He has a weakness for a pretty face, and whose face is prettier than yours?  Charm him.  Entrance him.  Bewitch him.”\n\n“I don’t know how,”  she said miserably.\n\n“Oh, I think you do,” said Littlefinger, with one of those smiles that did not reach his eyes.  “You will be the most beautiful woman in the hall tonight, as lovely as your lady mother at your age.  I cannot seat you on the dais, but you’ll have a place of honor above the salt and underneath a wall sconce.  The fire will be shining in your hair, so everyone will see how fair of face you are.  Keep a good long spoon on hand to beat the squires off, sweetling.  You will not want green boys underfoot when the knights come round to beg you for your favor.”\n\n“Who would ask to wear a bastard’s favor?”\n\n“Harry, if he has the wits the gods gave a goose… but do not give it to him.  Choose some other gallant, and favor him instead.  You do not want to seem too eager.”\n\n“No,” Alayne said.\n\n“Lady Waynwood will insist that Harry dance with you, I can promise you that much.  That will be your chance. Smile at the boy.  Touch him when you speak.  Tease him, to pique his pride.  If he seems to be responding, tell him that you are feeling faint, and ask him to take you outside for a breath of fresh air.  No knight could refuse such a request from a fair maiden.”\n\n“Yes,” she said, “but he thinks that I’m a bastard.”\n\n“A beautiful bastard, and the Lord Protector’s daughter.”  Petyr drew her close and kissed her on both cheeks.  “The night belongs to you, sweetling, Remember that, always.”\n\n“I’ll try, father,” she said.\n\nThe feast proved to be everything her father promised.\n\nSixty-four dishes were served, in honor of the sixty-four competitors who had come so far to contest for silver wings before their lord. From the rivers and the lakes came pike and trout and salmon, from the seas crabs and cod and herring. Ducks there were, and capons, peacocks in their plumage and swans in almond milk. Suckling pigs were served up crackling with apples in their mouths, and three huge aurochs were roasted whole above firepits in the castle yard, since they were too big to get through the kitchen doors. Loaves of hot bread filled the trestle tables in Lord Nestor’s hall, and massive wheels of cheese were brought up from the vaults.  The butter was fresh-churned, and there were leeks and carrots, roasted onions, beets, turnips, parsnips.  And best of all, Lord Nestor’s cooks prepared a splendid subtlety, a lemon cake in the shape of the Giant’s Lance, twelve feet tall and adorned with an Eyrie made of sugar.\n\nFor me, Alayne thought, as they wheeled it out.  Sweetrobin loved lemon cakes too, but only after she told him that they were her favorites.  The cake had required every lemon in the Vale, but Petyr had promised that he would send to Dorne for more.\n\nThere were gifts as well, splendid gifts.  Each of the competitors received a cloak of cloth-of-silver and a lapis brooch in the shape of a pair of falcon’s wings.  Fine steel daggers were given to the brothers, fathers, and friends who had come to watch them tilt.  For their mothers, sisters, and ladies fair there were bolts of silk and Myrish lace.\n\n“Lord Nestor has an open hand,” Alayne heard Ser Edmund Breakstone say.  “An open hand and a little finger,” Lady Waynwood replied, with a nod toward Petyr Baelish.   Breakstone was not slow to take her meaning.  The true source of this largesse was not Lord Nestor, but the Lord Protector.\n\nWhen the last course had been served and cleared, the tables were lifted from their trestles to clear the floor for dancing, and musicians were brought in.\n\n“Are there no singers?” asked Ben Coldwater.\n\n“The little lord cannot abide them,” Ser Lymond Lynderly replied.  “Not since Marillion.”\n\n“Ah… that was the man who murdered Lady Lysa, yes?”\n\nAlayne spoke up. “His singing pleased her greatly, and she showed him too much favor, perhaps.  When she wed my father he went mad and pushed her out the Moon Door.  Lord Robert has hated singing ever since.  He is still fond of music, though.”\n\n“As am I,” Coldwater said.  Rising, he offered Alayne his hand.  “Would you honor me with this dance, my lady?”\n\n“You’re very kind,” she said, as he led her to the floor.\n\nHe was her first partner of the evening, but far from the last.  Just as Petyr had promised, the young knights flocked around her, vying for her favor.  After Ben came Andrew Tollett, handsome Ser Byron, red-nosed Ser Morgarth, and Ser Shadrich the Mad Mouse.  Then Ser Albar Royce, Myranda’s stout dull brother and Lord Nestor’s heir.  She danced with all three Sunderlands, none of whom had webs between their fingers, though she could not vouch for their toes.  Uther Shett appeared to pay her slimy compliments as he trod upon her feet, but Ser Targon the Halfwild proved to be the soul of courtesy.  After that Ser Roland Waynwood swept her up and made her laugh with mocking comments about half the other knights in the hall.  His uncle Wallace took a turn as well and tried to do the same, but the words would not come.  Alayne finally took pity on him and began to chatter happily, to spare him the embarrassment.  When the dance was done she excused herself, and went back to her place to have a drink of wine.\n\nAnd there he stood, Harry the Heir himself; tall, handsome, scowling.  “Lady Alayne. May I partner you in this dance?”\n\nShe considered for a moment. “No. I don’t think so.”\n\nColor rose to his cheeks.  “I was unforgiveably rude to you in the yard.  You must forgive me.”\n\n“Must?” She tossed her hair, took a sip of wine, made him wait.  “How can you forgive someone who is unforgiveably rude?  Will you explain that to me, ser?”\n\nSer Harrold looked confused. “Please.  One dance.”\n\nCharm him.  Entrance him.  Bewitch him.  “If you insist.”\n\nHe nodded, offered his arm, led her out onto the floor.  As they waited for the music to resume, Alayne glanced at the dais, where Lord Robert sat staring at them.  Please, she prayed, don’t let him start to twitch and shake.  Not here.  Not now.  Maester Coleman would have made certain that he drank a strong dose of sweetmilk before the feast, but even so.\n\nThen the musicians took up a tune, and she was dancing.\n\nSay something, she urged herself.  You will never make Ser Harry love you if you don’t have the courage to talk him.  Should she tell him what a good dancer he was?  No, he’s probably heard that a dozen times tonight.  Besides, Petyr said that I should not seem eager.  Instead she said, “I have heard that you are about to be a father.”  It was not something most girls would say to their almost-betrothed, but she wanted to see if Ser Harrold would lie.\n\n“For the second time. My daughter Alys is two years old.”\n\nYour bastard daughter Alys, Alayne thought, but what she said was, “That one had a different mother, though.”\n\n“Yes. Cissy was a pretty thing when I tumbled her, but childbirth left her as fat as a cow, so Lady Anya arranged for her to marry one of her men-at-arms.  It is different with Saffron.”\n\n“Saffron?”  Alayne tried not to laugh.  “Truly?”\n\nSer Harrold had the grace to blush.  “Her father says she is more precious to him than gold.  He’s rich, the richest man in Gulltown.  A fortune in spices.”\n\n“What will you name the babe?” she asked.  “Cinnamon if she’s a girl?  Cloves if he’s a boy?”\n\nThat almost made him stumble.  “My lady japes.”\n\n“Oh, no.”  Petyr will howl when I tell him what I said.\n\n“Saffron is very beautiful, I’ll have you know.  Tall and slim, with big brown eyes and hair like honey.”\n\nAlayne raised her head.  “More beautiful than me?”\n\nSer Harrold studied her face. “You are comely enough, I grant you.  When Lady Anya first told me of this match, I was afraid that you might look like your father.”\n\n“Little pointy beard and all?”  Alayne laughed.\n\n“I never meant… “\n\n“I hope you joust better than you talk.”\n\nFor a moment he looked shocked.  But as the song was ending, he burst into a laugh.  “No one told me you were clever.”\n\nHe has good teeth, she thought, straight and white.  And when he smiles, he has the nicest dimples.  She ran one finger down his cheek.  “Should we ever wed, you’ll have to send Saffron back to her father.  I’ll be all the spice you’ll want.”\n\nHe grinned.  “I will hold you to that promise, my lady.  Until that day, may I wear your favor in the tourney?”\n\n“You may not.  It is promised to… another.”  She was not sure who as yet, but she knew she would find someone.\n","source":"_posts/ALAYNE.md","raw":"---\ntitle: ALAYNE\ndate: 2016-04-06 20:59:24\ntags: 冰与火之歌\ncomments: true\n---\n## ALAYNE\\--EXCERPT FROM THE WINDS OF WINTER\n\nShe was reading her little lord a tale of the Winged Knight when Mya Stone came knocking on the door of his bedchamber, clad in boots and riding leathers and smelling strongly of the stable. Mya had straw in her hair and a scowl on her face. That scowl comes of having Mychel Redfort near, Alayne knew.\n\n“Your lordship,” Mya informed Lord Robert, “Lady Waynwood’s banners have been seen an hour down the road. She will be here soon, with your cousin Harry. Will you want to greet them?”\n\nWhy did she have to mention Harry? Alayne thought. We will never get Sweetrobin out of bed now. The boy slapped a pillow. “Send them away. I never asked them here.”\n<!-- more -->\nMya looked nonplussed. No one in the Vale was better at handling a mule, but lordlings were another matter. “They were invited,” she said uncertainly, “for the tourney. I don’t… “\n\nAlayne closed her book.  “Thank you, Mya. Let me talk with Lord Robert, if you would.”\n\nRelief plain on her face, Mya fled without another word.\n\n“I hate that Harry,” Sweetrobin said when she was gone. “He calls me cousin, but he’s just waiting for me to die so he can take the Eyrie. He thinks I don’t know, but I do.”\n\n“Your lordship should not believe such nonsense,” Alayne said. “I’m sure Ser Harrold loves you well.” And if the gods are good, he will love me too. Her tummy gave a little flutter.\n\n“He doesn’t,” Lord Robert insisted. “He wants my father’s castle, that’s all, so he pretends.” The boy clutched the blanket to his pimply chest. “I don’t want you to marry him, Alayne. I am the Lord of the Eyrie, and I forbid it.” He sounded as if he were about to cry. “You should marry me instead. We could sleep in the same bed every night, and you could read me stories.”\n\nNo man can wed me so long as my dwarf husband still lives somewhere in this world. Queen Cersei had collected the head of a dozen dwarfs, Petyr claimed, but none were Tyrion’s. “Sweetrobin, you must not say such things. You are the Lord of the Eyrie and Defender of the Vale, and you must wed a highborn lady and father a son to sit in the High Hall of House Arryn after you are gone.”\n\nRobert wiped his nose. “But I want — “\n\nShe put a finger to his lips. “I know what you want, but it cannot be. I am no fit wife for you. I am bastard born.”\n\n“I don’t care. I love you best of anyone. “\n\nYou are such a little fool.  “Your lords bannermen will care. Some call my father upjumped and ambitious. If you were to take me to wife, they would say that he made you do it, that it was no will of yours. The Lords Declarant might take arms against him once again, and he and I should both be put to death.”\n\n“I wouldn’t let them hurt you!” Lord Robert said. “If they try I will make them all fly.” His hand began to tremble.\n\nAlayne stroked his fingers. “There, my Sweetrobin, be still now.” When the shaking passed, she said, “You must have a proper wife, a trueborn maid of noble birth.”\n\n“No. I want to marry you, Alayne.”\n\nOnce your lady mother intended that very thing, but I was trueborn then, and noble. “My lord is kind to say so.” Alayne smoothed his hair. Lady Lysa had never let the servants touch it, and after she had died Robert had suffered terrible shaking fits whenever anyone came near him with a blade, so it had been allowed to grow until it tumbled over his round shoulders and halfway down his flabby white chest. He does have pretty hair.  If the gods are good and he lives long enough to wed, his wife will admire his hair, surely.  That much she will love about him. “Any child of ours would be baseborn. Only a trueborn child of House Arryn can displace Ser Harrold as your heir. My father will find a proper wife for you, some highborn girl much prettier than me. You’ll hunt and hawk together, and she’ll give you her favor to wear in tournaments. Before long, you will have forgotten me entirely.”\n\n“I won’t!”\n\n“You will. You must.” Her voice was firm, but gentle.\n\n“The Lord of the Eyrie can do as he likes. Can’t I still love you, even if I have to marry her? Ser Harrold has a common woman. Benjicot says she’s carrying his bastard.”\n\nBenjicot should learn to keep his fool’s mouth shut. “Is that what you would have from me? A bastard?” She pulled her fingers from his grasp. “Would you dishonor me that way?”\n\nThe boy looked stricken. “No. I never meant — “\n\nAlayne stood. “If it please my lord, I must go and find my father. Someone needs to greet Lady Waynwood.” Before her little lord could find the words to protest, she gave him a quick curtsy and fled the bedchamber, sweeping down the hall and across a covered bridge to the Lord Protector’s apartments.\n\nWhen she had left Petyr Baelish that morning he had been breaking his fast with old Oswell who had arrived last night from Gulltown on a lathered horse. She hoped they might still be talking, but Petyr’s solar proved empty. Someone had left a window open and a stack of papers had blown onto the floor. The sun was slanting through the thick yellow windows, and dust motes danced in the light like tiny golden insects. Though snow had blanketed the heights of the Giant’s Lance above, below the mountain the autumn lingered and winter wheat was ripening in the fields.  Outside the window she could hear the laughter of the washerwomen at the well, the din of steel on steel from the ward where the knights were at their drills. Good sounds.\n\nAlayne loved it here. She felt alive again, for the first since her father… since Lord Eddard Stark had died.\n\nShe closed the window, gathered up the fallen papers, and stacked them on the table. One was a list of the competitors. Four-and-sixty knights had been invited to vie for places amongst Lord Robert Arryn’s  new Brotherhood of Winged Knights, and four­ and-sixty knights had come to tilt for the right to wear falcon’s wings upon their warhelms and guard their lord.\n\nThe competitors came from all over the Vale, from the mountain valleys and the coast, from Gulltown and the Bloody Gate, even the Three Sisters. Though a few were promised, only three were wed; the eight victors would be expected to spend the next three years at Lord Robert’s side, as his own personal guard (Alayne had suggested seven, like the Kingsguard, but Sweetrobin had insisted that he must have more knights than King Tommen), so older men with wives and children had not been invited.\n\nAnd they came, Alayne thought proudly. They all came.\n\nIt had fallen out just as Petyr said it would, the day the ravens flew. “They’re young, eager, hungry for adventure and renown. Lysa would not let them go to war. This is the next best thing. A chance to serve their lord and prove their prowess. They will come. Even Harry the Heir.” He had smoothed her hair and kissed her forehead. “What a clever daughter you are.”\n\nIt was clever. The tourney, the prizes, the winged knights, it had all been her own notion. Lord Robert’s mother had filled him full of fears, but he always took courage from the tales she read him of Ser Artys Arryn, the Winged Knight of legend, founder of his line. Why not surround him with Winged Knights?  She had thought one night, after Sweetrobin had finally drifted off to sleep. His own Kingsguard, to keep him safe and make him brave. And no sooner did she tell Petyr her idea than he went out and made it happen. He will want to be there to greet Ser Harrold. Where could he have gone?\n\nAlayne swept down the tower stairs to enter the pillared gallery at the back of the Great Hall. Below her, serving men were setting up trestle tables for the evening feast, while their wives and daughters swept up the old rushes and scattered fresh ones. Lord Nestor was showing Lady Waxley his prize tapestries, with their scenes of hunt and chase. The same panels had once hung in the Red Keep of King’s Landing, when Robert sat the Iron Throne. Joffrey had them taken down and they had languished in some cellar until Petyr Baelish arranged for them to be brought to the Vale as a gift for Nestor Royce. Not only were the hangings beautiful, but the High Steward delighted in telling anyone who’d listen that they had once belonged to a king.\n\nPetyr was not in the Great Hall. Alayne crossed the gallery and descended the stair built into the thick west wall, to come out in the inner ward, where the jousting would be held. Viewing stands had raised for all those who had come to watch, with four long tilting barriers in between. Lord Nestor’s men were painting the barriers with whitewash, draping the stands with bright banners, and hanging shields on the gate the competitors would pass through when they made their entrance.\n\nAt the north end of the yard, three quintains had been set up, and some of the competitors were riding at them. Alayne knew them by their shields; the bells of Belmore, green vipers for the Lynderlys, the red sledge of Breakstone, House Tollett’s black and grey pily. Ser Mychel Redfort set one quintain spinning with a perfectly placed blow. He was one of those favored to win wings.\n\nPetyr was not at the quintains, nor anywhere in the yard, but as she turned to go a woman’s voice called out. “Alayne!” cried Myranda Royce, from a carved stone bench beneath a beech tree, where she was seated between two men. She looked in need of rescue. Smiling, Alayne walked toward her friend.\n\nMyranda was wearing a grey woolen dress, a green hooded cloak, and a rather desperate look. On either side of her sat a knight. The one on her right had a grizzled beard, a bald head, and a belly that spilled over his swordbelt where his lap should have been. The one on her left was no more than eighteen, and skinny as a spear. His ginger-colored whiskers only partially served to disguise the angry red pimples that dotted his face.\n\nThe bald knight wore a dark blue surcoat emblazoned with a huge pair of pink lips. The pimply-gingerlad countered with nine white seagulls on a field of brown, which marked him for a Shett of Gulltown. He was staring so intently at Myranda’s breasts that he hardly noticed Alayne until Myranda rose to hug her. “Thank you, thank you, thank you ” Randa whispered in her ear, before she turned to say, “Sers, may I present you the Lady Alayne Stone?”\n\n“The Lord Protector’s daughter,” the bald knight announced, all hearty gallantry. He rose ponderously. “And full as lovely as the tales told of her, I see.”\n\nNot to be outdone, the pimply knight hopped up and said,  “Ser Ossifer speaks truly, you are the most beautiful maid in all the Seven Kingdoms.” It might have been a sweeter courtesy had he not addressed it to her chest.\n\n“And have you seen all those maids yourself, ser?” Alayne asked him. “You are young to be so widely travelled.”\n\nHe blushed, which only made his pimples look angrier.  “No, my lady.   I am from Gulltown.”\n\nAnd I am not, though Alayne was born there. She would need to be careful around this one. “I remember Gulltown fondly,” she told him, with a smile as vague as it was pleasant. To Myranda she said, “Do you know where my father’s gotten to, perchance?”\n\n“Let me take you to him, my lady.”\n\n“I do hope you will forgive me for depriving you of Lady Myranda’s company,” Alayne told the knights. She did not wait for a reply, but took the older girl arm-in-arm and drew her away from the bench. Only when they were out of earshot did she whisper,  “Do you really know where my father is?”\n\n“Of course not. Walk faster, my new suitors may be following.” Myranda made a face. “Ossifer Lipps is the dullest knight in the Vale, but Uther Shett aspires to his laurels. I am praying they fight a duel for my hand, and kill each other.”\n\nAlayne giggled. “Surely Lord Nestor would not seriously entertain a suit from such men.”\n\n“Oh, he might. My lord father is annoyed with me for killing my last husband and putting him to all this trouble.”\n\n“It was not your fault he died.”\n\n“There was no one else in the bed that I recall.”\n\nAlayne could not help but shutter. Myranda’s husband had died when he was making love with her. “Those Sistermen who came in yesterday were gallant,” she said, to change the subject. “If you don’t like Ser Ossifer or Ser Uther, marry one of them instead. I thought the youngest one was very handsome.”\n\n“The one in the sealskin cloak?” Randa said, incredulous.\n\n“One of his brothers, then.”\n\nMyranda rolled her eyes. “They’re from the Sisters. Did you ever know a Sisterman who could joust? They clean their swords with codfish oil and wash in tubs of cold seawater.”\n\n“Well,” Alayne said, “at least they’re clean.”\n\n“Some of them have webs between their toes. I’d sooner marry Lord Petyr. Then I’d be your mother. How little is his finger, I ask you?”\n\nAlayne did not dignify that question with an answer. “Lady Waynwood will be here soon, with her sons.”\n\n“Is that a promise or a threat?” Myranda said. “The first Lady Waynwood must have been a mare, I think. How else to explain why all the Waynwood men are horse-faced? If I were ever to wed a Waynwood, he would have to swear a vow to don his helm whenever he wished to fuck me, and keep the visor closed.” She gave Alayne a pinch on the arm. “My Harry will be with them, though. I notice that you left him out. I shall never forgive you for stealing him away from me. He’s the boy I want to marry.”\n\n“The betrothal was my father’s doing,”  Alayne protested, as she had a hundred times before.  She is only teasing, she told herself… but behind the japes, she could hear the hurt.\n\nMyranda stopped to gaze across the yard at the knights at their practice. “Now there’s the very sort of husband I need.”\n\nA few feet away, two knights were fighting with blunted practice swords. Their blades crashed together twice, then slipped past each other only to be blocked by upraised shields, but the bigger man gave ground at the impact. Alayne could not see the front of his shield from where she stood, but his attacker bore three ravens in flight, each clutching a red heart in its claws. Three hearts and three ravens.\n\nShe knew right then how the fight would end.\n\nA few moments later and the big man sprawled dazed in the dust with his helm askew. When his squire undid the fastenings to bare his head, there was blood trickling down his scalp. If the swords had not been blunted, there would be brains as well. That last head blow had been so hard Alayne had winced in sympathy when it fell. Myranda Royce considered the victor thoughtfully.  “Do you think if I asked nicely Ser Lyn would kill my suitors for me?”\n\n“He might, for a plump bag of gold.” Ser Lyn Corbray was forever desperately short of coin, all the Vale knew that.\n\n“Alas, all I have is a plump pair of teats. Though with Ser Lyn, a plump sausage under my skirts would serve me better.”\n\nAlayne’s giggle drew Corbray’s attention. He handed his shield to his loutish squire, removed his helm and quilted coif.  “Ladies.” His long brown hair was plastered to his brow by sweat.\n\n“Well struck, Ser Lyn,” Alayne called out. “Though I fear you’ve knocked poor Ser Owen insensible.”\n\nCorbray glanced back to where his foe was being helped from the yard by his squire. “He had no sense to start with, or he should not have tried me.”\n\nThere is truth in that, Alayne thought, but some demon of mischief was in her that morning, so she gave Ser Lyn a thrust of her own. Smiling sweetly, she said, “My lord father tells me your brother’s new wife is with child.”\n\nCorbray gave her a dark look. “Lyonel sends his regrets. He remains at Heart’s Home with his peddler’s daughter, watching her belly swell as if he were the first man who ever got a wench pregnant.”\n\nOh, that’s an open wound, thought Alayne. Lyonel Corbray’s first wife had given him nothing but a frail, sickly babe who died in infancy, and during all those years Ser Lyn had remained his brother’s heir. When the poor woman finally died, however, Petyr Baelish had stepped in and brokered a new marriage for Lord Corbray. The second Lady Corbray was sixteen, the daughter of a wealthy Gulltown merchant, but she had come with an immense dowry, and men said she was a tall, strapping, healthy girl, with big breasts and good, wide hips. And fertile too, it seems.\n\n“We are all praying that the Mother grants Lady Corbray an easy labor and a healthy child,” said Myranda.\n\nAlayne could not help herself. She smiled and said, “My father is always pleased to be of service to one of Lord Robert’s leal bannermen. I’m sure he would be most delighted to help broker a marriage for you as well, Ser Lyn.”\n\n“How kind of him.” Corbray’s lips drew back in something that might have been meant as a smile, though it gave Alayne a chill. “But what need have I for heirs when I am landless and like to remain so, thanks to our Lord Protector?  No.  Tell your lord father I need none of his brood mares.”\n\nThe venom in his voice was so thick that for a moment she almost forgot that Lyn Corbray was actually her father’s catspaw, bought and paid for. Or was he?  Perhaps, instead of being Petyr’s man pretending to be Petyr’s foe, he was actually his foe pretending to be his man pretending to be his foe.\n\nJust thinking about it was enough to make her head spin. Alayne turned abruptly from the yard… and bumped into a short, sharp-faced man with a brush of orange hair who had come up behind her.  His hand shot out and caught her arm before she could fall.   “My lady.  My pardons if I took you unawares.”\n\n“The fault was mine. I did not see you standing there.”\n\n“We mice are quiet creatures.” Ser Shadrich was so short that he might have been taken for a squire, but his face belonged to a much older man. She saw long leagues in the wrinkles at the corner of his mouth, old battles in the scar beneath his ear, and a hardness behind the eyes that no boy would ever have. This was a man grown. Even Randa overtopped him, though.\n\n“Will you be seeking wings?” the Royce girl said.\n\n“A mouse with wings would be a silly sight.”\n\n“Perhaps you will try the melee instead?” Alayne suggested.  The melee was an afterthought, a sop for all the brothers, uncles, fathers, and friends who had accompanied the competitors to the Gates of the Moon to see them win their silver wings, but there would be prizes for the champions, and a chance to win ransoms.\n\n“A good melee is all a hedge knight can hope for, unless he stumbles on a bag of dragons. And that’s not likely, is it?”\n\n“I suppose not. But now you must excuse us, ser, we need to find my lord father. “\n\nHorns sounded from atop the wall.  “Too late,” Myranda said. “They’re here.  We shall need to do the honors by ourselves.”  She grinned.   “Last one to the gate must marry Uther Shett.”\n\nThey made a race of it, dashing headlong across the yard and past the stables, skirts flapping, whilst knights and serving men alike looked on, and pigs and chickens scattered before them. It was most unladylike, but Alayne sound found herself laughing. For just a little while, as she ran, she forget who she was, and where, and found herself remembering bright cold days at Winterfell, when she would race through Winterfell with her friend Jeyne Poole, with Arya running after them trying to keep up.\n\nBy the time they arrived at the gatehouse, both of them were red-faced and panting. Myranda had lost her cloak somewhere along the way. They were just in time. The portcullis had been raised, and a column of riders twenty strong were passing underneath. At their head rode Anya Waynwood, Lady of Ironoaks, stern and slim, her grey-brown hair bound up in a scarf. Her riding cloak was heavy green wool trimmed with brown fur, and clasped at the throat by a niello brooch in the shape of the broken wheel of her House.\n\nMyranda Royce stepped forward and sketched a curtsy. “Lady Anya. Welcome to the Gates of the Moon.”\n\n“Lady Myranda. Lady Alayne.” Anya Waynwood inclined her head to each of them in turn. “It is good of you to greet us. Allow me to present my grandson, Ser Roland Waynwood.”  She nodded at the knight who had spoken.  “And this is my youngest son, Ser Wallace Waynwood.  And of course my ward, Ser Harrold Hardyng.”\n\nHarry the Heir, Alayne thought. My husband-to-be, if he will have me.  A sudden terror filled her.  She wondered if her face was red. Don’t stare at him, she reminded herself, don’t stare, don’t gape, don’t gawk.  Look away. Her hair must be a frightful mess after all that running.  It took all her will to stop herself from trying to tuck the loose strands back into place. Never mind your stupid hair.  Your hair doesn’t matter.  It’s him that matters.  Him, and the Waynwoods.\n\nSer Roland was the oldest of the three, though no more than five-and-twenty. He was taller and more muscular than Ser Wallace, but both were long-faced and lantern-jawed, with stringy brown hair and pinched noses.  Horsefaced and homely, Alayne thought.\n\nHarry, though…\n\nMy Harry.  My lord, my lover, my betrothed.\n\nSer Harrold Hardyng looked every inch a lord-in-waiting; clean-limbed and handsome, straight as a lance, hard with muscle. Men old enough to have known Jon Arryn in his youth said Ser Harrold had his look, she knew. He had a mop of sandy blond hair, pale blue eyes, an aquiline nose. Joffrey was comely too, though, she reminded herself.   A comely monster, that’s what he was.  Little Lord Tyrion was kinder, twisted though he was.\n\nHarry was staring at her. He knows who I am, she realized, and he does not seem pleased to see me. It was only then that she took note of his heraldry. Though his surcoat and horse trappings were patterned in the red-and-white diamonds of House Hardyng, his shield was quartered. The arms of Hardyng and Waynwood were displayed in the first and third quarters, respectively, but in the second and fourth quarters he bore the moon-and-falcon of House Arryn, sky blue and cream. Sweetrobin will not like that.\n\nSer Wallace said, “Are we the l-l-last?”\n\n“You are, sers,” replied Myranda Royce, taking absolutely no notice of his stammer.\n\n“Wh-wh-when will the t-t-tilts commence?”\n\n“Oh, soon, I pray,” said Randa. “Some of the competitors have been here for almost a moon’s turn, partaking of my father’s meat and mead. All good fellows, and very brave… but they do eat rather a lot.”\n\nThe Waynwoods laughed, and even Harry the Heir cracked a thin smile. “It was snowing in the passes, else we would have been here sooner,” said Lady Anya.\n\n“Had we known such beauty awaited us at the Gates, we would have flown,” Ser Roland said.  Though his words were addressed to Myranda Royce, he smiled at Alayne as he said them.\n\n“To fly you would need wings,” Randa replied, “and there are some knights here who might have a thing to say concerning that.”\n\n“I look forward to a spirited discussion.” Ser Roland swung down from his horse, turned to Alayne, and smiled.  “I had heard that Lord Littlefinger’s daughter was fair of face and full of grace, but no one ever told me that she was a thief.”\n\n“You wrong me, ser. I am no thief!”\n\nSer Roland placed his hand over his heart. “Then how do you explain this hole in my chest, from where you stole my heart?”\n\n“He is only t-teasing you, my lady,” stammered Ser Wallace. “My n-n-nephew never had a h-h-heart.”\n\n“The Waynwood wheel has a broken spoke, and we have my nuncle here.” Ser Roland gave Wallace a whap behind the ear.  “Squires should be quiet when knights are speaking.”\n\nSer Wallace reddened.  “I am no more a s-squire, my lady.  My n-nephew knows full well that I was k-k-kni-k-k-kni –“\n\n“Dubbed?” Alayne suggested gently.\n\n“Dubbed,” said Wallace Waynwood, gratefully.\n\nRobb would be his age, if he were still alive, she could not help but think, but Robb died a king, and this is just a boy.\n\n“My lord father has assigned you rooms in the East Tower,” Lady Myranda was telling Lady Waynwood, “but I fear your knights will need to share a bed. The Gates of the Moon were never meant to house so many noble visitors.”\n\n“You are in the Falcon Tower, Ser Harrold,” Alayne put in. Far away from Sweetrobin. That was intentional, she knew. Petyr Baelish did not leave such things to chance. “If it please you, I will show you to your chambers myself.” This time her eyes met Harry’s.  She smiled just for him, and said a silent prayer to the Maiden. Please, he doesn’t need to love me, just make him like me, just a little, that would be enough for now.\n\nSer Harrold looked down at her coldly. “Why should it please me to be escorted anywhere by Littlefinger’s bastard?”\n\nAll three Waynwoods looked at him askance. “You are a guest here, Harry,” Lady Anya reminded him, in a frosty voice. “See that you remember that.”\n\nA lady’s armor is her courtesy. Alayne could feel the blood rushing to her face. No tears, she prayed. Please, please, I must not cry. “As you wish, ser. And now if you will excuse me, Littlefinger’s bastard must find her lord father and let him know that you have come, so we can begin the tourney on the morrow.”  And may your horse stumble, Harry the Heir, so you fall on your stupid head in your first tilt. She showed the Waynwoods a stone face as they blurted out awkward apologies for their companion. When they were done she turned and fled.\n\nNear the keep, she ran headlong into Ser Lothor Brune and almost knocked him off his feet. “Harry the Heir?  Harry the Arse, I say. He’s just some upjumped squire.”\n\nAlayne was so grateful that she hugged him. “Thank you. Have you seen my father, ser?”\n\n“Down in the vaults, ” Ser Lothar said, “inspecting Lord Nestor’s granaries with Lord Grafton and Lord Belmore.”\n\nThe vaults were large and dark and filthy. Alayne lit a taper and clutched her skirt as she made the descent. Near the bottom, she heard Lord Grafton’s booming voice, and followed.”The merchants are clamoring to buy, and the lords are clamoring to sell,” the Gulltowner was saying when she found them.  Though not a tall man, Grafton was wide, with thick arms and shoulders.  His hair was a dirty blond mop.  “How am I to stop that, my lord?”\n\n“Post guardsmen on the docks. If need be, seize the ships. How does not matter, so long as no food leaves the Vale. “\n\n“These prices, though,”  protested fat Lord Belmore,”  these prices are more than fair.”\n\n“You say more than fair, my lord.  I say less than we would wish.  Wait.  If need be, buy the food yourself and keep it stored.  Winter is coming.  Prices must go higher.”\n\n“Perhaps,”  said Belmore, doubtfully.\n\n“Bronze Yohn will not wait, ”  Grafton complained.  “He need not ship through Gulltown, he has his own ports.  Whilst we are hoarding our harvest, Royce and the other Lords Declarant will turn theirs into silver, you may be sure of that.”\n\n“Let us hope so,”  said Petyr.  “When their granaries are empty, they will need every scrap of that silver to buy sustenance from us.  And now if you will excuse me, my lord, it would seem my daughter has need of me.”\n\n“Lady Alayne,” Lord Grafton said. “You look bright-eyed this morning.”\n\n“You are kind to say so, my lord. Father, I am sorry to disturb you, but I thought you would want to know that the Waynwoods have arrived.”\n\n“And is Ser Harrold with them?”\n\nHorrible Ser Harrold.  “ He is.”\n\nLord Belmore laughed. “I never thought Royce would let him come. Is he blind, or merely stupid?”\n\n“He is honorable.  Sometimes it amounts to the same thing.  If he denied the lad the chance to prove himself, it could create a rift between them, so why not let him tilt?  The boy is nowise skilled enough to win a place amongst the Winged Knights.”\n\n“I suppose not,” said Belmore, grudgingly.  Lord Grafton kissed Alayne on the hand, and the two lords went off, leaving her alone with her lord father.\n\n“Come,” Petyr said, “walk with me.”  He took her by the arm and led her deeper into the vaults, past an empty dungeon.  “And how was your first meeting with Harry the Heir?”\n\n“He’s horrible.”\n\n“The world is full of horrors, sweet.  By now you ought to know that.  You’ve seen enough of them.”\n\n“Yes,” she said, “but why must he be so cruel?  He called me your bastard.  Right in the yard, in front of everyone.”\n\n“So far as he knows, that’s who you are.  This betrothal was never his idea, and Bronze Yohn has no doubt warned him against my wiles.  You are my daughter.  He does not trust you, and he believes that you’re beneath him.”\n\n“Well, I’m not.  He may think he’s some great knight, but Ser Lothor says he’s just some upjumped squire.”\n\nPetyr put his arm around her.  “So he is, but he is Robert’s heir as well.  Bringing Harry here was the first step in our plan, but now we need to keep him, and only you can do that.  He has a weakness for a pretty face, and whose face is prettier than yours?  Charm him.  Entrance him.  Bewitch him.”\n\n“I don’t know how,”  she said miserably.\n\n“Oh, I think you do,” said Littlefinger, with one of those smiles that did not reach his eyes.  “You will be the most beautiful woman in the hall tonight, as lovely as your lady mother at your age.  I cannot seat you on the dais, but you’ll have a place of honor above the salt and underneath a wall sconce.  The fire will be shining in your hair, so everyone will see how fair of face you are.  Keep a good long spoon on hand to beat the squires off, sweetling.  You will not want green boys underfoot when the knights come round to beg you for your favor.”\n\n“Who would ask to wear a bastard’s favor?”\n\n“Harry, if he has the wits the gods gave a goose… but do not give it to him.  Choose some other gallant, and favor him instead.  You do not want to seem too eager.”\n\n“No,” Alayne said.\n\n“Lady Waynwood will insist that Harry dance with you, I can promise you that much.  That will be your chance. Smile at the boy.  Touch him when you speak.  Tease him, to pique his pride.  If he seems to be responding, tell him that you are feeling faint, and ask him to take you outside for a breath of fresh air.  No knight could refuse such a request from a fair maiden.”\n\n“Yes,” she said, “but he thinks that I’m a bastard.”\n\n“A beautiful bastard, and the Lord Protector’s daughter.”  Petyr drew her close and kissed her on both cheeks.  “The night belongs to you, sweetling, Remember that, always.”\n\n“I’ll try, father,” she said.\n\nThe feast proved to be everything her father promised.\n\nSixty-four dishes were served, in honor of the sixty-four competitors who had come so far to contest for silver wings before their lord. From the rivers and the lakes came pike and trout and salmon, from the seas crabs and cod and herring. Ducks there were, and capons, peacocks in their plumage and swans in almond milk. Suckling pigs were served up crackling with apples in their mouths, and three huge aurochs were roasted whole above firepits in the castle yard, since they were too big to get through the kitchen doors. Loaves of hot bread filled the trestle tables in Lord Nestor’s hall, and massive wheels of cheese were brought up from the vaults.  The butter was fresh-churned, and there were leeks and carrots, roasted onions, beets, turnips, parsnips.  And best of all, Lord Nestor’s cooks prepared a splendid subtlety, a lemon cake in the shape of the Giant’s Lance, twelve feet tall and adorned with an Eyrie made of sugar.\n\nFor me, Alayne thought, as they wheeled it out.  Sweetrobin loved lemon cakes too, but only after she told him that they were her favorites.  The cake had required every lemon in the Vale, but Petyr had promised that he would send to Dorne for more.\n\nThere were gifts as well, splendid gifts.  Each of the competitors received a cloak of cloth-of-silver and a lapis brooch in the shape of a pair of falcon’s wings.  Fine steel daggers were given to the brothers, fathers, and friends who had come to watch them tilt.  For their mothers, sisters, and ladies fair there were bolts of silk and Myrish lace.\n\n“Lord Nestor has an open hand,” Alayne heard Ser Edmund Breakstone say.  “An open hand and a little finger,” Lady Waynwood replied, with a nod toward Petyr Baelish.   Breakstone was not slow to take her meaning.  The true source of this largesse was not Lord Nestor, but the Lord Protector.\n\nWhen the last course had been served and cleared, the tables were lifted from their trestles to clear the floor for dancing, and musicians were brought in.\n\n“Are there no singers?” asked Ben Coldwater.\n\n“The little lord cannot abide them,” Ser Lymond Lynderly replied.  “Not since Marillion.”\n\n“Ah… that was the man who murdered Lady Lysa, yes?”\n\nAlayne spoke up. “His singing pleased her greatly, and she showed him too much favor, perhaps.  When she wed my father he went mad and pushed her out the Moon Door.  Lord Robert has hated singing ever since.  He is still fond of music, though.”\n\n“As am I,” Coldwater said.  Rising, he offered Alayne his hand.  “Would you honor me with this dance, my lady?”\n\n“You’re very kind,” she said, as he led her to the floor.\n\nHe was her first partner of the evening, but far from the last.  Just as Petyr had promised, the young knights flocked around her, vying for her favor.  After Ben came Andrew Tollett, handsome Ser Byron, red-nosed Ser Morgarth, and Ser Shadrich the Mad Mouse.  Then Ser Albar Royce, Myranda’s stout dull brother and Lord Nestor’s heir.  She danced with all three Sunderlands, none of whom had webs between their fingers, though she could not vouch for their toes.  Uther Shett appeared to pay her slimy compliments as he trod upon her feet, but Ser Targon the Halfwild proved to be the soul of courtesy.  After that Ser Roland Waynwood swept her up and made her laugh with mocking comments about half the other knights in the hall.  His uncle Wallace took a turn as well and tried to do the same, but the words would not come.  Alayne finally took pity on him and began to chatter happily, to spare him the embarrassment.  When the dance was done she excused herself, and went back to her place to have a drink of wine.\n\nAnd there he stood, Harry the Heir himself; tall, handsome, scowling.  “Lady Alayne. May I partner you in this dance?”\n\nShe considered for a moment. “No. I don’t think so.”\n\nColor rose to his cheeks.  “I was unforgiveably rude to you in the yard.  You must forgive me.”\n\n“Must?” She tossed her hair, took a sip of wine, made him wait.  “How can you forgive someone who is unforgiveably rude?  Will you explain that to me, ser?”\n\nSer Harrold looked confused. “Please.  One dance.”\n\nCharm him.  Entrance him.  Bewitch him.  “If you insist.”\n\nHe nodded, offered his arm, led her out onto the floor.  As they waited for the music to resume, Alayne glanced at the dais, where Lord Robert sat staring at them.  Please, she prayed, don’t let him start to twitch and shake.  Not here.  Not now.  Maester Coleman would have made certain that he drank a strong dose of sweetmilk before the feast, but even so.\n\nThen the musicians took up a tune, and she was dancing.\n\nSay something, she urged herself.  You will never make Ser Harry love you if you don’t have the courage to talk him.  Should she tell him what a good dancer he was?  No, he’s probably heard that a dozen times tonight.  Besides, Petyr said that I should not seem eager.  Instead she said, “I have heard that you are about to be a father.”  It was not something most girls would say to their almost-betrothed, but she wanted to see if Ser Harrold would lie.\n\n“For the second time. My daughter Alys is two years old.”\n\nYour bastard daughter Alys, Alayne thought, but what she said was, “That one had a different mother, though.”\n\n“Yes. Cissy was a pretty thing when I tumbled her, but childbirth left her as fat as a cow, so Lady Anya arranged for her to marry one of her men-at-arms.  It is different with Saffron.”\n\n“Saffron?”  Alayne tried not to laugh.  “Truly?”\n\nSer Harrold had the grace to blush.  “Her father says she is more precious to him than gold.  He’s rich, the richest man in Gulltown.  A fortune in spices.”\n\n“What will you name the babe?” she asked.  “Cinnamon if she’s a girl?  Cloves if he’s a boy?”\n\nThat almost made him stumble.  “My lady japes.”\n\n“Oh, no.”  Petyr will howl when I tell him what I said.\n\n“Saffron is very beautiful, I’ll have you know.  Tall and slim, with big brown eyes and hair like honey.”\n\nAlayne raised her head.  “More beautiful than me?”\n\nSer Harrold studied her face. “You are comely enough, I grant you.  When Lady Anya first told me of this match, I was afraid that you might look like your father.”\n\n“Little pointy beard and all?”  Alayne laughed.\n\n“I never meant… “\n\n“I hope you joust better than you talk.”\n\nFor a moment he looked shocked.  But as the song was ending, he burst into a laugh.  “No one told me you were clever.”\n\nHe has good teeth, she thought, straight and white.  And when he smiles, he has the nicest dimples.  She ran one finger down his cheek.  “Should we ever wed, you’ll have to send Saffron back to her father.  I’ll be all the spice you’ll want.”\n\nHe grinned.  “I will hold you to that promise, my lady.  Until that day, may I wear your favor in the tourney?”\n\n“You may not.  It is promised to… another.”  She was not sure who as yet, but she knew she would find someone.\n","slug":"ALAYNE","published":1,"updated":"2016-08-24T15:50:44.146Z","layout":"post","photos":[],"link":"","_id":"cis92ve9x0000h8dqdook72zr","content":"<h2 id=\"ALAYNE-EXCERPT-FROM-THE-WINDS-OF-WINTER\"><a href=\"#ALAYNE-EXCERPT-FROM-THE-WINDS-OF-WINTER\" class=\"headerlink\" title=\"ALAYNE--EXCERPT FROM THE WINDS OF WINTER\"></a>ALAYNE--EXCERPT FROM THE WINDS OF WINTER</h2><p>She was reading her little lord a tale of the Winged Knight when Mya Stone came knocking on the door of his bedchamber, clad in boots and riding leathers and smelling strongly of the stable. Mya had straw in her hair and a scowl on her face. That scowl comes of having Mychel Redfort near, Alayne knew.</p>\n<p>“Your lordship,” Mya informed Lord Robert, “Lady Waynwood’s banners have been seen an hour down the road. She will be here soon, with your cousin Harry. Will you want to greet them?”</p>\n<p>Why did she have to mention Harry? Alayne thought. We will never get Sweetrobin out of bed now. The boy slapped a pillow. “Send them away. I never asked them here.”<br><a id=\"more\"></a><br>Mya looked nonplussed. No one in the Vale was better at handling a mule, but lordlings were another matter. “They were invited,” she said uncertainly, “for the tourney. I don’t… “</p>\n<p>Alayne closed her book.  “Thank you, Mya. Let me talk with Lord Robert, if you would.”</p>\n<p>Relief plain on her face, Mya fled without another word.</p>\n<p>“I hate that Harry,” Sweetrobin said when she was gone. “He calls me cousin, but he’s just waiting for me to die so he can take the Eyrie. He thinks I don’t know, but I do.”</p>\n<p>“Your lordship should not believe such nonsense,” Alayne said. “I’m sure Ser Harrold loves you well.” And if the gods are good, he will love me too. Her tummy gave a little flutter.</p>\n<p>“He doesn’t,” Lord Robert insisted. “He wants my father’s castle, that’s all, so he pretends.” The boy clutched the blanket to his pimply chest. “I don’t want you to marry him, Alayne. I am the Lord of the Eyrie, and I forbid it.” He sounded as if he were about to cry. “You should marry me instead. We could sleep in the same bed every night, and you could read me stories.”</p>\n<p>No man can wed me so long as my dwarf husband still lives somewhere in this world. Queen Cersei had collected the head of a dozen dwarfs, Petyr claimed, but none were Tyrion’s. “Sweetrobin, you must not say such things. You are the Lord of the Eyrie and Defender of the Vale, and you must wed a highborn lady and father a son to sit in the High Hall of House Arryn after you are gone.”</p>\n<p>Robert wiped his nose. “But I want — “</p>\n<p>She put a finger to his lips. “I know what you want, but it cannot be. I am no fit wife for you. I am bastard born.”</p>\n<p>“I don’t care. I love you best of anyone. “</p>\n<p>You are such a little fool.  “Your lords bannermen will care. Some call my father upjumped and ambitious. If you were to take me to wife, they would say that he made you do it, that it was no will of yours. The Lords Declarant might take arms against him once again, and he and I should both be put to death.”</p>\n<p>“I wouldn’t let them hurt you!” Lord Robert said. “If they try I will make them all fly.” His hand began to tremble.</p>\n<p>Alayne stroked his fingers. “There, my Sweetrobin, be still now.” When the shaking passed, she said, “You must have a proper wife, a trueborn maid of noble birth.”</p>\n<p>“No. I want to marry you, Alayne.”</p>\n<p>Once your lady mother intended that very thing, but I was trueborn then, and noble. “My lord is kind to say so.” Alayne smoothed his hair. Lady Lysa had never let the servants touch it, and after she had died Robert had suffered terrible shaking fits whenever anyone came near him with a blade, so it had been allowed to grow until it tumbled over his round shoulders and halfway down his flabby white chest. He does have pretty hair.  If the gods are good and he lives long enough to wed, his wife will admire his hair, surely.  That much she will love about him. “Any child of ours would be baseborn. Only a trueborn child of House Arryn can displace Ser Harrold as your heir. My father will find a proper wife for you, some highborn girl much prettier than me. You’ll hunt and hawk together, and she’ll give you her favor to wear in tournaments. Before long, you will have forgotten me entirely.”</p>\n<p>“I won’t!”</p>\n<p>“You will. You must.” Her voice was firm, but gentle.</p>\n<p>“The Lord of the Eyrie can do as he likes. Can’t I still love you, even if I have to marry her? Ser Harrold has a common woman. Benjicot says she’s carrying his bastard.”</p>\n<p>Benjicot should learn to keep his fool’s mouth shut. “Is that what you would have from me? A bastard?” She pulled her fingers from his grasp. “Would you dishonor me that way?”</p>\n<p>The boy looked stricken. “No. I never meant — “</p>\n<p>Alayne stood. “If it please my lord, I must go and find my father. Someone needs to greet Lady Waynwood.” Before her little lord could find the words to protest, she gave him a quick curtsy and fled the bedchamber, sweeping down the hall and across a covered bridge to the Lord Protector’s apartments.</p>\n<p>When she had left Petyr Baelish that morning he had been breaking his fast with old Oswell who had arrived last night from Gulltown on a lathered horse. She hoped they might still be talking, but Petyr’s solar proved empty. Someone had left a window open and a stack of papers had blown onto the floor. The sun was slanting through the thick yellow windows, and dust motes danced in the light like tiny golden insects. Though snow had blanketed the heights of the Giant’s Lance above, below the mountain the autumn lingered and winter wheat was ripening in the fields.  Outside the window she could hear the laughter of the washerwomen at the well, the din of steel on steel from the ward where the knights were at their drills. Good sounds.</p>\n<p>Alayne loved it here. She felt alive again, for the first since her father… since Lord Eddard Stark had died.</p>\n<p>She closed the window, gathered up the fallen papers, and stacked them on the table. One was a list of the competitors. Four-and-sixty knights had been invited to vie for places amongst Lord Robert Arryn’s  new Brotherhood of Winged Knights, and four­ and-sixty knights had come to tilt for the right to wear falcon’s wings upon their warhelms and guard their lord.</p>\n<p>The competitors came from all over the Vale, from the mountain valleys and the coast, from Gulltown and the Bloody Gate, even the Three Sisters. Though a few were promised, only three were wed; the eight victors would be expected to spend the next three years at Lord Robert’s side, as his own personal guard (Alayne had suggested seven, like the Kingsguard, but Sweetrobin had insisted that he must have more knights than King Tommen), so older men with wives and children had not been invited.</p>\n<p>And they came, Alayne thought proudly. They all came.</p>\n<p>It had fallen out just as Petyr said it would, the day the ravens flew. “They’re young, eager, hungry for adventure and renown. Lysa would not let them go to war. This is the next best thing. A chance to serve their lord and prove their prowess. They will come. Even Harry the Heir.” He had smoothed her hair and kissed her forehead. “What a clever daughter you are.”</p>\n<p>It was clever. The tourney, the prizes, the winged knights, it had all been her own notion. Lord Robert’s mother had filled him full of fears, but he always took courage from the tales she read him of Ser Artys Arryn, the Winged Knight of legend, founder of his line. Why not surround him with Winged Knights?  She had thought one night, after Sweetrobin had finally drifted off to sleep. His own Kingsguard, to keep him safe and make him brave. And no sooner did she tell Petyr her idea than he went out and made it happen. He will want to be there to greet Ser Harrold. Where could he have gone?</p>\n<p>Alayne swept down the tower stairs to enter the pillared gallery at the back of the Great Hall. Below her, serving men were setting up trestle tables for the evening feast, while their wives and daughters swept up the old rushes and scattered fresh ones. Lord Nestor was showing Lady Waxley his prize tapestries, with their scenes of hunt and chase. The same panels had once hung in the Red Keep of King’s Landing, when Robert sat the Iron Throne. Joffrey had them taken down and they had languished in some cellar until Petyr Baelish arranged for them to be brought to the Vale as a gift for Nestor Royce. Not only were the hangings beautiful, but the High Steward delighted in telling anyone who’d listen that they had once belonged to a king.</p>\n<p>Petyr was not in the Great Hall. Alayne crossed the gallery and descended the stair built into the thick west wall, to come out in the inner ward, where the jousting would be held. Viewing stands had raised for all those who had come to watch, with four long tilting barriers in between. Lord Nestor’s men were painting the barriers with whitewash, draping the stands with bright banners, and hanging shields on the gate the competitors would pass through when they made their entrance.</p>\n<p>At the north end of the yard, three quintains had been set up, and some of the competitors were riding at them. Alayne knew them by their shields; the bells of Belmore, green vipers for the Lynderlys, the red sledge of Breakstone, House Tollett’s black and grey pily. Ser Mychel Redfort set one quintain spinning with a perfectly placed blow. He was one of those favored to win wings.</p>\n<p>Petyr was not at the quintains, nor anywhere in the yard, but as she turned to go a woman’s voice called out. “Alayne!” cried Myranda Royce, from a carved stone bench beneath a beech tree, where she was seated between two men. She looked in need of rescue. Smiling, Alayne walked toward her friend.</p>\n<p>Myranda was wearing a grey woolen dress, a green hooded cloak, and a rather desperate look. On either side of her sat a knight. The one on her right had a grizzled beard, a bald head, and a belly that spilled over his swordbelt where his lap should have been. The one on her left was no more than eighteen, and skinny as a spear. His ginger-colored whiskers only partially served to disguise the angry red pimples that dotted his face.</p>\n<p>The bald knight wore a dark blue surcoat emblazoned with a huge pair of pink lips. The pimply-gingerlad countered with nine white seagulls on a field of brown, which marked him for a Shett of Gulltown. He was staring so intently at Myranda’s breasts that he hardly noticed Alayne until Myranda rose to hug her. “Thank you, thank you, thank you ” Randa whispered in her ear, before she turned to say, “Sers, may I present you the Lady Alayne Stone?”</p>\n<p>“The Lord Protector’s daughter,” the bald knight announced, all hearty gallantry. He rose ponderously. “And full as lovely as the tales told of her, I see.”</p>\n<p>Not to be outdone, the pimply knight hopped up and said,  “Ser Ossifer speaks truly, you are the most beautiful maid in all the Seven Kingdoms.” It might have been a sweeter courtesy had he not addressed it to her chest.</p>\n<p>“And have you seen all those maids yourself, ser?” Alayne asked him. “You are young to be so widely travelled.”</p>\n<p>He blushed, which only made his pimples look angrier.  “No, my lady.   I am from Gulltown.”</p>\n<p>And I am not, though Alayne was born there. She would need to be careful around this one. “I remember Gulltown fondly,” she told him, with a smile as vague as it was pleasant. To Myranda she said, “Do you know where my father’s gotten to, perchance?”</p>\n<p>“Let me take you to him, my lady.”</p>\n<p>“I do hope you will forgive me for depriving you of Lady Myranda’s company,” Alayne told the knights. She did not wait for a reply, but took the older girl arm-in-arm and drew her away from the bench. Only when they were out of earshot did she whisper,  “Do you really know where my father is?”</p>\n<p>“Of course not. Walk faster, my new suitors may be following.” Myranda made a face. “Ossifer Lipps is the dullest knight in the Vale, but Uther Shett aspires to his laurels. I am praying they fight a duel for my hand, and kill each other.”</p>\n<p>Alayne giggled. “Surely Lord Nestor would not seriously entertain a suit from such men.”</p>\n<p>“Oh, he might. My lord father is annoyed with me for killing my last husband and putting him to all this trouble.”</p>\n<p>“It was not your fault he died.”</p>\n<p>“There was no one else in the bed that I recall.”</p>\n<p>Alayne could not help but shutter. Myranda’s husband had died when he was making love with her. “Those Sistermen who came in yesterday were gallant,” she said, to change the subject. “If you don’t like Ser Ossifer or Ser Uther, marry one of them instead. I thought the youngest one was very handsome.”</p>\n<p>“The one in the sealskin cloak?” Randa said, incredulous.</p>\n<p>“One of his brothers, then.”</p>\n<p>Myranda rolled her eyes. “They’re from the Sisters. Did you ever know a Sisterman who could joust? They clean their swords with codfish oil and wash in tubs of cold seawater.”</p>\n<p>“Well,” Alayne said, “at least they’re clean.”</p>\n<p>“Some of them have webs between their toes. I’d sooner marry Lord Petyr. Then I’d be your mother. How little is his finger, I ask you?”</p>\n<p>Alayne did not dignify that question with an answer. “Lady Waynwood will be here soon, with her sons.”</p>\n<p>“Is that a promise or a threat?” Myranda said. “The first Lady Waynwood must have been a mare, I think. How else to explain why all the Waynwood men are horse-faced? If I were ever to wed a Waynwood, he would have to swear a vow to don his helm whenever he wished to fuck me, and keep the visor closed.” She gave Alayne a pinch on the arm. “My Harry will be with them, though. I notice that you left him out. I shall never forgive you for stealing him away from me. He’s the boy I want to marry.”</p>\n<p>“The betrothal was my father’s doing,”  Alayne protested, as she had a hundred times before.  She is only teasing, she told herself… but behind the japes, she could hear the hurt.</p>\n<p>Myranda stopped to gaze across the yard at the knights at their practice. “Now there’s the very sort of husband I need.”</p>\n<p>A few feet away, two knights were fighting with blunted practice swords. Their blades crashed together twice, then slipped past each other only to be blocked by upraised shields, but the bigger man gave ground at the impact. Alayne could not see the front of his shield from where she stood, but his attacker bore three ravens in flight, each clutching a red heart in its claws. Three hearts and three ravens.</p>\n<p>She knew right then how the fight would end.</p>\n<p>A few moments later and the big man sprawled dazed in the dust with his helm askew. When his squire undid the fastenings to bare his head, there was blood trickling down his scalp. If the swords had not been blunted, there would be brains as well. That last head blow had been so hard Alayne had winced in sympathy when it fell. Myranda Royce considered the victor thoughtfully.  “Do you think if I asked nicely Ser Lyn would kill my suitors for me?”</p>\n<p>“He might, for a plump bag of gold.” Ser Lyn Corbray was forever desperately short of coin, all the Vale knew that.</p>\n<p>“Alas, all I have is a plump pair of teats. Though with Ser Lyn, a plump sausage under my skirts would serve me better.”</p>\n<p>Alayne’s giggle drew Corbray’s attention. He handed his shield to his loutish squire, removed his helm and quilted coif.  “Ladies.” His long brown hair was plastered to his brow by sweat.</p>\n<p>“Well struck, Ser Lyn,” Alayne called out. “Though I fear you’ve knocked poor Ser Owen insensible.”</p>\n<p>Corbray glanced back to where his foe was being helped from the yard by his squire. “He had no sense to start with, or he should not have tried me.”</p>\n<p>There is truth in that, Alayne thought, but some demon of mischief was in her that morning, so she gave Ser Lyn a thrust of her own. Smiling sweetly, she said, “My lord father tells me your brother’s new wife is with child.”</p>\n<p>Corbray gave her a dark look. “Lyonel sends his regrets. He remains at Heart’s Home with his peddler’s daughter, watching her belly swell as if he were the first man who ever got a wench pregnant.”</p>\n<p>Oh, that’s an open wound, thought Alayne. Lyonel Corbray’s first wife had given him nothing but a frail, sickly babe who died in infancy, and during all those years Ser Lyn had remained his brother’s heir. When the poor woman finally died, however, Petyr Baelish had stepped in and brokered a new marriage for Lord Corbray. The second Lady Corbray was sixteen, the daughter of a wealthy Gulltown merchant, but she had come with an immense dowry, and men said she was a tall, strapping, healthy girl, with big breasts and good, wide hips. And fertile too, it seems.</p>\n<p>“We are all praying that the Mother grants Lady Corbray an easy labor and a healthy child,” said Myranda.</p>\n<p>Alayne could not help herself. She smiled and said, “My father is always pleased to be of service to one of Lord Robert’s leal bannermen. I’m sure he would be most delighted to help broker a marriage for you as well, Ser Lyn.”</p>\n<p>“How kind of him.” Corbray’s lips drew back in something that might have been meant as a smile, though it gave Alayne a chill. “But what need have I for heirs when I am landless and like to remain so, thanks to our Lord Protector?  No.  Tell your lord father I need none of his brood mares.”</p>\n<p>The venom in his voice was so thick that for a moment she almost forgot that Lyn Corbray was actually her father’s catspaw, bought and paid for. Or was he?  Perhaps, instead of being Petyr’s man pretending to be Petyr’s foe, he was actually his foe pretending to be his man pretending to be his foe.</p>\n<p>Just thinking about it was enough to make her head spin. Alayne turned abruptly from the yard… and bumped into a short, sharp-faced man with a brush of orange hair who had come up behind her.  His hand shot out and caught her arm before she could fall.   “My lady.  My pardons if I took you unawares.”</p>\n<p>“The fault was mine. I did not see you standing there.”</p>\n<p>“We mice are quiet creatures.” Ser Shadrich was so short that he might have been taken for a squire, but his face belonged to a much older man. She saw long leagues in the wrinkles at the corner of his mouth, old battles in the scar beneath his ear, and a hardness behind the eyes that no boy would ever have. This was a man grown. Even Randa overtopped him, though.</p>\n<p>“Will you be seeking wings?” the Royce girl said.</p>\n<p>“A mouse with wings would be a silly sight.”</p>\n<p>“Perhaps you will try the melee instead?” Alayne suggested.  The melee was an afterthought, a sop for all the brothers, uncles, fathers, and friends who had accompanied the competitors to the Gates of the Moon to see them win their silver wings, but there would be prizes for the champions, and a chance to win ransoms.</p>\n<p>“A good melee is all a hedge knight can hope for, unless he stumbles on a bag of dragons. And that’s not likely, is it?”</p>\n<p>“I suppose not. But now you must excuse us, ser, we need to find my lord father. “</p>\n<p>Horns sounded from atop the wall.  “Too late,” Myranda said. “They’re here.  We shall need to do the honors by ourselves.”  She grinned.   “Last one to the gate must marry Uther Shett.”</p>\n<p>They made a race of it, dashing headlong across the yard and past the stables, skirts flapping, whilst knights and serving men alike looked on, and pigs and chickens scattered before them. It was most unladylike, but Alayne sound found herself laughing. For just a little while, as she ran, she forget who she was, and where, and found herself remembering bright cold days at Winterfell, when she would race through Winterfell with her friend Jeyne Poole, with Arya running after them trying to keep up.</p>\n<p>By the time they arrived at the gatehouse, both of them were red-faced and panting. Myranda had lost her cloak somewhere along the way. They were just in time. The portcullis had been raised, and a column of riders twenty strong were passing underneath. At their head rode Anya Waynwood, Lady of Ironoaks, stern and slim, her grey-brown hair bound up in a scarf. Her riding cloak was heavy green wool trimmed with brown fur, and clasped at the throat by a niello brooch in the shape of the broken wheel of her House.</p>\n<p>Myranda Royce stepped forward and sketched a curtsy. “Lady Anya. Welcome to the Gates of the Moon.”</p>\n<p>“Lady Myranda. Lady Alayne.” Anya Waynwood inclined her head to each of them in turn. “It is good of you to greet us. Allow me to present my grandson, Ser Roland Waynwood.”  She nodded at the knight who had spoken.  “And this is my youngest son, Ser Wallace Waynwood.  And of course my ward, Ser Harrold Hardyng.”</p>\n<p>Harry the Heir, Alayne thought. My husband-to-be, if he will have me.  A sudden terror filled her.  She wondered if her face was red. Don’t stare at him, she reminded herself, don’t stare, don’t gape, don’t gawk.  Look away. Her hair must be a frightful mess after all that running.  It took all her will to stop herself from trying to tuck the loose strands back into place. Never mind your stupid hair.  Your hair doesn’t matter.  It’s him that matters.  Him, and the Waynwoods.</p>\n<p>Ser Roland was the oldest of the three, though no more than five-and-twenty. He was taller and more muscular than Ser Wallace, but both were long-faced and lantern-jawed, with stringy brown hair and pinched noses.  Horsefaced and homely, Alayne thought.</p>\n<p>Harry, though…</p>\n<p>My Harry.  My lord, my lover, my betrothed.</p>\n<p>Ser Harrold Hardyng looked every inch a lord-in-waiting; clean-limbed and handsome, straight as a lance, hard with muscle. Men old enough to have known Jon Arryn in his youth said Ser Harrold had his look, she knew. He had a mop of sandy blond hair, pale blue eyes, an aquiline nose. Joffrey was comely too, though, she reminded herself.   A comely monster, that’s what he was.  Little Lord Tyrion was kinder, twisted though he was.</p>\n<p>Harry was staring at her. He knows who I am, she realized, and he does not seem pleased to see me. It was only then that she took note of his heraldry. Though his surcoat and horse trappings were patterned in the red-and-white diamonds of House Hardyng, his shield was quartered. The arms of Hardyng and Waynwood were displayed in the first and third quarters, respectively, but in the second and fourth quarters he bore the moon-and-falcon of House Arryn, sky blue and cream. Sweetrobin will not like that.</p>\n<p>Ser Wallace said, “Are we the l-l-last?”</p>\n<p>“You are, sers,” replied Myranda Royce, taking absolutely no notice of his stammer.</p>\n<p>“Wh-wh-when will the t-t-tilts commence?”</p>\n<p>“Oh, soon, I pray,” said Randa. “Some of the competitors have been here for almost a moon’s turn, partaking of my father’s meat and mead. All good fellows, and very brave… but they do eat rather a lot.”</p>\n<p>The Waynwoods laughed, and even Harry the Heir cracked a thin smile. “It was snowing in the passes, else we would have been here sooner,” said Lady Anya.</p>\n<p>“Had we known such beauty awaited us at the Gates, we would have flown,” Ser Roland said.  Though his words were addressed to Myranda Royce, he smiled at Alayne as he said them.</p>\n<p>“To fly you would need wings,” Randa replied, “and there are some knights here who might have a thing to say concerning that.”</p>\n<p>“I look forward to a spirited discussion.” Ser Roland swung down from his horse, turned to Alayne, and smiled.  “I had heard that Lord Littlefinger’s daughter was fair of face and full of grace, but no one ever told me that she was a thief.”</p>\n<p>“You wrong me, ser. I am no thief!”</p>\n<p>Ser Roland placed his hand over his heart. “Then how do you explain this hole in my chest, from where you stole my heart?”</p>\n<p>“He is only t-teasing you, my lady,” stammered Ser Wallace. “My n-n-nephew never had a h-h-heart.”</p>\n<p>“The Waynwood wheel has a broken spoke, and we have my nuncle here.” Ser Roland gave Wallace a whap behind the ear.  “Squires should be quiet when knights are speaking.”</p>\n<p>Ser Wallace reddened.  “I am no more a s-squire, my lady.  My n-nephew knows full well that I was k-k-kni-k-k-kni –“</p>\n<p>“Dubbed?” Alayne suggested gently.</p>\n<p>“Dubbed,” said Wallace Waynwood, gratefully.</p>\n<p>Robb would be his age, if he were still alive, she could not help but think, but Robb died a king, and this is just a boy.</p>\n<p>“My lord father has assigned you rooms in the East Tower,” Lady Myranda was telling Lady Waynwood, “but I fear your knights will need to share a bed. The Gates of the Moon were never meant to house so many noble visitors.”</p>\n<p>“You are in the Falcon Tower, Ser Harrold,” Alayne put in. Far away from Sweetrobin. That was intentional, she knew. Petyr Baelish did not leave such things to chance. “If it please you, I will show you to your chambers myself.” This time her eyes met Harry’s.  She smiled just for him, and said a silent prayer to the Maiden. Please, he doesn’t need to love me, just make him like me, just a little, that would be enough for now.</p>\n<p>Ser Harrold looked down at her coldly. “Why should it please me to be escorted anywhere by Littlefinger’s bastard?”</p>\n<p>All three Waynwoods looked at him askance. “You are a guest here, Harry,” Lady Anya reminded him, in a frosty voice. “See that you remember that.”</p>\n<p>A lady’s armor is her courtesy. Alayne could feel the blood rushing to her face. No tears, she prayed. Please, please, I must not cry. “As you wish, ser. And now if you will excuse me, Littlefinger’s bastard must find her lord father and let him know that you have come, so we can begin the tourney on the morrow.”  And may your horse stumble, Harry the Heir, so you fall on your stupid head in your first tilt. She showed the Waynwoods a stone face as they blurted out awkward apologies for their companion. When they were done she turned and fled.</p>\n<p>Near the keep, she ran headlong into Ser Lothor Brune and almost knocked him off his feet. “Harry the Heir?  Harry the Arse, I say. He’s just some upjumped squire.”</p>\n<p>Alayne was so grateful that she hugged him. “Thank you. Have you seen my father, ser?”</p>\n<p>“Down in the vaults, ” Ser Lothar said, “inspecting Lord Nestor’s granaries with Lord Grafton and Lord Belmore.”</p>\n<p>The vaults were large and dark and filthy. Alayne lit a taper and clutched her skirt as she made the descent. Near the bottom, she heard Lord Grafton’s booming voice, and followed.”The merchants are clamoring to buy, and the lords are clamoring to sell,” the Gulltowner was saying when she found them.  Though not a tall man, Grafton was wide, with thick arms and shoulders.  His hair was a dirty blond mop.  “How am I to stop that, my lord?”</p>\n<p>“Post guardsmen on the docks. If need be, seize the ships. How does not matter, so long as no food leaves the Vale. “</p>\n<p>“These prices, though,”  protested fat Lord Belmore,”  these prices are more than fair.”</p>\n<p>“You say more than fair, my lord.  I say less than we would wish.  Wait.  If need be, buy the food yourself and keep it stored.  Winter is coming.  Prices must go higher.”</p>\n<p>“Perhaps,”  said Belmore, doubtfully.</p>\n<p>“Bronze Yohn will not wait, ”  Grafton complained.  “He need not ship through Gulltown, he has his own ports.  Whilst we are hoarding our harvest, Royce and the other Lords Declarant will turn theirs into silver, you may be sure of that.”</p>\n<p>“Let us hope so,”  said Petyr.  “When their granaries are empty, they will need every scrap of that silver to buy sustenance from us.  And now if you will excuse me, my lord, it would seem my daughter has need of me.”</p>\n<p>“Lady Alayne,” Lord Grafton said. “You look bright-eyed this morning.”</p>\n<p>“You are kind to say so, my lord. Father, I am sorry to disturb you, but I thought you would want to know that the Waynwoods have arrived.”</p>\n<p>“And is Ser Harrold with them?”</p>\n<p>Horrible Ser Harrold.  “ He is.”</p>\n<p>Lord Belmore laughed. “I never thought Royce would let him come. Is he blind, or merely stupid?”</p>\n<p>“He is honorable.  Sometimes it amounts to the same thing.  If he denied the lad the chance to prove himself, it could create a rift between them, so why not let him tilt?  The boy is nowise skilled enough to win a place amongst the Winged Knights.”</p>\n<p>“I suppose not,” said Belmore, grudgingly.  Lord Grafton kissed Alayne on the hand, and the two lords went off, leaving her alone with her lord father.</p>\n<p>“Come,” Petyr said, “walk with me.”  He took her by the arm and led her deeper into the vaults, past an empty dungeon.  “And how was your first meeting with Harry the Heir?”</p>\n<p>“He’s horrible.”</p>\n<p>“The world is full of horrors, sweet.  By now you ought to know that.  You’ve seen enough of them.”</p>\n<p>“Yes,” she said, “but why must he be so cruel?  He called me your bastard.  Right in the yard, in front of everyone.”</p>\n<p>“So far as he knows, that’s who you are.  This betrothal was never his idea, and Bronze Yohn has no doubt warned him against my wiles.  You are my daughter.  He does not trust you, and he believes that you’re beneath him.”</p>\n<p>“Well, I’m not.  He may think he’s some great knight, but Ser Lothor says he’s just some upjumped squire.”</p>\n<p>Petyr put his arm around her.  “So he is, but he is Robert’s heir as well.  Bringing Harry here was the first step in our plan, but now we need to keep him, and only you can do that.  He has a weakness for a pretty face, and whose face is prettier than yours?  Charm him.  Entrance him.  Bewitch him.”</p>\n<p>“I don’t know how,”  she said miserably.</p>\n<p>“Oh, I think you do,” said Littlefinger, with one of those smiles that did not reach his eyes.  “You will be the most beautiful woman in the hall tonight, as lovely as your lady mother at your age.  I cannot seat you on the dais, but you’ll have a place of honor above the salt and underneath a wall sconce.  The fire will be shining in your hair, so everyone will see how fair of face you are.  Keep a good long spoon on hand to beat the squires off, sweetling.  You will not want green boys underfoot when the knights come round to beg you for your favor.”</p>\n<p>“Who would ask to wear a bastard’s favor?”</p>\n<p>“Harry, if he has the wits the gods gave a goose… but do not give it to him.  Choose some other gallant, and favor him instead.  You do not want to seem too eager.”</p>\n<p>“No,” Alayne said.</p>\n<p>“Lady Waynwood will insist that Harry dance with you, I can promise you that much.  That will be your chance. Smile at the boy.  Touch him when you speak.  Tease him, to pique his pride.  If he seems to be responding, tell him that you are feeling faint, and ask him to take you outside for a breath of fresh air.  No knight could refuse such a request from a fair maiden.”</p>\n<p>“Yes,” she said, “but he thinks that I’m a bastard.”</p>\n<p>“A beautiful bastard, and the Lord Protector’s daughter.”  Petyr drew her close and kissed her on both cheeks.  “The night belongs to you, sweetling, Remember that, always.”</p>\n<p>“I’ll try, father,” she said.</p>\n<p>The feast proved to be everything her father promised.</p>\n<p>Sixty-four dishes were served, in honor of the sixty-four competitors who had come so far to contest for silver wings before their lord. From the rivers and the lakes came pike and trout and salmon, from the seas crabs and cod and herring. Ducks there were, and capons, peacocks in their plumage and swans in almond milk. Suckling pigs were served up crackling with apples in their mouths, and three huge aurochs were roasted whole above firepits in the castle yard, since they were too big to get through the kitchen doors. Loaves of hot bread filled the trestle tables in Lord Nestor’s hall, and massive wheels of cheese were brought up from the vaults.  The butter was fresh-churned, and there were leeks and carrots, roasted onions, beets, turnips, parsnips.  And best of all, Lord Nestor’s cooks prepared a splendid subtlety, a lemon cake in the shape of the Giant’s Lance, twelve feet tall and adorned with an Eyrie made of sugar.</p>\n<p>For me, Alayne thought, as they wheeled it out.  Sweetrobin loved lemon cakes too, but only after she told him that they were her favorites.  The cake had required every lemon in the Vale, but Petyr had promised that he would send to Dorne for more.</p>\n<p>There were gifts as well, splendid gifts.  Each of the competitors received a cloak of cloth-of-silver and a lapis brooch in the shape of a pair of falcon’s wings.  Fine steel daggers were given to the brothers, fathers, and friends who had come to watch them tilt.  For their mothers, sisters, and ladies fair there were bolts of silk and Myrish lace.</p>\n<p>“Lord Nestor has an open hand,” Alayne heard Ser Edmund Breakstone say.  “An open hand and a little finger,” Lady Waynwood replied, with a nod toward Petyr Baelish.   Breakstone was not slow to take her meaning.  The true source of this largesse was not Lord Nestor, but the Lord Protector.</p>\n<p>When the last course had been served and cleared, the tables were lifted from their trestles to clear the floor for dancing, and musicians were brought in.</p>\n<p>“Are there no singers?” asked Ben Coldwater.</p>\n<p>“The little lord cannot abide them,” Ser Lymond Lynderly replied.  “Not since Marillion.”</p>\n<p>“Ah… that was the man who murdered Lady Lysa, yes?”</p>\n<p>Alayne spoke up. “His singing pleased her greatly, and she showed him too much favor, perhaps.  When she wed my father he went mad and pushed her out the Moon Door.  Lord Robert has hated singing ever since.  He is still fond of music, though.”</p>\n<p>“As am I,” Coldwater said.  Rising, he offered Alayne his hand.  “Would you honor me with this dance, my lady?”</p>\n<p>“You’re very kind,” she said, as he led her to the floor.</p>\n<p>He was her first partner of the evening, but far from the last.  Just as Petyr had promised, the young knights flocked around her, vying for her favor.  After Ben came Andrew Tollett, handsome Ser Byron, red-nosed Ser Morgarth, and Ser Shadrich the Mad Mouse.  Then Ser Albar Royce, Myranda’s stout dull brother and Lord Nestor’s heir.  She danced with all three Sunderlands, none of whom had webs between their fingers, though she could not vouch for their toes.  Uther Shett appeared to pay her slimy compliments as he trod upon her feet, but Ser Targon the Halfwild proved to be the soul of courtesy.  After that Ser Roland Waynwood swept her up and made her laugh with mocking comments about half the other knights in the hall.  His uncle Wallace took a turn as well and tried to do the same, but the words would not come.  Alayne finally took pity on him and began to chatter happily, to spare him the embarrassment.  When the dance was done she excused herself, and went back to her place to have a drink of wine.</p>\n<p>And there he stood, Harry the Heir himself; tall, handsome, scowling.  “Lady Alayne. May I partner you in this dance?”</p>\n<p>She considered for a moment. “No. I don’t think so.”</p>\n<p>Color rose to his cheeks.  “I was unforgiveably rude to you in the yard.  You must forgive me.”</p>\n<p>“Must?” She tossed her hair, took a sip of wine, made him wait.  “How can you forgive someone who is unforgiveably rude?  Will you explain that to me, ser?”</p>\n<p>Ser Harrold looked confused. “Please.  One dance.”</p>\n<p>Charm him.  Entrance him.  Bewitch him.  “If you insist.”</p>\n<p>He nodded, offered his arm, led her out onto the floor.  As they waited for the music to resume, Alayne glanced at the dais, where Lord Robert sat staring at them.  Please, she prayed, don’t let him start to twitch and shake.  Not here.  Not now.  Maester Coleman would have made certain that he drank a strong dose of sweetmilk before the feast, but even so.</p>\n<p>Then the musicians took up a tune, and she was dancing.</p>\n<p>Say something, she urged herself.  You will never make Ser Harry love you if you don’t have the courage to talk him.  Should she tell him what a good dancer he was?  No, he’s probably heard that a dozen times tonight.  Besides, Petyr said that I should not seem eager.  Instead she said, “I have heard that you are about to be a father.”  It was not something most girls would say to their almost-betrothed, but she wanted to see if Ser Harrold would lie.</p>\n<p>“For the second time. My daughter Alys is two years old.”</p>\n<p>Your bastard daughter Alys, Alayne thought, but what she said was, “That one had a different mother, though.”</p>\n<p>“Yes. Cissy was a pretty thing when I tumbled her, but childbirth left her as fat as a cow, so Lady Anya arranged for her to marry one of her men-at-arms.  It is different with Saffron.”</p>\n<p>“Saffron?”  Alayne tried not to laugh.  “Truly?”</p>\n<p>Ser Harrold had the grace to blush.  “Her father says she is more precious to him than gold.  He’s rich, the richest man in Gulltown.  A fortune in spices.”</p>\n<p>“What will you name the babe?” she asked.  “Cinnamon if she’s a girl?  Cloves if he’s a boy?”</p>\n<p>That almost made him stumble.  “My lady japes.”</p>\n<p>“Oh, no.”  Petyr will howl when I tell him what I said.</p>\n<p>“Saffron is very beautiful, I’ll have you know.  Tall and slim, with big brown eyes and hair like honey.”</p>\n<p>Alayne raised her head.  “More beautiful than me?”</p>\n<p>Ser Harrold studied her face. “You are comely enough, I grant you.  When Lady Anya first told me of this match, I was afraid that you might look like your father.”</p>\n<p>“Little pointy beard and all?”  Alayne laughed.</p>\n<p>“I never meant… “</p>\n<p>“I hope you joust better than you talk.”</p>\n<p>For a moment he looked shocked.  But as the song was ending, he burst into a laugh.  “No one told me you were clever.”</p>\n<p>He has good teeth, she thought, straight and white.  And when he smiles, he has the nicest dimples.  She ran one finger down his cheek.  “Should we ever wed, you’ll have to send Saffron back to her father.  I’ll be all the spice you’ll want.”</p>\n<p>He grinned.  “I will hold you to that promise, my lady.  Until that day, may I wear your favor in the tourney?”</p>\n<p>“You may not.  It is promised to… another.”  She was not sure who as yet, but she knew she would find someone.</p>\n","excerpt":"<h2 id=\"ALAYNE-EXCERPT-FROM-THE-WINDS-OF-WINTER\"><a href=\"#ALAYNE-EXCERPT-FROM-THE-WINDS-OF-WINTER\" class=\"headerlink\" title=\"ALAYNE--EXCERPT FROM THE WINDS OF WINTER\"></a>ALAYNE--EXCERPT FROM THE WINDS OF WINTER</h2><p>She was reading her little lord a tale of the Winged Knight when Mya Stone came knocking on the door of his bedchamber, clad in boots and riding leathers and smelling strongly of the stable. Mya had straw in her hair and a scowl on her face. That scowl comes of having Mychel Redfort near, Alayne knew.</p>\n<p>“Your lordship,” Mya informed Lord Robert, “Lady Waynwood’s banners have been seen an hour down the road. She will be here soon, with your cousin Harry. Will you want to greet them?”</p>\n<p>Why did she have to mention Harry? Alayne thought. We will never get Sweetrobin out of bed now. The boy slapped a pillow. “Send them away. I never asked them here.”<br>","more":"<br>Mya looked nonplussed. No one in the Vale was better at handling a mule, but lordlings were another matter. “They were invited,” she said uncertainly, “for the tourney. I don’t… “</p>\n<p>Alayne closed her book.  “Thank you, Mya. Let me talk with Lord Robert, if you would.”</p>\n<p>Relief plain on her face, Mya fled without another word.</p>\n<p>“I hate that Harry,” Sweetrobin said when she was gone. “He calls me cousin, but he’s just waiting for me to die so he can take the Eyrie. He thinks I don’t know, but I do.”</p>\n<p>“Your lordship should not believe such nonsense,” Alayne said. “I’m sure Ser Harrold loves you well.” And if the gods are good, he will love me too. Her tummy gave a little flutter.</p>\n<p>“He doesn’t,” Lord Robert insisted. “He wants my father’s castle, that’s all, so he pretends.” The boy clutched the blanket to his pimply chest. “I don’t want you to marry him, Alayne. I am the Lord of the Eyrie, and I forbid it.” He sounded as if he were about to cry. “You should marry me instead. We could sleep in the same bed every night, and you could read me stories.”</p>\n<p>No man can wed me so long as my dwarf husband still lives somewhere in this world. Queen Cersei had collected the head of a dozen dwarfs, Petyr claimed, but none were Tyrion’s. “Sweetrobin, you must not say such things. You are the Lord of the Eyrie and Defender of the Vale, and you must wed a highborn lady and father a son to sit in the High Hall of House Arryn after you are gone.”</p>\n<p>Robert wiped his nose. “But I want — “</p>\n<p>She put a finger to his lips. “I know what you want, but it cannot be. I am no fit wife for you. I am bastard born.”</p>\n<p>“I don’t care. I love you best of anyone. “</p>\n<p>You are such a little fool.  “Your lords bannermen will care. Some call my father upjumped and ambitious. If you were to take me to wife, they would say that he made you do it, that it was no will of yours. The Lords Declarant might take arms against him once again, and he and I should both be put to death.”</p>\n<p>“I wouldn’t let them hurt you!” Lord Robert said. “If they try I will make them all fly.” His hand began to tremble.</p>\n<p>Alayne stroked his fingers. “There, my Sweetrobin, be still now.” When the shaking passed, she said, “You must have a proper wife, a trueborn maid of noble birth.”</p>\n<p>“No. I want to marry you, Alayne.”</p>\n<p>Once your lady mother intended that very thing, but I was trueborn then, and noble. “My lord is kind to say so.” Alayne smoothed his hair. Lady Lysa had never let the servants touch it, and after she had died Robert had suffered terrible shaking fits whenever anyone came near him with a blade, so it had been allowed to grow until it tumbled over his round shoulders and halfway down his flabby white chest. He does have pretty hair.  If the gods are good and he lives long enough to wed, his wife will admire his hair, surely.  That much she will love about him. “Any child of ours would be baseborn. Only a trueborn child of House Arryn can displace Ser Harrold as your heir. My father will find a proper wife for you, some highborn girl much prettier than me. You’ll hunt and hawk together, and she’ll give you her favor to wear in tournaments. Before long, you will have forgotten me entirely.”</p>\n<p>“I won’t!”</p>\n<p>“You will. You must.” Her voice was firm, but gentle.</p>\n<p>“The Lord of the Eyrie can do as he likes. Can’t I still love you, even if I have to marry her? Ser Harrold has a common woman. Benjicot says she’s carrying his bastard.”</p>\n<p>Benjicot should learn to keep his fool’s mouth shut. “Is that what you would have from me? A bastard?” She pulled her fingers from his grasp. “Would you dishonor me that way?”</p>\n<p>The boy looked stricken. “No. I never meant — “</p>\n<p>Alayne stood. “If it please my lord, I must go and find my father. Someone needs to greet Lady Waynwood.” Before her little lord could find the words to protest, she gave him a quick curtsy and fled the bedchamber, sweeping down the hall and across a covered bridge to the Lord Protector’s apartments.</p>\n<p>When she had left Petyr Baelish that morning he had been breaking his fast with old Oswell who had arrived last night from Gulltown on a lathered horse. She hoped they might still be talking, but Petyr’s solar proved empty. Someone had left a window open and a stack of papers had blown onto the floor. The sun was slanting through the thick yellow windows, and dust motes danced in the light like tiny golden insects. Though snow had blanketed the heights of the Giant’s Lance above, below the mountain the autumn lingered and winter wheat was ripening in the fields.  Outside the window she could hear the laughter of the washerwomen at the well, the din of steel on steel from the ward where the knights were at their drills. Good sounds.</p>\n<p>Alayne loved it here. She felt alive again, for the first since her father… since Lord Eddard Stark had died.</p>\n<p>She closed the window, gathered up the fallen papers, and stacked them on the table. One was a list of the competitors. Four-and-sixty knights had been invited to vie for places amongst Lord Robert Arryn’s  new Brotherhood of Winged Knights, and four­ and-sixty knights had come to tilt for the right to wear falcon’s wings upon their warhelms and guard their lord.</p>\n<p>The competitors came from all over the Vale, from the mountain valleys and the coast, from Gulltown and the Bloody Gate, even the Three Sisters. Though a few were promised, only three were wed; the eight victors would be expected to spend the next three years at Lord Robert’s side, as his own personal guard (Alayne had suggested seven, like the Kingsguard, but Sweetrobin had insisted that he must have more knights than King Tommen), so older men with wives and children had not been invited.</p>\n<p>And they came, Alayne thought proudly. They all came.</p>\n<p>It had fallen out just as Petyr said it would, the day the ravens flew. “They’re young, eager, hungry for adventure and renown. Lysa would not let them go to war. This is the next best thing. A chance to serve their lord and prove their prowess. They will come. Even Harry the Heir.” He had smoothed her hair and kissed her forehead. “What a clever daughter you are.”</p>\n<p>It was clever. The tourney, the prizes, the winged knights, it had all been her own notion. Lord Robert’s mother had filled him full of fears, but he always took courage from the tales she read him of Ser Artys Arryn, the Winged Knight of legend, founder of his line. Why not surround him with Winged Knights?  She had thought one night, after Sweetrobin had finally drifted off to sleep. His own Kingsguard, to keep him safe and make him brave. And no sooner did she tell Petyr her idea than he went out and made it happen. He will want to be there to greet Ser Harrold. Where could he have gone?</p>\n<p>Alayne swept down the tower stairs to enter the pillared gallery at the back of the Great Hall. Below her, serving men were setting up trestle tables for the evening feast, while their wives and daughters swept up the old rushes and scattered fresh ones. Lord Nestor was showing Lady Waxley his prize tapestries, with their scenes of hunt and chase. The same panels had once hung in the Red Keep of King’s Landing, when Robert sat the Iron Throne. Joffrey had them taken down and they had languished in some cellar until Petyr Baelish arranged for them to be brought to the Vale as a gift for Nestor Royce. Not only were the hangings beautiful, but the High Steward delighted in telling anyone who’d listen that they had once belonged to a king.</p>\n<p>Petyr was not in the Great Hall. Alayne crossed the gallery and descended the stair built into the thick west wall, to come out in the inner ward, where the jousting would be held. Viewing stands had raised for all those who had come to watch, with four long tilting barriers in between. Lord Nestor’s men were painting the barriers with whitewash, draping the stands with bright banners, and hanging shields on the gate the competitors would pass through when they made their entrance.</p>\n<p>At the north end of the yard, three quintains had been set up, and some of the competitors were riding at them. Alayne knew them by their shields; the bells of Belmore, green vipers for the Lynderlys, the red sledge of Breakstone, House Tollett’s black and grey pily. Ser Mychel Redfort set one quintain spinning with a perfectly placed blow. He was one of those favored to win wings.</p>\n<p>Petyr was not at the quintains, nor anywhere in the yard, but as she turned to go a woman’s voice called out. “Alayne!” cried Myranda Royce, from a carved stone bench beneath a beech tree, where she was seated between two men. She looked in need of rescue. Smiling, Alayne walked toward her friend.</p>\n<p>Myranda was wearing a grey woolen dress, a green hooded cloak, and a rather desperate look. On either side of her sat a knight. The one on her right had a grizzled beard, a bald head, and a belly that spilled over his swordbelt where his lap should have been. The one on her left was no more than eighteen, and skinny as a spear. His ginger-colored whiskers only partially served to disguise the angry red pimples that dotted his face.</p>\n<p>The bald knight wore a dark blue surcoat emblazoned with a huge pair of pink lips. The pimply-gingerlad countered with nine white seagulls on a field of brown, which marked him for a Shett of Gulltown. He was staring so intently at Myranda’s breasts that he hardly noticed Alayne until Myranda rose to hug her. “Thank you, thank you, thank you ” Randa whispered in her ear, before she turned to say, “Sers, may I present you the Lady Alayne Stone?”</p>\n<p>“The Lord Protector’s daughter,” the bald knight announced, all hearty gallantry. He rose ponderously. “And full as lovely as the tales told of her, I see.”</p>\n<p>Not to be outdone, the pimply knight hopped up and said,  “Ser Ossifer speaks truly, you are the most beautiful maid in all the Seven Kingdoms.” It might have been a sweeter courtesy had he not addressed it to her chest.</p>\n<p>“And have you seen all those maids yourself, ser?” Alayne asked him. “You are young to be so widely travelled.”</p>\n<p>He blushed, which only made his pimples look angrier.  “No, my lady.   I am from Gulltown.”</p>\n<p>And I am not, though Alayne was born there. She would need to be careful around this one. “I remember Gulltown fondly,” she told him, with a smile as vague as it was pleasant. To Myranda she said, “Do you know where my father’s gotten to, perchance?”</p>\n<p>“Let me take you to him, my lady.”</p>\n<p>“I do hope you will forgive me for depriving you of Lady Myranda’s company,” Alayne told the knights. She did not wait for a reply, but took the older girl arm-in-arm and drew her away from the bench. Only when they were out of earshot did she whisper,  “Do you really know where my father is?”</p>\n<p>“Of course not. Walk faster, my new suitors may be following.” Myranda made a face. “Ossifer Lipps is the dullest knight in the Vale, but Uther Shett aspires to his laurels. I am praying they fight a duel for my hand, and kill each other.”</p>\n<p>Alayne giggled. “Surely Lord Nestor would not seriously entertain a suit from such men.”</p>\n<p>“Oh, he might. My lord father is annoyed with me for killing my last husband and putting him to all this trouble.”</p>\n<p>“It was not your fault he died.”</p>\n<p>“There was no one else in the bed that I recall.”</p>\n<p>Alayne could not help but shutter. Myranda’s husband had died when he was making love with her. “Those Sistermen who came in yesterday were gallant,” she said, to change the subject. “If you don’t like Ser Ossifer or Ser Uther, marry one of them instead. I thought the youngest one was very handsome.”</p>\n<p>“The one in the sealskin cloak?” Randa said, incredulous.</p>\n<p>“One of his brothers, then.”</p>\n<p>Myranda rolled her eyes. “They’re from the Sisters. Did you ever know a Sisterman who could joust? They clean their swords with codfish oil and wash in tubs of cold seawater.”</p>\n<p>“Well,” Alayne said, “at least they’re clean.”</p>\n<p>“Some of them have webs between their toes. I’d sooner marry Lord Petyr. Then I’d be your mother. How little is his finger, I ask you?”</p>\n<p>Alayne did not dignify that question with an answer. “Lady Waynwood will be here soon, with her sons.”</p>\n<p>“Is that a promise or a threat?” Myranda said. “The first Lady Waynwood must have been a mare, I think. How else to explain why all the Waynwood men are horse-faced? If I were ever to wed a Waynwood, he would have to swear a vow to don his helm whenever he wished to fuck me, and keep the visor closed.” She gave Alayne a pinch on the arm. “My Harry will be with them, though. I notice that you left him out. I shall never forgive you for stealing him away from me. He’s the boy I want to marry.”</p>\n<p>“The betrothal was my father’s doing,”  Alayne protested, as she had a hundred times before.  She is only teasing, she told herself… but behind the japes, she could hear the hurt.</p>\n<p>Myranda stopped to gaze across the yard at the knights at their practice. “Now there’s the very sort of husband I need.”</p>\n<p>A few feet away, two knights were fighting with blunted practice swords. Their blades crashed together twice, then slipped past each other only to be blocked by upraised shields, but the bigger man gave ground at the impact. Alayne could not see the front of his shield from where she stood, but his attacker bore three ravens in flight, each clutching a red heart in its claws. Three hearts and three ravens.</p>\n<p>She knew right then how the fight would end.</p>\n<p>A few moments later and the big man sprawled dazed in the dust with his helm askew. When his squire undid the fastenings to bare his head, there was blood trickling down his scalp. If the swords had not been blunted, there would be brains as well. That last head blow had been so hard Alayne had winced in sympathy when it fell. Myranda Royce considered the victor thoughtfully.  “Do you think if I asked nicely Ser Lyn would kill my suitors for me?”</p>\n<p>“He might, for a plump bag of gold.” Ser Lyn Corbray was forever desperately short of coin, all the Vale knew that.</p>\n<p>“Alas, all I have is a plump pair of teats. Though with Ser Lyn, a plump sausage under my skirts would serve me better.”</p>\n<p>Alayne’s giggle drew Corbray’s attention. He handed his shield to his loutish squire, removed his helm and quilted coif.  “Ladies.” His long brown hair was plastered to his brow by sweat.</p>\n<p>“Well struck, Ser Lyn,” Alayne called out. “Though I fear you’ve knocked poor Ser Owen insensible.”</p>\n<p>Corbray glanced back to where his foe was being helped from the yard by his squire. “He had no sense to start with, or he should not have tried me.”</p>\n<p>There is truth in that, Alayne thought, but some demon of mischief was in her that morning, so she gave Ser Lyn a thrust of her own. Smiling sweetly, she said, “My lord father tells me your brother’s new wife is with child.”</p>\n<p>Corbray gave her a dark look. “Lyonel sends his regrets. He remains at Heart’s Home with his peddler’s daughter, watching her belly swell as if he were the first man who ever got a wench pregnant.”</p>\n<p>Oh, that’s an open wound, thought Alayne. Lyonel Corbray’s first wife had given him nothing but a frail, sickly babe who died in infancy, and during all those years Ser Lyn had remained his brother’s heir. When the poor woman finally died, however, Petyr Baelish had stepped in and brokered a new marriage for Lord Corbray. The second Lady Corbray was sixteen, the daughter of a wealthy Gulltown merchant, but she had come with an immense dowry, and men said she was a tall, strapping, healthy girl, with big breasts and good, wide hips. And fertile too, it seems.</p>\n<p>“We are all praying that the Mother grants Lady Corbray an easy labor and a healthy child,” said Myranda.</p>\n<p>Alayne could not help herself. She smiled and said, “My father is always pleased to be of service to one of Lord Robert’s leal bannermen. I’m sure he would be most delighted to help broker a marriage for you as well, Ser Lyn.”</p>\n<p>“How kind of him.” Corbray’s lips drew back in something that might have been meant as a smile, though it gave Alayne a chill. “But what need have I for heirs when I am landless and like to remain so, thanks to our Lord Protector?  No.  Tell your lord father I need none of his brood mares.”</p>\n<p>The venom in his voice was so thick that for a moment she almost forgot that Lyn Corbray was actually her father’s catspaw, bought and paid for. Or was he?  Perhaps, instead of being Petyr’s man pretending to be Petyr’s foe, he was actually his foe pretending to be his man pretending to be his foe.</p>\n<p>Just thinking about it was enough to make her head spin. Alayne turned abruptly from the yard… and bumped into a short, sharp-faced man with a brush of orange hair who had come up behind her.  His hand shot out and caught her arm before she could fall.   “My lady.  My pardons if I took you unawares.”</p>\n<p>“The fault was mine. I did not see you standing there.”</p>\n<p>“We mice are quiet creatures.” Ser Shadrich was so short that he might have been taken for a squire, but his face belonged to a much older man. She saw long leagues in the wrinkles at the corner of his mouth, old battles in the scar beneath his ear, and a hardness behind the eyes that no boy would ever have. This was a man grown. Even Randa overtopped him, though.</p>\n<p>“Will you be seeking wings?” the Royce girl said.</p>\n<p>“A mouse with wings would be a silly sight.”</p>\n<p>“Perhaps you will try the melee instead?” Alayne suggested.  The melee was an afterthought, a sop for all the brothers, uncles, fathers, and friends who had accompanied the competitors to the Gates of the Moon to see them win their silver wings, but there would be prizes for the champions, and a chance to win ransoms.</p>\n<p>“A good melee is all a hedge knight can hope for, unless he stumbles on a bag of dragons. And that’s not likely, is it?”</p>\n<p>“I suppose not. But now you must excuse us, ser, we need to find my lord father. “</p>\n<p>Horns sounded from atop the wall.  “Too late,” Myranda said. “They’re here.  We shall need to do the honors by ourselves.”  She grinned.   “Last one to the gate must marry Uther Shett.”</p>\n<p>They made a race of it, dashing headlong across the yard and past the stables, skirts flapping, whilst knights and serving men alike looked on, and pigs and chickens scattered before them. It was most unladylike, but Alayne sound found herself laughing. For just a little while, as she ran, she forget who she was, and where, and found herself remembering bright cold days at Winterfell, when she would race through Winterfell with her friend Jeyne Poole, with Arya running after them trying to keep up.</p>\n<p>By the time they arrived at the gatehouse, both of them were red-faced and panting. Myranda had lost her cloak somewhere along the way. They were just in time. The portcullis had been raised, and a column of riders twenty strong were passing underneath. At their head rode Anya Waynwood, Lady of Ironoaks, stern and slim, her grey-brown hair bound up in a scarf. Her riding cloak was heavy green wool trimmed with brown fur, and clasped at the throat by a niello brooch in the shape of the broken wheel of her House.</p>\n<p>Myranda Royce stepped forward and sketched a curtsy. “Lady Anya. Welcome to the Gates of the Moon.”</p>\n<p>“Lady Myranda. Lady Alayne.” Anya Waynwood inclined her head to each of them in turn. “It is good of you to greet us. Allow me to present my grandson, Ser Roland Waynwood.”  She nodded at the knight who had spoken.  “And this is my youngest son, Ser Wallace Waynwood.  And of course my ward, Ser Harrold Hardyng.”</p>\n<p>Harry the Heir, Alayne thought. My husband-to-be, if he will have me.  A sudden terror filled her.  She wondered if her face was red. Don’t stare at him, she reminded herself, don’t stare, don’t gape, don’t gawk.  Look away. Her hair must be a frightful mess after all that running.  It took all her will to stop herself from trying to tuck the loose strands back into place. Never mind your stupid hair.  Your hair doesn’t matter.  It’s him that matters.  Him, and the Waynwoods.</p>\n<p>Ser Roland was the oldest of the three, though no more than five-and-twenty. He was taller and more muscular than Ser Wallace, but both were long-faced and lantern-jawed, with stringy brown hair and pinched noses.  Horsefaced and homely, Alayne thought.</p>\n<p>Harry, though…</p>\n<p>My Harry.  My lord, my lover, my betrothed.</p>\n<p>Ser Harrold Hardyng looked every inch a lord-in-waiting; clean-limbed and handsome, straight as a lance, hard with muscle. Men old enough to have known Jon Arryn in his youth said Ser Harrold had his look, she knew. He had a mop of sandy blond hair, pale blue eyes, an aquiline nose. Joffrey was comely too, though, she reminded herself.   A comely monster, that’s what he was.  Little Lord Tyrion was kinder, twisted though he was.</p>\n<p>Harry was staring at her. He knows who I am, she realized, and he does not seem pleased to see me. It was only then that she took note of his heraldry. Though his surcoat and horse trappings were patterned in the red-and-white diamonds of House Hardyng, his shield was quartered. The arms of Hardyng and Waynwood were displayed in the first and third quarters, respectively, but in the second and fourth quarters he bore the moon-and-falcon of House Arryn, sky blue and cream. Sweetrobin will not like that.</p>\n<p>Ser Wallace said, “Are we the l-l-last?”</p>\n<p>“You are, sers,” replied Myranda Royce, taking absolutely no notice of his stammer.</p>\n<p>“Wh-wh-when will the t-t-tilts commence?”</p>\n<p>“Oh, soon, I pray,” said Randa. “Some of the competitors have been here for almost a moon’s turn, partaking of my father’s meat and mead. All good fellows, and very brave… but they do eat rather a lot.”</p>\n<p>The Waynwoods laughed, and even Harry the Heir cracked a thin smile. “It was snowing in the passes, else we would have been here sooner,” said Lady Anya.</p>\n<p>“Had we known such beauty awaited us at the Gates, we would have flown,” Ser Roland said.  Though his words were addressed to Myranda Royce, he smiled at Alayne as he said them.</p>\n<p>“To fly you would need wings,” Randa replied, “and there are some knights here who might have a thing to say concerning that.”</p>\n<p>“I look forward to a spirited discussion.” Ser Roland swung down from his horse, turned to Alayne, and smiled.  “I had heard that Lord Littlefinger’s daughter was fair of face and full of grace, but no one ever told me that she was a thief.”</p>\n<p>“You wrong me, ser. I am no thief!”</p>\n<p>Ser Roland placed his hand over his heart. “Then how do you explain this hole in my chest, from where you stole my heart?”</p>\n<p>“He is only t-teasing you, my lady,” stammered Ser Wallace. “My n-n-nephew never had a h-h-heart.”</p>\n<p>“The Waynwood wheel has a broken spoke, and we have my nuncle here.” Ser Roland gave Wallace a whap behind the ear.  “Squires should be quiet when knights are speaking.”</p>\n<p>Ser Wallace reddened.  “I am no more a s-squire, my lady.  My n-nephew knows full well that I was k-k-kni-k-k-kni –“</p>\n<p>“Dubbed?” Alayne suggested gently.</p>\n<p>“Dubbed,” said Wallace Waynwood, gratefully.</p>\n<p>Robb would be his age, if he were still alive, she could not help but think, but Robb died a king, and this is just a boy.</p>\n<p>“My lord father has assigned you rooms in the East Tower,” Lady Myranda was telling Lady Waynwood, “but I fear your knights will need to share a bed. The Gates of the Moon were never meant to house so many noble visitors.”</p>\n<p>“You are in the Falcon Tower, Ser Harrold,” Alayne put in. Far away from Sweetrobin. That was intentional, she knew. Petyr Baelish did not leave such things to chance. “If it please you, I will show you to your chambers myself.” This time her eyes met Harry’s.  She smiled just for him, and said a silent prayer to the Maiden. Please, he doesn’t need to love me, just make him like me, just a little, that would be enough for now.</p>\n<p>Ser Harrold looked down at her coldly. “Why should it please me to be escorted anywhere by Littlefinger’s bastard?”</p>\n<p>All three Waynwoods looked at him askance. “You are a guest here, Harry,” Lady Anya reminded him, in a frosty voice. “See that you remember that.”</p>\n<p>A lady’s armor is her courtesy. Alayne could feel the blood rushing to her face. No tears, she prayed. Please, please, I must not cry. “As you wish, ser. And now if you will excuse me, Littlefinger’s bastard must find her lord father and let him know that you have come, so we can begin the tourney on the morrow.”  And may your horse stumble, Harry the Heir, so you fall on your stupid head in your first tilt. She showed the Waynwoods a stone face as they blurted out awkward apologies for their companion. When they were done she turned and fled.</p>\n<p>Near the keep, she ran headlong into Ser Lothor Brune and almost knocked him off his feet. “Harry the Heir?  Harry the Arse, I say. He’s just some upjumped squire.”</p>\n<p>Alayne was so grateful that she hugged him. “Thank you. Have you seen my father, ser?”</p>\n<p>“Down in the vaults, ” Ser Lothar said, “inspecting Lord Nestor’s granaries with Lord Grafton and Lord Belmore.”</p>\n<p>The vaults were large and dark and filthy. Alayne lit a taper and clutched her skirt as she made the descent. Near the bottom, she heard Lord Grafton’s booming voice, and followed.”The merchants are clamoring to buy, and the lords are clamoring to sell,” the Gulltowner was saying when she found them.  Though not a tall man, Grafton was wide, with thick arms and shoulders.  His hair was a dirty blond mop.  “How am I to stop that, my lord?”</p>\n<p>“Post guardsmen on the docks. If need be, seize the ships. How does not matter, so long as no food leaves the Vale. “</p>\n<p>“These prices, though,”  protested fat Lord Belmore,”  these prices are more than fair.”</p>\n<p>“You say more than fair, my lord.  I say less than we would wish.  Wait.  If need be, buy the food yourself and keep it stored.  Winter is coming.  Prices must go higher.”</p>\n<p>“Perhaps,”  said Belmore, doubtfully.</p>\n<p>“Bronze Yohn will not wait, ”  Grafton complained.  “He need not ship through Gulltown, he has his own ports.  Whilst we are hoarding our harvest, Royce and the other Lords Declarant will turn theirs into silver, you may be sure of that.”</p>\n<p>“Let us hope so,”  said Petyr.  “When their granaries are empty, they will need every scrap of that silver to buy sustenance from us.  And now if you will excuse me, my lord, it would seem my daughter has need of me.”</p>\n<p>“Lady Alayne,” Lord Grafton said. “You look bright-eyed this morning.”</p>\n<p>“You are kind to say so, my lord. Father, I am sorry to disturb you, but I thought you would want to know that the Waynwoods have arrived.”</p>\n<p>“And is Ser Harrold with them?”</p>\n<p>Horrible Ser Harrold.  “ He is.”</p>\n<p>Lord Belmore laughed. “I never thought Royce would let him come. Is he blind, or merely stupid?”</p>\n<p>“He is honorable.  Sometimes it amounts to the same thing.  If he denied the lad the chance to prove himself, it could create a rift between them, so why not let him tilt?  The boy is nowise skilled enough to win a place amongst the Winged Knights.”</p>\n<p>“I suppose not,” said Belmore, grudgingly.  Lord Grafton kissed Alayne on the hand, and the two lords went off, leaving her alone with her lord father.</p>\n<p>“Come,” Petyr said, “walk with me.”  He took her by the arm and led her deeper into the vaults, past an empty dungeon.  “And how was your first meeting with Harry the Heir?”</p>\n<p>“He’s horrible.”</p>\n<p>“The world is full of horrors, sweet.  By now you ought to know that.  You’ve seen enough of them.”</p>\n<p>“Yes,” she said, “but why must he be so cruel?  He called me your bastard.  Right in the yard, in front of everyone.”</p>\n<p>“So far as he knows, that’s who you are.  This betrothal was never his idea, and Bronze Yohn has no doubt warned him against my wiles.  You are my daughter.  He does not trust you, and he believes that you’re beneath him.”</p>\n<p>“Well, I’m not.  He may think he’s some great knight, but Ser Lothor says he’s just some upjumped squire.”</p>\n<p>Petyr put his arm around her.  “So he is, but he is Robert’s heir as well.  Bringing Harry here was the first step in our plan, but now we need to keep him, and only you can do that.  He has a weakness for a pretty face, and whose face is prettier than yours?  Charm him.  Entrance him.  Bewitch him.”</p>\n<p>“I don’t know how,”  she said miserably.</p>\n<p>“Oh, I think you do,” said Littlefinger, with one of those smiles that did not reach his eyes.  “You will be the most beautiful woman in the hall tonight, as lovely as your lady mother at your age.  I cannot seat you on the dais, but you’ll have a place of honor above the salt and underneath a wall sconce.  The fire will be shining in your hair, so everyone will see how fair of face you are.  Keep a good long spoon on hand to beat the squires off, sweetling.  You will not want green boys underfoot when the knights come round to beg you for your favor.”</p>\n<p>“Who would ask to wear a bastard’s favor?”</p>\n<p>“Harry, if he has the wits the gods gave a goose… but do not give it to him.  Choose some other gallant, and favor him instead.  You do not want to seem too eager.”</p>\n<p>“No,” Alayne said.</p>\n<p>“Lady Waynwood will insist that Harry dance with you, I can promise you that much.  That will be your chance. Smile at the boy.  Touch him when you speak.  Tease him, to pique his pride.  If he seems to be responding, tell him that you are feeling faint, and ask him to take you outside for a breath of fresh air.  No knight could refuse such a request from a fair maiden.”</p>\n<p>“Yes,” she said, “but he thinks that I’m a bastard.”</p>\n<p>“A beautiful bastard, and the Lord Protector’s daughter.”  Petyr drew her close and kissed her on both cheeks.  “The night belongs to you, sweetling, Remember that, always.”</p>\n<p>“I’ll try, father,” she said.</p>\n<p>The feast proved to be everything her father promised.</p>\n<p>Sixty-four dishes were served, in honor of the sixty-four competitors who had come so far to contest for silver wings before their lord. From the rivers and the lakes came pike and trout and salmon, from the seas crabs and cod and herring. Ducks there were, and capons, peacocks in their plumage and swans in almond milk. Suckling pigs were served up crackling with apples in their mouths, and three huge aurochs were roasted whole above firepits in the castle yard, since they were too big to get through the kitchen doors. Loaves of hot bread filled the trestle tables in Lord Nestor’s hall, and massive wheels of cheese were brought up from the vaults.  The butter was fresh-churned, and there were leeks and carrots, roasted onions, beets, turnips, parsnips.  And best of all, Lord Nestor’s cooks prepared a splendid subtlety, a lemon cake in the shape of the Giant’s Lance, twelve feet tall and adorned with an Eyrie made of sugar.</p>\n<p>For me, Alayne thought, as they wheeled it out.  Sweetrobin loved lemon cakes too, but only after she told him that they were her favorites.  The cake had required every lemon in the Vale, but Petyr had promised that he would send to Dorne for more.</p>\n<p>There were gifts as well, splendid gifts.  Each of the competitors received a cloak of cloth-of-silver and a lapis brooch in the shape of a pair of falcon’s wings.  Fine steel daggers were given to the brothers, fathers, and friends who had come to watch them tilt.  For their mothers, sisters, and ladies fair there were bolts of silk and Myrish lace.</p>\n<p>“Lord Nestor has an open hand,” Alayne heard Ser Edmund Breakstone say.  “An open hand and a little finger,” Lady Waynwood replied, with a nod toward Petyr Baelish.   Breakstone was not slow to take her meaning.  The true source of this largesse was not Lord Nestor, but the Lord Protector.</p>\n<p>When the last course had been served and cleared, the tables were lifted from their trestles to clear the floor for dancing, and musicians were brought in.</p>\n<p>“Are there no singers?” asked Ben Coldwater.</p>\n<p>“The little lord cannot abide them,” Ser Lymond Lynderly replied.  “Not since Marillion.”</p>\n<p>“Ah… that was the man who murdered Lady Lysa, yes?”</p>\n<p>Alayne spoke up. “His singing pleased her greatly, and she showed him too much favor, perhaps.  When she wed my father he went mad and pushed her out the Moon Door.  Lord Robert has hated singing ever since.  He is still fond of music, though.”</p>\n<p>“As am I,” Coldwater said.  Rising, he offered Alayne his hand.  “Would you honor me with this dance, my lady?”</p>\n<p>“You’re very kind,” she said, as he led her to the floor.</p>\n<p>He was her first partner of the evening, but far from the last.  Just as Petyr had promised, the young knights flocked around her, vying for her favor.  After Ben came Andrew Tollett, handsome Ser Byron, red-nosed Ser Morgarth, and Ser Shadrich the Mad Mouse.  Then Ser Albar Royce, Myranda’s stout dull brother and Lord Nestor’s heir.  She danced with all three Sunderlands, none of whom had webs between their fingers, though she could not vouch for their toes.  Uther Shett appeared to pay her slimy compliments as he trod upon her feet, but Ser Targon the Halfwild proved to be the soul of courtesy.  After that Ser Roland Waynwood swept her up and made her laugh with mocking comments about half the other knights in the hall.  His uncle Wallace took a turn as well and tried to do the same, but the words would not come.  Alayne finally took pity on him and began to chatter happily, to spare him the embarrassment.  When the dance was done she excused herself, and went back to her place to have a drink of wine.</p>\n<p>And there he stood, Harry the Heir himself; tall, handsome, scowling.  “Lady Alayne. May I partner you in this dance?”</p>\n<p>She considered for a moment. “No. I don’t think so.”</p>\n<p>Color rose to his cheeks.  “I was unforgiveably rude to you in the yard.  You must forgive me.”</p>\n<p>“Must?” She tossed her hair, took a sip of wine, made him wait.  “How can you forgive someone who is unforgiveably rude?  Will you explain that to me, ser?”</p>\n<p>Ser Harrold looked confused. “Please.  One dance.”</p>\n<p>Charm him.  Entrance him.  Bewitch him.  “If you insist.”</p>\n<p>He nodded, offered his arm, led her out onto the floor.  As they waited for the music to resume, Alayne glanced at the dais, where Lord Robert sat staring at them.  Please, she prayed, don’t let him start to twitch and shake.  Not here.  Not now.  Maester Coleman would have made certain that he drank a strong dose of sweetmilk before the feast, but even so.</p>\n<p>Then the musicians took up a tune, and she was dancing.</p>\n<p>Say something, she urged herself.  You will never make Ser Harry love you if you don’t have the courage to talk him.  Should she tell him what a good dancer he was?  No, he’s probably heard that a dozen times tonight.  Besides, Petyr said that I should not seem eager.  Instead she said, “I have heard that you are about to be a father.”  It was not something most girls would say to their almost-betrothed, but she wanted to see if Ser Harrold would lie.</p>\n<p>“For the second time. My daughter Alys is two years old.”</p>\n<p>Your bastard daughter Alys, Alayne thought, but what she said was, “That one had a different mother, though.”</p>\n<p>“Yes. Cissy was a pretty thing when I tumbled her, but childbirth left her as fat as a cow, so Lady Anya arranged for her to marry one of her men-at-arms.  It is different with Saffron.”</p>\n<p>“Saffron?”  Alayne tried not to laugh.  “Truly?”</p>\n<p>Ser Harrold had the grace to blush.  “Her father says she is more precious to him than gold.  He’s rich, the richest man in Gulltown.  A fortune in spices.”</p>\n<p>“What will you name the babe?” she asked.  “Cinnamon if she’s a girl?  Cloves if he’s a boy?”</p>\n<p>That almost made him stumble.  “My lady japes.”</p>\n<p>“Oh, no.”  Petyr will howl when I tell him what I said.</p>\n<p>“Saffron is very beautiful, I’ll have you know.  Tall and slim, with big brown eyes and hair like honey.”</p>\n<p>Alayne raised her head.  “More beautiful than me?”</p>\n<p>Ser Harrold studied her face. “You are comely enough, I grant you.  When Lady Anya first told me of this match, I was afraid that you might look like your father.”</p>\n<p>“Little pointy beard and all?”  Alayne laughed.</p>\n<p>“I never meant… “</p>\n<p>“I hope you joust better than you talk.”</p>\n<p>For a moment he looked shocked.  But as the song was ending, he burst into a laugh.  “No one told me you were clever.”</p>\n<p>He has good teeth, she thought, straight and white.  And when he smiles, he has the nicest dimples.  She ran one finger down his cheek.  “Should we ever wed, you’ll have to send Saffron back to her father.  I’ll be all the spice you’ll want.”</p>\n<p>He grinned.  “I will hold you to that promise, my lady.  Until that day, may I wear your favor in the tourney?”</p>\n<p>“You may not.  It is promised to… another.”  She was not sure who as yet, but she knew she would find someone.</p>"},{"title":"关于错误INSTALL_FAILED_NO_MATCHING_ABIS","date":"2016-06-02T12:44:09.000Z","comments":1,"_content":"故事的起因就是因为在往genymotion安装的应用的时候，出现了`INSTALL_FAILED_NO_MATCHING_ABIS`。\n![错误](http://img.blog.csdn.net/20160428170835800)\n\n<!--more-->\n\n因为android平台的多样性，针对不同的CPU架构于是就有了[**ABI**](http://developer.android.com/ndk/guides/abis.html)（Application Binary Interface,）。\n\n目前android支持的ABI有：`armeabi`、`armeabi-v7a`、`arm64-v8a`、`x86`、`x86_64`、`mips`、`mips64`。\n\n在打包的时候可以使用[`Splits`](http://tools.android.com/tech-docs/new-build-system/user-guide/apk-splits)生成不同架构的apk。在`build.gradle`配置的方法就是：\n```gradle\nandroid {\n  ...\n  splits {\n    abi {\n      enable true\n      reset()\n      include 'armeabi','armeabi-v7a','arm64-v8a','x86','x86_64','mips','mips64'\n      universalApk true\n    }\n  }\n}\n```\n效果就是：\n![这里写图片描述](http://img.blog.csdn.net/20160428170922441)\n\n通过这种方法就可以针对不同的CPU架构来分开打包了。\n\n使用[`Splits`](http://tools.android.com/tech-docs/new-build-system/user-guide/apk-splits) 还可以针对不同的分辨率来打包：\n```gradle\nandroid {\n  ...\n  splits {\n    density {\n      enable true\n      exclude \"ldpi\", \"tvdpi\", \"xxxhdpi\"\n      compatibleScreens 'small', 'normal', 'large', 'xlarge'\n    }\n  }\n```\n\n因为都是一些学习总结的文章，还是贴一篇其他人写的不错的文章来参考：\n1. <http://blog.chengyunfeng.com/?p=889&utm_source=tuicool&utm_medium=referral>\n2.  <http://www.jianshu.com/p/cb05698a1968>\n","source":"_posts/INSTALL-FAILED-NO-MATCHING-ABIS.md","raw":"---\ntitle: 关于错误INSTALL_FAILED_NO_MATCHING_ABIS\ndate: 2016-06-02 20:44:09\ntags: android\ncomments: true\n---\n故事的起因就是因为在往genymotion安装的应用的时候，出现了`INSTALL_FAILED_NO_MATCHING_ABIS`。\n![错误](http://img.blog.csdn.net/20160428170835800)\n\n<!--more-->\n\n因为android平台的多样性，针对不同的CPU架构于是就有了[**ABI**](http://developer.android.com/ndk/guides/abis.html)（Application Binary Interface,）。\n\n目前android支持的ABI有：`armeabi`、`armeabi-v7a`、`arm64-v8a`、`x86`、`x86_64`、`mips`、`mips64`。\n\n在打包的时候可以使用[`Splits`](http://tools.android.com/tech-docs/new-build-system/user-guide/apk-splits)生成不同架构的apk。在`build.gradle`配置的方法就是：\n```gradle\nandroid {\n  ...\n  splits {\n    abi {\n      enable true\n      reset()\n      include 'armeabi','armeabi-v7a','arm64-v8a','x86','x86_64','mips','mips64'\n      universalApk true\n    }\n  }\n}\n```\n效果就是：\n![这里写图片描述](http://img.blog.csdn.net/20160428170922441)\n\n通过这种方法就可以针对不同的CPU架构来分开打包了。\n\n使用[`Splits`](http://tools.android.com/tech-docs/new-build-system/user-guide/apk-splits) 还可以针对不同的分辨率来打包：\n```gradle\nandroid {\n  ...\n  splits {\n    density {\n      enable true\n      exclude \"ldpi\", \"tvdpi\", \"xxxhdpi\"\n      compatibleScreens 'small', 'normal', 'large', 'xlarge'\n    }\n  }\n```\n\n因为都是一些学习总结的文章，还是贴一篇其他人写的不错的文章来参考：\n1. <http://blog.chengyunfeng.com/?p=889&utm_source=tuicool&utm_medium=referral>\n2.  <http://www.jianshu.com/p/cb05698a1968>\n","slug":"INSTALL-FAILED-NO-MATCHING-ABIS","published":1,"updated":"2016-08-24T15:50:44.286Z","layout":"post","photos":[],"link":"","_id":"cis92vea80002h8dqtnwhjkla","content":"<p>故事的起因就是因为在往genymotion安装的应用的时候，出现了<code>INSTALL_FAILED_NO_MATCHING_ABIS</code>。<br><img src=\"http://img.blog.csdn.net/20160428170835800\" alt=\"错误\"></p>\n<a id=\"more\"></a>\n<p>因为android平台的多样性，针对不同的CPU架构于是就有了<a href=\"http://developer.android.com/ndk/guides/abis.html\" target=\"_blank\" rel=\"external\"><strong>ABI</strong></a>（Application Binary Interface,）。</p>\n<p>目前android支持的ABI有：<code>armeabi</code>、<code>armeabi-v7a</code>、<code>arm64-v8a</code>、<code>x86</code>、<code>x86_64</code>、<code>mips</code>、<code>mips64</code>。</p>\n<p>在打包的时候可以使用<a href=\"http://tools.android.com/tech-docs/new-build-system/user-guide/apk-splits\" target=\"_blank\" rel=\"external\"><code>Splits</code></a>生成不同架构的apk。在<code>build.gradle</code>配置的方法就是：<br><figure class=\"highlight gradle\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">android &#123;</span><br><span class=\"line\">  ...</span><br><span class=\"line\">  splits &#123;</span><br><span class=\"line\">    abi &#123;</span><br><span class=\"line\">      enable <span class=\"keyword\">true</span></span><br><span class=\"line\">      reset()</span><br><span class=\"line\">      <span class=\"keyword\">include</span> <span class=\"string\">'armeabi'</span>,<span class=\"string\">'armeabi-v7a'</span>,<span class=\"string\">'arm64-v8a'</span>,<span class=\"string\">'x86'</span>,<span class=\"string\">'x86_64'</span>,<span class=\"string\">'mips'</span>,<span class=\"string\">'mips64'</span></span><br><span class=\"line\">      universalApk <span class=\"keyword\">true</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>效果就是：<br><img src=\"http://img.blog.csdn.net/20160428170922441\" alt=\"这里写图片描述\"></p>\n<p>通过这种方法就可以针对不同的CPU架构来分开打包了。</p>\n<p>使用<a href=\"http://tools.android.com/tech-docs/new-build-system/user-guide/apk-splits\" target=\"_blank\" rel=\"external\"><code>Splits</code></a> 还可以针对不同的分辨率来打包：<br><figure class=\"highlight gradle\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">android &#123;</span><br><span class=\"line\">  ...</span><br><span class=\"line\">  splits &#123;</span><br><span class=\"line\">    density &#123;</span><br><span class=\"line\">      enable <span class=\"keyword\">true</span></span><br><span class=\"line\">      <span class=\"keyword\">exclude</span> <span class=\"string\">\"ldpi\"</span>, <span class=\"string\">\"tvdpi\"</span>, <span class=\"string\">\"xxxhdpi\"</span></span><br><span class=\"line\">      compatibleScreens <span class=\"string\">'small'</span>, <span class=\"string\">'normal'</span>, <span class=\"string\">'large'</span>, <span class=\"string\">'xlarge'</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br></pre></td></tr></table></figure></p>\n<p>因为都是一些学习总结的文章，还是贴一篇其他人写的不错的文章来参考：</p>\n<ol>\n<li><a href=\"http://blog.chengyunfeng.com/?p=889&amp;utm_source=tuicool&amp;utm_medium=referral\" target=\"_blank\" rel=\"external\">http://blog.chengyunfeng.com/?p=889&amp;utm_source=tuicool&amp;utm_medium=referral</a></li>\n<li><a href=\"http://www.jianshu.com/p/cb05698a1968\" target=\"_blank\" rel=\"external\">http://www.jianshu.com/p/cb05698a1968</a></li>\n</ol>\n","excerpt":"<p>故事的起因就是因为在往genymotion安装的应用的时候，出现了<code>INSTALL_FAILED_NO_MATCHING_ABIS</code>。<br><img src=\"http://img.blog.csdn.net/20160428170835800\" alt=\"错误\"></p>","more":"<p>因为android平台的多样性，针对不同的CPU架构于是就有了<a href=\"http://developer.android.com/ndk/guides/abis.html\"><strong>ABI</strong></a>（Application Binary Interface,）。</p>\n<p>目前android支持的ABI有：<code>armeabi</code>、<code>armeabi-v7a</code>、<code>arm64-v8a</code>、<code>x86</code>、<code>x86_64</code>、<code>mips</code>、<code>mips64</code>。</p>\n<p>在打包的时候可以使用<a href=\"http://tools.android.com/tech-docs/new-build-system/user-guide/apk-splits\"><code>Splits</code></a>生成不同架构的apk。在<code>build.gradle</code>配置的方法就是：<br><figure class=\"highlight gradle\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">android &#123;</span><br><span class=\"line\">  ...</span><br><span class=\"line\">  splits &#123;</span><br><span class=\"line\">    abi &#123;</span><br><span class=\"line\">      enable <span class=\"keyword\">true</span></span><br><span class=\"line\">      reset()</span><br><span class=\"line\">      <span class=\"keyword\">include</span> <span class=\"string\">'armeabi'</span>,<span class=\"string\">'armeabi-v7a'</span>,<span class=\"string\">'arm64-v8a'</span>,<span class=\"string\">'x86'</span>,<span class=\"string\">'x86_64'</span>,<span class=\"string\">'mips'</span>,<span class=\"string\">'mips64'</span></span><br><span class=\"line\">      universalApk <span class=\"keyword\">true</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>效果就是：<br><img src=\"http://img.blog.csdn.net/20160428170922441\" alt=\"这里写图片描述\"></p>\n<p>通过这种方法就可以针对不同的CPU架构来分开打包了。</p>\n<p>使用<a href=\"http://tools.android.com/tech-docs/new-build-system/user-guide/apk-splits\"><code>Splits</code></a> 还可以针对不同的分辨率来打包：<br><figure class=\"highlight gradle\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">android &#123;</span><br><span class=\"line\">  ...</span><br><span class=\"line\">  splits &#123;</span><br><span class=\"line\">    density &#123;</span><br><span class=\"line\">      enable <span class=\"keyword\">true</span></span><br><span class=\"line\">      <span class=\"keyword\">exclude</span> <span class=\"string\">\"ldpi\"</span>, <span class=\"string\">\"tvdpi\"</span>, <span class=\"string\">\"xxxhdpi\"</span></span><br><span class=\"line\">      compatibleScreens <span class=\"string\">'small'</span>, <span class=\"string\">'normal'</span>, <span class=\"string\">'large'</span>, <span class=\"string\">'xlarge'</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br></pre></td></tr></table></figure></p>\n<p>因为都是一些学习总结的文章，还是贴一篇其他人写的不错的文章来参考：</p>\n<ol>\n<li><a href=\"http://blog.chengyunfeng.com/?p=889&amp;utm_source=tuicool&amp;utm_medium=referral\">http://blog.chengyunfeng.com/?p=889&amp;utm_source=tuicool&amp;utm_medium=referral</a></li>\n<li><a href=\"http://www.jianshu.com/p/cb05698a1968\">http://www.jianshu.com/p/cb05698a1968</a></li>\n</ol>"},{"title":"MERCY","date":"2016-04-06T12:51:57.000Z","comments":1,"_content":"\n## MERCYE\\--EXCERPT FROM THE WINDS OF WINTER\n\nShe woke with a gasp, not knowing who she was, or where.\n\nThe smell of blood was heavy in her nostrils… or was that her nightmare, lingering? She had dreamed of wolves again, of running through some dark pine forest with a great pack at her hells, hard on the scent of prey.\n\nHalf-light filled the room, grey and gloomy. Shivering, she sat up in bed and ran a hand across her scalp. Stubble bristled against her palm. I need to shave before Izembaro sees. Mercy, I’m Mercy, and tonight I’ll be raped and murdered. Her true name was Mercedene, but Mercy was all anyone ever called her…\n<!--more-->\nExcept in dreams. She took a breath to quiet the howling in her heart, trying to remember more of what she’d dreamt, but most of it had gone already. There had been blood in it, though, and a full moon overhead, and a tree that watched her as she ran.\n\nShe had fastened the shutters back so the morning sun might wake her. But there was no sun outside the window of Mercy’s little room, only a wall of shifting grey fog. The air had grown chilly… and a good thing, else she might have slept all day. It would be just like Mercy to sleep through her own rape.\n\nGooseprickles covered her legs. Her coverlet had twisted around her like a snake. She unwound it, threw the blanket to the bare plank floor and padded naked to the window. Braavos was lost in fog. She could see the green water of the little canal below, the cobbled stone street that ran beneath her building, two arches of the mossy bridge… but the far end of the bridge vanished in greyness, and of the buildings across the canal only a few vague lights remained. She heard a soft splash as a serpent boat emerged beneath the bridge’s central arch. “What hour?” Mercy called down to the man who stood by the snake’s uplifted tail, pushing her onward with his pole.\n\nThe waterman gazed up, searching for the voice. “Four, by the Titan’s roar.” His words echoed hollowly off the swirling green waters and the walls of unseen buildings.\n\nShe was not late, not yet, but she should not dawdle. Mercy was a happy soul and a hard worker, but seldom timely. That would not serve tonight. The envoy from Westeros was expected at the Gate this evening, and Izembaro would be in no mood to hear excuses, even if she served them up with a sweet smile.\n\nShe had filled her basin from the canal last night before she went to sleep, preferring the brackish water to the slimy green rainwater stewing in the cistern out back. Dipping a rough cloth, she washed herself head to heel, standing on one leg at a time to scrub her calloused feet. After that she found her razor. A bare scalp helped the wigs fit better, Izembaro claimed.\n\nShe shaved, donned her smallclothes, and slipped a shapeless brown wool dress down over her head. One of her stockings needed mending, she saw as she pulled it up. She would ask the Snapper for help; her own sewing was so wretched that the wardrobe mistress usually took pity on her. Else I could filtch a nicer pair from wardrobe. That was risky, though. Izembaro hated it when the mummers wore his costumes in the streets.Except for Wendeyne. Give Izembaro’s cock a little suck and a girl can wear any costume that she wants. Mercy was not so foolish as all that. Daena had warned her. “Girls who start down that road wind up on the Ship, where every man in the pit knows he can have any pretty thing he might see up on the stage, if his purse is plump enough.”\n\nHer boots were lumps of old brown leather mottled with saltstains and cracked from long wear, her belt a length of hempen rope dyed blue. She knotted it about her waist, and hung a knife on her right hip and a coin pouch on her left. Last of all she threw her cloak across her shoulders. It was a real mummer’s cloak, purple wool lined in red silk, with a hood to keep the rain off, and three secret pockets too. She’d hid some coins in one of those, an iron key in another, a blade in the last. A real blade, not a fruit knife like the one on her hip, but it did not belong to Mercy, no more than her other treasures did. The fruit knife belonged to Mercy. She was made for eating fruit, for smiling and joking, for working hard and doing as she was told.\n\n“Mercy, Mercy, Mercy,” she sang as she descended the wooden stair to the street. The handrail was splintery, the steps steep, and there were five flights, but that was why she’d gotten the room so cheap. That, and Mercy’s smile. She might be bald and skinny, but Mercy had a pretty smile, and a certain grace. Even Izembaro agreed that she was graceful. She was not far from the Gate as the crows flies, but for girls with feet instead of wings the way was longer. Braavos was a crooked city. The streets were crooked, the alleys were crookeder, and the canals were crookedest of all. Most days she preferred to go the long way, down the Ragman’s Road along the Outer Harbor, where she had the sea before her and the sky above, and a clear view across the Great Lagoon to the Arsenal and the piney slopes of Sellagoro’s Shield. Sailors would hail her as she passed the docks, calling down from the decks of tarry Ibbenese whalers and big-bellied Westerosi cogs. Mercy could not always understand their words, but she knew what they were saying. Sometimes she would smile back and tell them they could find her at the Gate if they had the coin.\n\nThe long way also took her across the Bridge of Eyes with its carved stone faces. From the top of its span, she could look through the arches and see all the city: the green copper domes of the Hall of Truth, the masts rising like a forest from the Purple Harbor, the tall towers of the mighty, the golden thunderbolt turning on its spire atop the Sealord’s Palace… even the Titan’s bronze shoulders, off across the dark green waters. But that was only when the sun was shining down on Braavos. If the fog was thick there was nothing to see but grey, so today Mercy chose the shorter route to save some wear on her poor cracked boots.\n\nThe mists seemed to part before her and close up again as she passed. The cobblestones were wet and slick under her feet. She heard a cat yowl plaintively. Braavos was a good city for cats, and they roamed everywhere, especially at night. In the fog all cats are grey, Mercy thought. In the fog all men are killers.\n\nShe had never seen a thicker fog than this one. On the larger canals, the watermen would be running their serpent boats into one another, unable to make out any more than dim lights from the buildings to either side of them.\n\nMercy passed an old man with a lantern walking the other way, and envied him his light. The street was so gloomy she could scarcely see where she was stepping. In the humbler parts of the city, the houses, shops, and warehouses crowded together, leaning on each other like drunken lovers, their upper stories so close that you could step from one balcony to the next. The streets below became dark tunnels where every footfall echoed. The small canals were even more hazardous, since many of the houses that lined them had privies jutting out over the water. Izembaro loved to give the Sealord’s speech fromThe Merchant’s Melancholy Daughter, about how “here the last Titan yet stands, astride the stony shoulders of his brothers,” but Mercy preferred the scene where the fat merchant shat on the Sealord’s head as he passed underneath in his gold-and-purple barge. Only in Braavos could something like that happen, it was said, and only in Braavos would Sealord and sailor alike howl with laughter to see it.\n\nThe Gate stood close by the edge of Drowned Town, between the Outer Harbor and the Purple Harbor. An old warehouse had burnt there and the ground was sinking a little more each year, so the land came cheap. Atop the flooded stone foundation of the warehouse, Izembaro raised his cavernous playhall. The Dome and the Blue Lantern might enjoy more fashionable environs, he told his mummers, but here between the harbors they would never lack for sailors and whores to fill their pit. The Ship was close by, still pulling handsome crowds to the quay where she had been moored for twenty years, he said, and the Gate would flourish too.\n\nTime had proved him right. The Gate’s stage had developed a tilt as the building settled, their costumes were prone to mildew, and water snakes nested in the flooded cellar, but none of that troubled the mummers so long as the house was full.\n\nThe last bridge was made of rope and raw planks, and seemed to dissolve into nothingness, but that was only the fog. Mercy scampered across, her heels ringing on the wood. The fog opened before her like a tattered grey curtain to reveal the playhouse. Buttery yellow light spilled from the doors, and Mercy could hear voices from within. Beside the entrance, Big Brusco had painted over the title of the last show, and writtenThe Bloody Hand in its place in huge red letters. He was painting a bloody hand beneath the words, for those who could not read. Mercy stopped to have a look. “That’s a nice hand,” she told him.\n\n“Thumb’s crooked.” Brusco dabbed at it with his brush. “King o’ the Mummers been asking after you.”\n\n“It was so dark I slept and slept.” When Izembaro had first dubbed himself the King of the Mummers, the company had taken a wicked pleasure in it, savoring the outrage of their rivals from the Dome and the Blue Lantern. Of late, though, Izembaro had begun to take his title too seriously. “He will only play kings now,” Marro said, rolling his eyes, “and if the play has no king in it, he would sooner not stage it at all.”\n\nThe Bloody Hand offered two kings, the fat one and the boy. Izembaro would play the fat one. It was not a large part, but he had a fine speech as he lay dying, and a splendid fight with a demonic boar before that. Phario Forel had written it, and he had the bloodiest quill of all of Braavos.\n\nMercy found the company assembled behind the stage, and slipped in between Daena and the Snapper at the back, hoping her late arrival would go unnoticed. Izembaro was telling everyone that he expected the Gate to be packed to the rafters this evening, despite the fog. “The King of Westeros is sending his envoy to do homage to the King of the Mummers tonight,” he told his troupe. “We will not disappoint our fellow monarch.”\n\n“We?” said the Snapper, who did all the costumes for the mummers. “Is there more than one of him, now?”\n\n“He’s fat enough to count for two,” whispered Bobono. Every mummer’s troupe had to have a dwarf. He was theirs. When he saw Mercy, he gave her a leer. “Oho,” he said, “there she is. Is the little girl all ready for her rape?” He smacked his lips.\n\nThe Snapper smacked him in the head. “Be quiet.”\n\nThe King of the Mummers ignored the brief commotion. He was still talking, telling the mummers how magnificent they must be. Besides the Westerosi envoy, there would be keyholders in the crowd this evening, and famous courtesans as well. He did not intend for them to leave with a poor opinion of the Gate. “It shall go ill for any man who fails me,” he promised, a threat he borrowed from the speech Prince Garin gives on the eve of battle in Wroth of the Dragonlords, Phario Forel’s first play.\n\nBy the time Izembaro finally finished speaking, less than an hour remained before the show, and the mummers were all frantic and fretful by turns. The Gate rang to the sound of Mercy’s name.\n\n“Mercy,” her friend Daena implored, “Lady Stork has stepped on the hem of her gown again. Come help me sew it up.”\n\n“Mercy,” the Stranger called, “bring the bloody paste, my horn is coming loose.”\n\n“Mercy,” boomed Izembaro the Great himself, “what have you done with my crown, girl? I cannot make my entrance without my crown. How shall they know that I’m a king?”\n\n“Mercy,” squeaked the dwarf Bobono, “Mercy, something’s amiss with my laces, my cock keeps flopping out.”\n\nShe fetched the sticky paste and fastened the Stranger’s left horn back onto his forehead. She found Izembaro’s crown in the privy where he always left it and helped him pin it to his wig, and then ran for needle and thread so the Snapper could sew the lace hem back onto the cloth-of-gold gown that the queen would wear in the wedding scene.\n\nAnd Bobono’s cock was indeed flopping out. It was made to flop out, for the rape. What a hideous thing, Mercy thought as she knelt before the dwarf to fix him. The cock was a foot long and as thick as her arm, big enough to be seen from the highest balcony. The dyer had done a poor job with the leather, though; the thing was a mottled pink and white, with a bulbous head the color of a plum. Mercy pushed it back into Bobono’s breeches and laced him back up. “Mercy,” he sang as she tied him tight, “Mercy, Mercy, come to my room tonight and make a man of me.”\n\n“I’ll make a eunuch of you if you keep unlacing yourself just so I’ll fiddle with your crotch.”\n\n“We were meant to be together, Mercy,” Bobono insisted. “Look, we’re just the same height.”\n\n“Only when I’m on my knees. Do you remember your first line?” It had only been a fortnight since the dwarf had lurched onto stage in his cups and opened The Anguish of the Archon with the grumpkin’s speech from The Merchant’s Lusty Lady. Izembaro would skin him alive if he made such a blunder again, and never mind how hard it was to find a good dwarf.\n\n“What are we playing, Mercy?” Bobono asked innocently.\n\nHe is teasing me, Mercy thought. He’s not drunk tonight, he knows the show perfectly well. “We are doing Phario’s new Bloody Hand, in honor of the envoy from the Seven Kingdoms.”\n\n“Now I recall.” Bobono lowered his voice to a sinister croak. “The seven-faced god has cheated me,” he said. “My noble sire he made of purest gold, and gold he made my siblings, boy and girl. But I am formed of darker stuff, of bones and blood and clay, twisted into this rude shape you see before you.” With that, he grabbed at her chest, fumbling for a nipple. “You have no titties. How can I rape a girl with no titties?”\n\nShe caught his nose between her thumb and forefinger and twisted. “You’ll have no nose until you get your hands off me.”\n\n“Owwwww,” the dwarf squealed, releasing her.\n\n“I’ll grow titties in a year or two.” Mercy rose, to tower over the little man. “But you’ll never grow another nose. You think of that, before you touch me there.”\n\nBobono rubbed his tender nose. “There’s no need to get so shy. I’ll be raping you soon enough.”\n\n“Not until the second act.”\n\n“I always give Wendeyne’s titties a nice squeeze when I rape her in The Anguish of the Archon,” the dwarf complained. “She likes it, and the pit does too. You have to please the pit.”\n\nThat was one of Izembaro’s “wisdoms,” as he liked to call them. You have to please the pit. “I bet it would please the pit if I ripped off the dwarf’s cock and beat him about the head with it,” Mercy replied. “That’s something they won’t have seen before.” Always give them something they haven’t seen before was another of Izembaro’s “wisdoms,” and one that Bobono had no easy answer for. “There, you’re done,” Mercy announced. “Now see if you can keep in your breeches till it’s needed.”\n\nIzembaro was calling for her again. Now he could not find his boar spear. Mercy found it for him, helped Big Brusco don his boar suit, checked the trick daggers just to make certain no one had replaced one with a real blade (someone had done that at the Dome once, and a mummer had died), and poured Lady Stork the little nip of wine she liked to have before each play. When all the cries of “Mercy, Mercy, Mercy” finally died away, she stole a moment for a quick peek out into the house.\n\nThe pit was as full as ever she’d seen it, and they were enjoying themselves already, joking and jostling, eating and drinking. She saw a peddler selling chunks of cheese, ripping them off the wheel with his fingers whenever he found a buyer. A woman had a bag of wrinkled apples. Skins of wine were being passed from hand to hand, some girls were selling kisses, and one sailor was playing the sea pipes. The sad-eyed little man called Quill stood in the back, come to see what he could steal for one of his own plays. Cossomo the Conjurer had come as well, and on his arm was Yna, the one-eyed whore from the Happy Port, but Mercy could not know those two, and they would not know Mercy. Daena recognized some Gate regulars in the crowd, and pointed them out for her; the dyer Dellono with his pinched white face and mottled purple hands, Galeo the sausage-maker in his greasy leather apron, tall Tomarro with his pet rat on his shoulder. “Tomarro best not let Galeo see that rat,” Daena warned. “That’s the only meat he puts in them sausages, I hear.” Mercy covered her mouth and laughed.\n\nThe balconies were filling too. The first and third levels were for merchants and captains and other respectable folk. The bravos preferred the fourth and highest, where the seats were cheapest. It was a riot of bright color up there, while down below more somber shades held sway. The second balcony was cut up into private boxes where the mighty could comport themselves in comfort and privacy, safely apart from the vulgarity above and below. They had the best view of the stage, and servants to bring them food, wine, cushions, whatever they might desire. It was rare to find the second balcony more than half full at the Gate; such of the mighty who relished a night of mummery were more inclined to visit the Dome or the Blue Lantern, where the offerings were considered subtler and more poetic.\n\nThis night was different, though, no doubt on account of the Westerosi envoy. In one box sat three scions of Otharys, each accompanied by a famous courtesan; Prestayn sat alone, a man so ancient that you wondered how he ever reached his seat; Torone and Pranelis shared a box, as they shared an uncomfortable alliance; the Third Sword was hosting a half-dozen friends.\n\n“I count five keyholders,” said Daena.\n\n“Bessaro is so fat you ought to count him twice,” Mercy replied, giggling. Izembaro had a belly on him, but compared to Bessaro he was as lithe as a willow. The keyholder was so big he needed a special seat, thrice the size of a common chair.\n\n“They’re all fat, them Reyaans,” Daena said. “Bellies as big as their ships. You should have seen the father. He made this one look small. One time he was summoned to the Hall of Truth to vote, but when he stepped onto his barge it sank.” She clutched Mercy by the elbow. “Look, the Sealord’s box.” The Sealord had never visited the Gate, but Izembaro named a box for him anyway, the largest and most opulent in the house. “That must be the Westerosi envoy. Have you ever seen such clothes on an old man? And look, he’s brought the Black Pearl!”\n\nThe envoy was slight and balding, with a funny grey wisp of a beard growing from his chin. His cloak was yellow velvet, and his breeches. His doublet was a blue so bright it almost made Mercy’s eyes water. Upon his breast a shield had been embroidered in yellow thread, and on the shield was a proud blue rooster picked out in lapis lazuli. One of his guards helped him to his seat, while two others stood behind him in the back of the box.\n\nThe woman with him could not have been more than a third his age. She was so lovely that the lamps seemed to burn brighter when she passed. She had dressed in a low-cut gown of pale yellow silk, startling against the light brown of her skin. Her black hair was bound up in a net of spun gold, and a jet-and-gold necklace brushed against the top of her full breasts. As they watched, she leaned close to the envoy and whispered something in his ear that made him laugh. “They should call her the Brown Pearl,” Mercy said to Daena. “She’s more brown than black.”\n\n“The first Black Pearl was black as a pot of ink,” said Daena. “She was a pirate queen, fathered by a Sealord’s son on a princess from the Summer Isles. A dragon king from Westeros took her for his lover.”\n\n“I would like to see a dragon,” Mercy said wistfully. “Why does the envoy have a chicken on his chest?”\n\nDaena howled. “Mercy, don’t you know anything? It’s his siggle. In the Sunset Kingdoms all the lords have siggles. Some have flowers, some have fish, some have bears and elks and other things. See, the envoy’s guards are wearing lions.”\n\nIt was true. There were four guards; big, hard-looking men in ringmail, with heavy Westerosi longswords sheathed at their hips. Their crimson cloaks were bordered in whorls of gold, and golden lions with red garnet eyes clasped each cloak at the shoulder. When Mercy glanced at the faces beneath the gilded, lion-crested helm, her belly gave a quiver.The gods have given me a gift. Her fingers clutched hard at Daena’s arm. “That guard. The one on the end, behind the Black Pearl.”\n\n“What of him? Do you know him?”\n\n“No.” Mercy had been born and bred in Braavos, how could she know some Westerosi? She had to think a moment. “It’s only… well, he’s fair to look on, don’t you think?” He was, in a rough-hewn way, though his eyes were hard.\n\nDaena shrugged. “He’s very old. Not so old as the other ones, but… he could be thirty. And Westerosi. They’re terrible savages, Mercy. Best stay well away from his sort.”\n\n“Stay away?” Mercy giggled. She was a giggly sort of girl, was Mercy. “No. I’ve got to get closer.” She gave Daena a squeeze and said, “If the Snapper comes looking for me, tell her that I went off to read my lines again.” She only had a few, and most were just, “Oh, no, no, no,” and “Don’t, oh don’t, don’t touch me,” and “Please, m’lord, I am still a maiden,” but this was the first time Izembaro had given her any lines at all, so it was only to be expected that poor Mercy would want to get them right.\n\nThe envoy from the Seven Kingdoms had taken two of his guards into his box to stand behind him and the Black Pearl, but the other two had been posted just outside the door to make certain he was not disturbed. They were talking quietly in the Common Tongue of Westeros as she slipped up silently behind them in the darkened passage. That was not a language Mercy knew.\n\n“Seven hells, this place is damp,” she heard her guard complain. “I’m chilled to the bones. Where are the bloody orange trees? I always heard there were orange trees in the Free Cities. Lemons and limes. Pomegranates. Hot peppers, warm nights, girls with bare bellies. Where are the bare-bellied girls, I ask you?”\n\n“Down in Lys, and Myr, and Old Volantis,” the other guard replied. He was an older man, big-bellied and grizzled. “I went to Lys with Lord Tywin once, when he was Hand to Aerys. Braavos is north of King’s Landing, fool. Can’t you read a bloody map?”\n\n“How long do you think we’ll be here?”\n\n“Longer than you’d like,” the old man replied. “If he goes back without the gold the queen will have his head. Besides, I seen that wife of his. There’s steps in Casterly Rock she can’t go down for fear she’d get stuck, that’s how fat she is. Who’d go back to that, when he has his sooty queen?”\n\nThe handsome guardsman grinned. “Don’t suppose he’ll share her with us, afterward?”\n\n“What, are you mad? You think he notices the likes of us? Bloody bugger don’t even get our names right half the time. Maybe it was different with Clegane.”\n\n“Ser wasn’t one for mummer shows and fancy whores. When Ser wanted a woman he took one, but sometimes he’d let us have her, after. I wouldn’t mind having a taste of that Black Pearl. You think she’s pink between her legs?”\n\nMercy wanted to hear more, but there was no time. The Bloody Hand was about to start, and the Snapper would be looking for her to help with costumes. Izembaro might be the King of the Mummers, but the Snapper was the one that they all feared. Time enough for her pretty guardsman later.\n\nThe Bloody Hand opened in a lichyard.\n\nWhen the dwarf appeared suddenly from behind a wooden tombstone, the crowd began to hiss and curse. Bobono waddled to the front of the stage and leered at them. “The seven-faced god has cheated me,” he began, snarling the words. “My noble sire he made of purest gold, and gold he made my siblings, boy and girl. But I am formed of darker stuff, of bones and blood and clay… “\n\nBy then Marro had appeared behind him, gaunt and terrible in the Stranger’s long black robes. His face was black as well, his teeth red and shiny with blood, while ivory horns jutted upwards from his brow. Bobono could not see him, but the balconies could, and now the pit as well. The Gate grew deathly quiet. Marro moved forward silently.\n\nSo did Mercy. The costumes were all hung, and the Snapper was busy sewing Daena into her gown for the court scene, so Mercy’s absence should not be noted. Quiet as a shadow, she slipped around the back again, up to where the guardsmen stood outside the envoy’s box. Standing in a darkened alcove, still as stone, she had a good look at his face. She studied it carefully, to be sure. Am I too young for him? she wondered. Too plain? Too skinny? She hoped he wasn’t the sort of man who liked big breasts on a girl. Bobono had been right about her chest. It would be best if I could take him back to my place, have him all to myself. But will he come with me?\n\n“You think it might be him?” the pretty one was saying.\n\n“What, did the Others take your wits?”\n\n“Why not? He’s a dwarf, ain’t he?”\n\n“The Imp weren’t the only dwarf in the world.”\n\n“Maybe not, but look here, everyone says how clever he was, true? So maybe he figures the last place his sister would ever look for him would be in some mummer show, making fun of himself. So he does just that, to tweak her nose.”\n\n“Ah, you’re mad.”\n\n“Well, maybe I’ll follow him after the mummery. Find out for myself.” The guardsman put a hand on the hilt of his sword. “If I’m right, I’ll be a ma lord, and if I’m wrong, well, bleed it, it’s just some dwarf.” He gave a bark of laughter.\n\nOn stage, Bobono was bargaining with Marro’s sinister Stranger. He had a big voice for such a little man, and he made it ring off the highest rafters now. “Give me the cup,” he told the Stranger, “for I shall drink deep. And if it tastes of gold and lion’s blood, so much the better. As I cannot be the hero, let me be the monster, and lesson them in fear in place of love.”\n\nMercy mouthed the last lines along with him. They were better lines than hers, and apt besides. He’ll want me or he won’t, she thought, so let the play begin. She said a silent prayer to the god of many faces, slipped out of her alcove, and flounced up to the guardsmen. Mercy, Mercy, Mercy. “My lords,” she said, “do you speak Braavosi? Oh, please, tell me you do.”\n\nThe two guardsmen exchanged a look. “What’s this thing going on about?” the older one asked. “Who is she?”\n\n“One of the mummers,” said the pretty one. He pushed his fair hair back off his brow and smiled at her. “Sorry, sweetling, we don’t speak your gibble-gabble.”\n\nFuss and feathers, Mercy thought, they only know the Common Tongue. That was no good. Give it up or go ahead. She could not give it up. She wanted him so bad. “I know your tongue, a little,” she lied, with Mercy’s sweetest smile. “You are lords of Westeros, my friend said.”\n\nThe old one laughed. “Lords? Aye, that’s us.”\n\nMercy looked down at her feet, so shy. “Izembaro said to please the lords,” she whispered. “If there is anything you want, anything at all… “\n\nThe two guardsmen exchanged a look. Then the handsome one reached out and touched her breast. “Anything?“\n\n“You’re disgusting,” said the older man.\n\n“Why? If this Izembaro wants to be hospitable, it would be rude to refuse.” He gave her nipple a tweak through the fabric of her dress, just the way the dwarf had done when she was fixing his cock for him. “Mummers are the next best thing to whores.”\n\n“Might be, but this one is a child.”\n\n“I am not,” lied Mercy. “I’m a maiden now.”\n\n“Not for long,” said the comely one. “I’m Lord Rafford, sweetling, and I know just what I want. Hike up those skirts now, and lean back against that wall.”\n\n“Not here,” Mercy said, brushing his hands away. “Not where the play is on. I might cry out, and Izembaro would be mad.”\n\n“Where, then?”\n\n“I know a place.”\n\nThe older guard was scowling. “What, you think can just scamper off? What if his knightliness comes looking for you?”\n\n“Why would he? He’s got a show to watch. And he’s got his own whore, why shouldn’t I have mine? This won’t take long.”\n\nNo, she thought, it won’t. Mercy took him by the hand, led him through the back and down the steps and out into the foggy night. “You could be a mummer, if you wanted,” she told him, as he pressed her up against the wall of the playhouse.\n\n“Me?” The guardsman snorted. “Not me, girl. All that bloody talking, I wouldn’t remember half of it.”\n\n“It’s hard at first,” she admitted. “But after a time it comes easier. I could teach you to say a line. I could.”\n\nHe grabbed her wrist. “I’ll do the teaching. Time for your first lesson.” He pulled her hard against him and kissed her on the lips, forcing his tongue into her mouth. It was all wet and slimy, like an eel. Mercy licked it with her own tongue, then broke away from him, breathless. “Not here. Someone might see. My room’s not far, but hurry. I have to be back before the second act, or I’ll miss my rape.”\n\nHe grinned. “No fear o’ that, girl.” But he let her pull him after her. Hand in hand, they went racing through the fog, over bridges and through alleys and up five flights of splintery wooden stairs. The guardsman was panting by the time they burst through the door of her little room. Mercy lit a tallow candle, then danced around at him, giggling. “Oh, now you’re all tired out. I forgot how old you were, m’lord. Do you want to take a little nap? Just lie down and close your eyes, and I’ll come back after the Imp’s done raping me.”\n\n“You’re not going anywhere.” He pulled her roughly to him. “Get those rags off, and I’ll show you how old I am, girl.”\n\n“Mercy,” she said. “My name is Mercy. Can you say it?”\n\n“Mercy,” he said. “My name is Raff.”\n\n“I know.” She slipped her hand between his legs, and felt how hard he was through the wool of his breeches.\n\n“The laces,” he urged her. “Be a sweet girl and undo them.” Instead she slid her finger down along the inside of his thigh. He gave a grunt. “Damn, be careful there, you — “\n\nMercy gave a gasp and stepped away, her face confused and frightened. “You’rebleeding.”\n\n“Wha — ” He looked down at himself. “Gods be good. What did you do to me, you little cunt?” The red stain spread across his thigh, soaking the heavy fabric.\n\n“Nothing,” Mercy squeaked. “I never… oh, oh, there’s so much blood. Stop it, stop it, you’re scaring me.”\n\nHe shook his head, a dazed look on his face. When he pressed his hand to his thigh, blood squirted through his fingers. It was running down his leg, into his boot. He doesn’t look so comely now, she thought. He just looks white and frightened.\n\n“A towel,” the guardsman gasped. “Bring me a towel, a rag, press down on it. Gods. I feel dizzy.” His leg was drenched with blood from the thigh down. When he tried to put his weight on it, his knee buckled and he fell. “Help me,” he pleaded, as the crotch of his breeches reddened. “Mother have mercy, girl. A healer… run and find a healer, quick now.”\n\n“There’s one on the next canal, but he won’t come. You have to go to him. Can’t you walk?”\n\n“Walk?” His fingers were slick with blood. “Are you blind, girl? I’m bleeding like a stuck pig. I can’t walk on this.”\n\n“Well,” she said, “I don’t know how you’ll get there, then.”\n\n“You’ll need to carry me.”\n\nSee? thought Mercy. You know your line, and so do I.\n\n“Think so?” asked Arya, sweetly.\n\nRaff the Sweetling looked up sharply as the long thin blade came sliding from her sleeve. She slipped it through his throat beneath the chin, twisted, and ripped it back out sideways with a single smooth slash. A fine red rain followed, and in his eyes the light went out.\n\n“Valar morghulis,” Arya whispered, but Raff was dead and did not hear. She sniffed. I should have helped him down the steps before I killed him. Now I’ll need to drag him all the way to the canal and roll him in. The eels would do the rest.\n\n“Mercy, Mercy, Mercy,” she sang sadly. A foolish, giddy girl she’d been, but good hearted. She would miss her, and she would miss Daena and the Snapper and the rest, even Izembaro and Bobono. This would make trouble for the Sealord and the envoy with the chicken on his chest, she did not doubt.\n\nShe would think about that later, though. Just now, there was no time. I had best run. Mercy still had some lines to say, her first lines and her last, and Izembaro would have her pretty little empty head if she were late for her own rape.\n","source":"_posts/MERCY.md","raw":"---\ntitle: MERCY\ndate: 2016-04-06 20:51:57\ntags: 冰与火之歌\ncomments: true\n---\n\n## MERCYE\\--EXCERPT FROM THE WINDS OF WINTER\n\nShe woke with a gasp, not knowing who she was, or where.\n\nThe smell of blood was heavy in her nostrils… or was that her nightmare, lingering? She had dreamed of wolves again, of running through some dark pine forest with a great pack at her hells, hard on the scent of prey.\n\nHalf-light filled the room, grey and gloomy. Shivering, she sat up in bed and ran a hand across her scalp. Stubble bristled against her palm. I need to shave before Izembaro sees. Mercy, I’m Mercy, and tonight I’ll be raped and murdered. Her true name was Mercedene, but Mercy was all anyone ever called her…\n<!--more-->\nExcept in dreams. She took a breath to quiet the howling in her heart, trying to remember more of what she’d dreamt, but most of it had gone already. There had been blood in it, though, and a full moon overhead, and a tree that watched her as she ran.\n\nShe had fastened the shutters back so the morning sun might wake her. But there was no sun outside the window of Mercy’s little room, only a wall of shifting grey fog. The air had grown chilly… and a good thing, else she might have slept all day. It would be just like Mercy to sleep through her own rape.\n\nGooseprickles covered her legs. Her coverlet had twisted around her like a snake. She unwound it, threw the blanket to the bare plank floor and padded naked to the window. Braavos was lost in fog. She could see the green water of the little canal below, the cobbled stone street that ran beneath her building, two arches of the mossy bridge… but the far end of the bridge vanished in greyness, and of the buildings across the canal only a few vague lights remained. She heard a soft splash as a serpent boat emerged beneath the bridge’s central arch. “What hour?” Mercy called down to the man who stood by the snake’s uplifted tail, pushing her onward with his pole.\n\nThe waterman gazed up, searching for the voice. “Four, by the Titan’s roar.” His words echoed hollowly off the swirling green waters and the walls of unseen buildings.\n\nShe was not late, not yet, but she should not dawdle. Mercy was a happy soul and a hard worker, but seldom timely. That would not serve tonight. The envoy from Westeros was expected at the Gate this evening, and Izembaro would be in no mood to hear excuses, even if she served them up with a sweet smile.\n\nShe had filled her basin from the canal last night before she went to sleep, preferring the brackish water to the slimy green rainwater stewing in the cistern out back. Dipping a rough cloth, she washed herself head to heel, standing on one leg at a time to scrub her calloused feet. After that she found her razor. A bare scalp helped the wigs fit better, Izembaro claimed.\n\nShe shaved, donned her smallclothes, and slipped a shapeless brown wool dress down over her head. One of her stockings needed mending, she saw as she pulled it up. She would ask the Snapper for help; her own sewing was so wretched that the wardrobe mistress usually took pity on her. Else I could filtch a nicer pair from wardrobe. That was risky, though. Izembaro hated it when the mummers wore his costumes in the streets.Except for Wendeyne. Give Izembaro’s cock a little suck and a girl can wear any costume that she wants. Mercy was not so foolish as all that. Daena had warned her. “Girls who start down that road wind up on the Ship, where every man in the pit knows he can have any pretty thing he might see up on the stage, if his purse is plump enough.”\n\nHer boots were lumps of old brown leather mottled with saltstains and cracked from long wear, her belt a length of hempen rope dyed blue. She knotted it about her waist, and hung a knife on her right hip and a coin pouch on her left. Last of all she threw her cloak across her shoulders. It was a real mummer’s cloak, purple wool lined in red silk, with a hood to keep the rain off, and three secret pockets too. She’d hid some coins in one of those, an iron key in another, a blade in the last. A real blade, not a fruit knife like the one on her hip, but it did not belong to Mercy, no more than her other treasures did. The fruit knife belonged to Mercy. She was made for eating fruit, for smiling and joking, for working hard and doing as she was told.\n\n“Mercy, Mercy, Mercy,” she sang as she descended the wooden stair to the street. The handrail was splintery, the steps steep, and there were five flights, but that was why she’d gotten the room so cheap. That, and Mercy’s smile. She might be bald and skinny, but Mercy had a pretty smile, and a certain grace. Even Izembaro agreed that she was graceful. She was not far from the Gate as the crows flies, but for girls with feet instead of wings the way was longer. Braavos was a crooked city. The streets were crooked, the alleys were crookeder, and the canals were crookedest of all. Most days she preferred to go the long way, down the Ragman’s Road along the Outer Harbor, where she had the sea before her and the sky above, and a clear view across the Great Lagoon to the Arsenal and the piney slopes of Sellagoro’s Shield. Sailors would hail her as she passed the docks, calling down from the decks of tarry Ibbenese whalers and big-bellied Westerosi cogs. Mercy could not always understand their words, but she knew what they were saying. Sometimes she would smile back and tell them they could find her at the Gate if they had the coin.\n\nThe long way also took her across the Bridge of Eyes with its carved stone faces. From the top of its span, she could look through the arches and see all the city: the green copper domes of the Hall of Truth, the masts rising like a forest from the Purple Harbor, the tall towers of the mighty, the golden thunderbolt turning on its spire atop the Sealord’s Palace… even the Titan’s bronze shoulders, off across the dark green waters. But that was only when the sun was shining down on Braavos. If the fog was thick there was nothing to see but grey, so today Mercy chose the shorter route to save some wear on her poor cracked boots.\n\nThe mists seemed to part before her and close up again as she passed. The cobblestones were wet and slick under her feet. She heard a cat yowl plaintively. Braavos was a good city for cats, and they roamed everywhere, especially at night. In the fog all cats are grey, Mercy thought. In the fog all men are killers.\n\nShe had never seen a thicker fog than this one. On the larger canals, the watermen would be running their serpent boats into one another, unable to make out any more than dim lights from the buildings to either side of them.\n\nMercy passed an old man with a lantern walking the other way, and envied him his light. The street was so gloomy she could scarcely see where she was stepping. In the humbler parts of the city, the houses, shops, and warehouses crowded together, leaning on each other like drunken lovers, their upper stories so close that you could step from one balcony to the next. The streets below became dark tunnels where every footfall echoed. The small canals were even more hazardous, since many of the houses that lined them had privies jutting out over the water. Izembaro loved to give the Sealord’s speech fromThe Merchant’s Melancholy Daughter, about how “here the last Titan yet stands, astride the stony shoulders of his brothers,” but Mercy preferred the scene where the fat merchant shat on the Sealord’s head as he passed underneath in his gold-and-purple barge. Only in Braavos could something like that happen, it was said, and only in Braavos would Sealord and sailor alike howl with laughter to see it.\n\nThe Gate stood close by the edge of Drowned Town, between the Outer Harbor and the Purple Harbor. An old warehouse had burnt there and the ground was sinking a little more each year, so the land came cheap. Atop the flooded stone foundation of the warehouse, Izembaro raised his cavernous playhall. The Dome and the Blue Lantern might enjoy more fashionable environs, he told his mummers, but here between the harbors they would never lack for sailors and whores to fill their pit. The Ship was close by, still pulling handsome crowds to the quay where she had been moored for twenty years, he said, and the Gate would flourish too.\n\nTime had proved him right. The Gate’s stage had developed a tilt as the building settled, their costumes were prone to mildew, and water snakes nested in the flooded cellar, but none of that troubled the mummers so long as the house was full.\n\nThe last bridge was made of rope and raw planks, and seemed to dissolve into nothingness, but that was only the fog. Mercy scampered across, her heels ringing on the wood. The fog opened before her like a tattered grey curtain to reveal the playhouse. Buttery yellow light spilled from the doors, and Mercy could hear voices from within. Beside the entrance, Big Brusco had painted over the title of the last show, and writtenThe Bloody Hand in its place in huge red letters. He was painting a bloody hand beneath the words, for those who could not read. Mercy stopped to have a look. “That’s a nice hand,” she told him.\n\n“Thumb’s crooked.” Brusco dabbed at it with his brush. “King o’ the Mummers been asking after you.”\n\n“It was so dark I slept and slept.” When Izembaro had first dubbed himself the King of the Mummers, the company had taken a wicked pleasure in it, savoring the outrage of their rivals from the Dome and the Blue Lantern. Of late, though, Izembaro had begun to take his title too seriously. “He will only play kings now,” Marro said, rolling his eyes, “and if the play has no king in it, he would sooner not stage it at all.”\n\nThe Bloody Hand offered two kings, the fat one and the boy. Izembaro would play the fat one. It was not a large part, but he had a fine speech as he lay dying, and a splendid fight with a demonic boar before that. Phario Forel had written it, and he had the bloodiest quill of all of Braavos.\n\nMercy found the company assembled behind the stage, and slipped in between Daena and the Snapper at the back, hoping her late arrival would go unnoticed. Izembaro was telling everyone that he expected the Gate to be packed to the rafters this evening, despite the fog. “The King of Westeros is sending his envoy to do homage to the King of the Mummers tonight,” he told his troupe. “We will not disappoint our fellow monarch.”\n\n“We?” said the Snapper, who did all the costumes for the mummers. “Is there more than one of him, now?”\n\n“He’s fat enough to count for two,” whispered Bobono. Every mummer’s troupe had to have a dwarf. He was theirs. When he saw Mercy, he gave her a leer. “Oho,” he said, “there she is. Is the little girl all ready for her rape?” He smacked his lips.\n\nThe Snapper smacked him in the head. “Be quiet.”\n\nThe King of the Mummers ignored the brief commotion. He was still talking, telling the mummers how magnificent they must be. Besides the Westerosi envoy, there would be keyholders in the crowd this evening, and famous courtesans as well. He did not intend for them to leave with a poor opinion of the Gate. “It shall go ill for any man who fails me,” he promised, a threat he borrowed from the speech Prince Garin gives on the eve of battle in Wroth of the Dragonlords, Phario Forel’s first play.\n\nBy the time Izembaro finally finished speaking, less than an hour remained before the show, and the mummers were all frantic and fretful by turns. The Gate rang to the sound of Mercy’s name.\n\n“Mercy,” her friend Daena implored, “Lady Stork has stepped on the hem of her gown again. Come help me sew it up.”\n\n“Mercy,” the Stranger called, “bring the bloody paste, my horn is coming loose.”\n\n“Mercy,” boomed Izembaro the Great himself, “what have you done with my crown, girl? I cannot make my entrance without my crown. How shall they know that I’m a king?”\n\n“Mercy,” squeaked the dwarf Bobono, “Mercy, something’s amiss with my laces, my cock keeps flopping out.”\n\nShe fetched the sticky paste and fastened the Stranger’s left horn back onto his forehead. She found Izembaro’s crown in the privy where he always left it and helped him pin it to his wig, and then ran for needle and thread so the Snapper could sew the lace hem back onto the cloth-of-gold gown that the queen would wear in the wedding scene.\n\nAnd Bobono’s cock was indeed flopping out. It was made to flop out, for the rape. What a hideous thing, Mercy thought as she knelt before the dwarf to fix him. The cock was a foot long and as thick as her arm, big enough to be seen from the highest balcony. The dyer had done a poor job with the leather, though; the thing was a mottled pink and white, with a bulbous head the color of a plum. Mercy pushed it back into Bobono’s breeches and laced him back up. “Mercy,” he sang as she tied him tight, “Mercy, Mercy, come to my room tonight and make a man of me.”\n\n“I’ll make a eunuch of you if you keep unlacing yourself just so I’ll fiddle with your crotch.”\n\n“We were meant to be together, Mercy,” Bobono insisted. “Look, we’re just the same height.”\n\n“Only when I’m on my knees. Do you remember your first line?” It had only been a fortnight since the dwarf had lurched onto stage in his cups and opened The Anguish of the Archon with the grumpkin’s speech from The Merchant’s Lusty Lady. Izembaro would skin him alive if he made such a blunder again, and never mind how hard it was to find a good dwarf.\n\n“What are we playing, Mercy?” Bobono asked innocently.\n\nHe is teasing me, Mercy thought. He’s not drunk tonight, he knows the show perfectly well. “We are doing Phario’s new Bloody Hand, in honor of the envoy from the Seven Kingdoms.”\n\n“Now I recall.” Bobono lowered his voice to a sinister croak. “The seven-faced god has cheated me,” he said. “My noble sire he made of purest gold, and gold he made my siblings, boy and girl. But I am formed of darker stuff, of bones and blood and clay, twisted into this rude shape you see before you.” With that, he grabbed at her chest, fumbling for a nipple. “You have no titties. How can I rape a girl with no titties?”\n\nShe caught his nose between her thumb and forefinger and twisted. “You’ll have no nose until you get your hands off me.”\n\n“Owwwww,” the dwarf squealed, releasing her.\n\n“I’ll grow titties in a year or two.” Mercy rose, to tower over the little man. “But you’ll never grow another nose. You think of that, before you touch me there.”\n\nBobono rubbed his tender nose. “There’s no need to get so shy. I’ll be raping you soon enough.”\n\n“Not until the second act.”\n\n“I always give Wendeyne’s titties a nice squeeze when I rape her in The Anguish of the Archon,” the dwarf complained. “She likes it, and the pit does too. You have to please the pit.”\n\nThat was one of Izembaro’s “wisdoms,” as he liked to call them. You have to please the pit. “I bet it would please the pit if I ripped off the dwarf’s cock and beat him about the head with it,” Mercy replied. “That’s something they won’t have seen before.” Always give them something they haven’t seen before was another of Izembaro’s “wisdoms,” and one that Bobono had no easy answer for. “There, you’re done,” Mercy announced. “Now see if you can keep in your breeches till it’s needed.”\n\nIzembaro was calling for her again. Now he could not find his boar spear. Mercy found it for him, helped Big Brusco don his boar suit, checked the trick daggers just to make certain no one had replaced one with a real blade (someone had done that at the Dome once, and a mummer had died), and poured Lady Stork the little nip of wine she liked to have before each play. When all the cries of “Mercy, Mercy, Mercy” finally died away, she stole a moment for a quick peek out into the house.\n\nThe pit was as full as ever she’d seen it, and they were enjoying themselves already, joking and jostling, eating and drinking. She saw a peddler selling chunks of cheese, ripping them off the wheel with his fingers whenever he found a buyer. A woman had a bag of wrinkled apples. Skins of wine were being passed from hand to hand, some girls were selling kisses, and one sailor was playing the sea pipes. The sad-eyed little man called Quill stood in the back, come to see what he could steal for one of his own plays. Cossomo the Conjurer had come as well, and on his arm was Yna, the one-eyed whore from the Happy Port, but Mercy could not know those two, and they would not know Mercy. Daena recognized some Gate regulars in the crowd, and pointed them out for her; the dyer Dellono with his pinched white face and mottled purple hands, Galeo the sausage-maker in his greasy leather apron, tall Tomarro with his pet rat on his shoulder. “Tomarro best not let Galeo see that rat,” Daena warned. “That’s the only meat he puts in them sausages, I hear.” Mercy covered her mouth and laughed.\n\nThe balconies were filling too. The first and third levels were for merchants and captains and other respectable folk. The bravos preferred the fourth and highest, where the seats were cheapest. It was a riot of bright color up there, while down below more somber shades held sway. The second balcony was cut up into private boxes where the mighty could comport themselves in comfort and privacy, safely apart from the vulgarity above and below. They had the best view of the stage, and servants to bring them food, wine, cushions, whatever they might desire. It was rare to find the second balcony more than half full at the Gate; such of the mighty who relished a night of mummery were more inclined to visit the Dome or the Blue Lantern, where the offerings were considered subtler and more poetic.\n\nThis night was different, though, no doubt on account of the Westerosi envoy. In one box sat three scions of Otharys, each accompanied by a famous courtesan; Prestayn sat alone, a man so ancient that you wondered how he ever reached his seat; Torone and Pranelis shared a box, as they shared an uncomfortable alliance; the Third Sword was hosting a half-dozen friends.\n\n“I count five keyholders,” said Daena.\n\n“Bessaro is so fat you ought to count him twice,” Mercy replied, giggling. Izembaro had a belly on him, but compared to Bessaro he was as lithe as a willow. The keyholder was so big he needed a special seat, thrice the size of a common chair.\n\n“They’re all fat, them Reyaans,” Daena said. “Bellies as big as their ships. You should have seen the father. He made this one look small. One time he was summoned to the Hall of Truth to vote, but when he stepped onto his barge it sank.” She clutched Mercy by the elbow. “Look, the Sealord’s box.” The Sealord had never visited the Gate, but Izembaro named a box for him anyway, the largest and most opulent in the house. “That must be the Westerosi envoy. Have you ever seen such clothes on an old man? And look, he’s brought the Black Pearl!”\n\nThe envoy was slight and balding, with a funny grey wisp of a beard growing from his chin. His cloak was yellow velvet, and his breeches. His doublet was a blue so bright it almost made Mercy’s eyes water. Upon his breast a shield had been embroidered in yellow thread, and on the shield was a proud blue rooster picked out in lapis lazuli. One of his guards helped him to his seat, while two others stood behind him in the back of the box.\n\nThe woman with him could not have been more than a third his age. She was so lovely that the lamps seemed to burn brighter when she passed. She had dressed in a low-cut gown of pale yellow silk, startling against the light brown of her skin. Her black hair was bound up in a net of spun gold, and a jet-and-gold necklace brushed against the top of her full breasts. As they watched, she leaned close to the envoy and whispered something in his ear that made him laugh. “They should call her the Brown Pearl,” Mercy said to Daena. “She’s more brown than black.”\n\n“The first Black Pearl was black as a pot of ink,” said Daena. “She was a pirate queen, fathered by a Sealord’s son on a princess from the Summer Isles. A dragon king from Westeros took her for his lover.”\n\n“I would like to see a dragon,” Mercy said wistfully. “Why does the envoy have a chicken on his chest?”\n\nDaena howled. “Mercy, don’t you know anything? It’s his siggle. In the Sunset Kingdoms all the lords have siggles. Some have flowers, some have fish, some have bears and elks and other things. See, the envoy’s guards are wearing lions.”\n\nIt was true. There were four guards; big, hard-looking men in ringmail, with heavy Westerosi longswords sheathed at their hips. Their crimson cloaks were bordered in whorls of gold, and golden lions with red garnet eyes clasped each cloak at the shoulder. When Mercy glanced at the faces beneath the gilded, lion-crested helm, her belly gave a quiver.The gods have given me a gift. Her fingers clutched hard at Daena’s arm. “That guard. The one on the end, behind the Black Pearl.”\n\n“What of him? Do you know him?”\n\n“No.” Mercy had been born and bred in Braavos, how could she know some Westerosi? She had to think a moment. “It’s only… well, he’s fair to look on, don’t you think?” He was, in a rough-hewn way, though his eyes were hard.\n\nDaena shrugged. “He’s very old. Not so old as the other ones, but… he could be thirty. And Westerosi. They’re terrible savages, Mercy. Best stay well away from his sort.”\n\n“Stay away?” Mercy giggled. She was a giggly sort of girl, was Mercy. “No. I’ve got to get closer.” She gave Daena a squeeze and said, “If the Snapper comes looking for me, tell her that I went off to read my lines again.” She only had a few, and most were just, “Oh, no, no, no,” and “Don’t, oh don’t, don’t touch me,” and “Please, m’lord, I am still a maiden,” but this was the first time Izembaro had given her any lines at all, so it was only to be expected that poor Mercy would want to get them right.\n\nThe envoy from the Seven Kingdoms had taken two of his guards into his box to stand behind him and the Black Pearl, but the other two had been posted just outside the door to make certain he was not disturbed. They were talking quietly in the Common Tongue of Westeros as she slipped up silently behind them in the darkened passage. That was not a language Mercy knew.\n\n“Seven hells, this place is damp,” she heard her guard complain. “I’m chilled to the bones. Where are the bloody orange trees? I always heard there were orange trees in the Free Cities. Lemons and limes. Pomegranates. Hot peppers, warm nights, girls with bare bellies. Where are the bare-bellied girls, I ask you?”\n\n“Down in Lys, and Myr, and Old Volantis,” the other guard replied. He was an older man, big-bellied and grizzled. “I went to Lys with Lord Tywin once, when he was Hand to Aerys. Braavos is north of King’s Landing, fool. Can’t you read a bloody map?”\n\n“How long do you think we’ll be here?”\n\n“Longer than you’d like,” the old man replied. “If he goes back without the gold the queen will have his head. Besides, I seen that wife of his. There’s steps in Casterly Rock she can’t go down for fear she’d get stuck, that’s how fat she is. Who’d go back to that, when he has his sooty queen?”\n\nThe handsome guardsman grinned. “Don’t suppose he’ll share her with us, afterward?”\n\n“What, are you mad? You think he notices the likes of us? Bloody bugger don’t even get our names right half the time. Maybe it was different with Clegane.”\n\n“Ser wasn’t one for mummer shows and fancy whores. When Ser wanted a woman he took one, but sometimes he’d let us have her, after. I wouldn’t mind having a taste of that Black Pearl. You think she’s pink between her legs?”\n\nMercy wanted to hear more, but there was no time. The Bloody Hand was about to start, and the Snapper would be looking for her to help with costumes. Izembaro might be the King of the Mummers, but the Snapper was the one that they all feared. Time enough for her pretty guardsman later.\n\nThe Bloody Hand opened in a lichyard.\n\nWhen the dwarf appeared suddenly from behind a wooden tombstone, the crowd began to hiss and curse. Bobono waddled to the front of the stage and leered at them. “The seven-faced god has cheated me,” he began, snarling the words. “My noble sire he made of purest gold, and gold he made my siblings, boy and girl. But I am formed of darker stuff, of bones and blood and clay… “\n\nBy then Marro had appeared behind him, gaunt and terrible in the Stranger’s long black robes. His face was black as well, his teeth red and shiny with blood, while ivory horns jutted upwards from his brow. Bobono could not see him, but the balconies could, and now the pit as well. The Gate grew deathly quiet. Marro moved forward silently.\n\nSo did Mercy. The costumes were all hung, and the Snapper was busy sewing Daena into her gown for the court scene, so Mercy’s absence should not be noted. Quiet as a shadow, she slipped around the back again, up to where the guardsmen stood outside the envoy’s box. Standing in a darkened alcove, still as stone, she had a good look at his face. She studied it carefully, to be sure. Am I too young for him? she wondered. Too plain? Too skinny? She hoped he wasn’t the sort of man who liked big breasts on a girl. Bobono had been right about her chest. It would be best if I could take him back to my place, have him all to myself. But will he come with me?\n\n“You think it might be him?” the pretty one was saying.\n\n“What, did the Others take your wits?”\n\n“Why not? He’s a dwarf, ain’t he?”\n\n“The Imp weren’t the only dwarf in the world.”\n\n“Maybe not, but look here, everyone says how clever he was, true? So maybe he figures the last place his sister would ever look for him would be in some mummer show, making fun of himself. So he does just that, to tweak her nose.”\n\n“Ah, you’re mad.”\n\n“Well, maybe I’ll follow him after the mummery. Find out for myself.” The guardsman put a hand on the hilt of his sword. “If I’m right, I’ll be a ma lord, and if I’m wrong, well, bleed it, it’s just some dwarf.” He gave a bark of laughter.\n\nOn stage, Bobono was bargaining with Marro’s sinister Stranger. He had a big voice for such a little man, and he made it ring off the highest rafters now. “Give me the cup,” he told the Stranger, “for I shall drink deep. And if it tastes of gold and lion’s blood, so much the better. As I cannot be the hero, let me be the monster, and lesson them in fear in place of love.”\n\nMercy mouthed the last lines along with him. They were better lines than hers, and apt besides. He’ll want me or he won’t, she thought, so let the play begin. She said a silent prayer to the god of many faces, slipped out of her alcove, and flounced up to the guardsmen. Mercy, Mercy, Mercy. “My lords,” she said, “do you speak Braavosi? Oh, please, tell me you do.”\n\nThe two guardsmen exchanged a look. “What’s this thing going on about?” the older one asked. “Who is she?”\n\n“One of the mummers,” said the pretty one. He pushed his fair hair back off his brow and smiled at her. “Sorry, sweetling, we don’t speak your gibble-gabble.”\n\nFuss and feathers, Mercy thought, they only know the Common Tongue. That was no good. Give it up or go ahead. She could not give it up. She wanted him so bad. “I know your tongue, a little,” she lied, with Mercy’s sweetest smile. “You are lords of Westeros, my friend said.”\n\nThe old one laughed. “Lords? Aye, that’s us.”\n\nMercy looked down at her feet, so shy. “Izembaro said to please the lords,” she whispered. “If there is anything you want, anything at all… “\n\nThe two guardsmen exchanged a look. Then the handsome one reached out and touched her breast. “Anything?“\n\n“You’re disgusting,” said the older man.\n\n“Why? If this Izembaro wants to be hospitable, it would be rude to refuse.” He gave her nipple a tweak through the fabric of her dress, just the way the dwarf had done when she was fixing his cock for him. “Mummers are the next best thing to whores.”\n\n“Might be, but this one is a child.”\n\n“I am not,” lied Mercy. “I’m a maiden now.”\n\n“Not for long,” said the comely one. “I’m Lord Rafford, sweetling, and I know just what I want. Hike up those skirts now, and lean back against that wall.”\n\n“Not here,” Mercy said, brushing his hands away. “Not where the play is on. I might cry out, and Izembaro would be mad.”\n\n“Where, then?”\n\n“I know a place.”\n\nThe older guard was scowling. “What, you think can just scamper off? What if his knightliness comes looking for you?”\n\n“Why would he? He’s got a show to watch. And he’s got his own whore, why shouldn’t I have mine? This won’t take long.”\n\nNo, she thought, it won’t. Mercy took him by the hand, led him through the back and down the steps and out into the foggy night. “You could be a mummer, if you wanted,” she told him, as he pressed her up against the wall of the playhouse.\n\n“Me?” The guardsman snorted. “Not me, girl. All that bloody talking, I wouldn’t remember half of it.”\n\n“It’s hard at first,” she admitted. “But after a time it comes easier. I could teach you to say a line. I could.”\n\nHe grabbed her wrist. “I’ll do the teaching. Time for your first lesson.” He pulled her hard against him and kissed her on the lips, forcing his tongue into her mouth. It was all wet and slimy, like an eel. Mercy licked it with her own tongue, then broke away from him, breathless. “Not here. Someone might see. My room’s not far, but hurry. I have to be back before the second act, or I’ll miss my rape.”\n\nHe grinned. “No fear o’ that, girl.” But he let her pull him after her. Hand in hand, they went racing through the fog, over bridges and through alleys and up five flights of splintery wooden stairs. The guardsman was panting by the time they burst through the door of her little room. Mercy lit a tallow candle, then danced around at him, giggling. “Oh, now you’re all tired out. I forgot how old you were, m’lord. Do you want to take a little nap? Just lie down and close your eyes, and I’ll come back after the Imp’s done raping me.”\n\n“You’re not going anywhere.” He pulled her roughly to him. “Get those rags off, and I’ll show you how old I am, girl.”\n\n“Mercy,” she said. “My name is Mercy. Can you say it?”\n\n“Mercy,” he said. “My name is Raff.”\n\n“I know.” She slipped her hand between his legs, and felt how hard he was through the wool of his breeches.\n\n“The laces,” he urged her. “Be a sweet girl and undo them.” Instead she slid her finger down along the inside of his thigh. He gave a grunt. “Damn, be careful there, you — “\n\nMercy gave a gasp and stepped away, her face confused and frightened. “You’rebleeding.”\n\n“Wha — ” He looked down at himself. “Gods be good. What did you do to me, you little cunt?” The red stain spread across his thigh, soaking the heavy fabric.\n\n“Nothing,” Mercy squeaked. “I never… oh, oh, there’s so much blood. Stop it, stop it, you’re scaring me.”\n\nHe shook his head, a dazed look on his face. When he pressed his hand to his thigh, blood squirted through his fingers. It was running down his leg, into his boot. He doesn’t look so comely now, she thought. He just looks white and frightened.\n\n“A towel,” the guardsman gasped. “Bring me a towel, a rag, press down on it. Gods. I feel dizzy.” His leg was drenched with blood from the thigh down. When he tried to put his weight on it, his knee buckled and he fell. “Help me,” he pleaded, as the crotch of his breeches reddened. “Mother have mercy, girl. A healer… run and find a healer, quick now.”\n\n“There’s one on the next canal, but he won’t come. You have to go to him. Can’t you walk?”\n\n“Walk?” His fingers were slick with blood. “Are you blind, girl? I’m bleeding like a stuck pig. I can’t walk on this.”\n\n“Well,” she said, “I don’t know how you’ll get there, then.”\n\n“You’ll need to carry me.”\n\nSee? thought Mercy. You know your line, and so do I.\n\n“Think so?” asked Arya, sweetly.\n\nRaff the Sweetling looked up sharply as the long thin blade came sliding from her sleeve. She slipped it through his throat beneath the chin, twisted, and ripped it back out sideways with a single smooth slash. A fine red rain followed, and in his eyes the light went out.\n\n“Valar morghulis,” Arya whispered, but Raff was dead and did not hear. She sniffed. I should have helped him down the steps before I killed him. Now I’ll need to drag him all the way to the canal and roll him in. The eels would do the rest.\n\n“Mercy, Mercy, Mercy,” she sang sadly. A foolish, giddy girl she’d been, but good hearted. She would miss her, and she would miss Daena and the Snapper and the rest, even Izembaro and Bobono. This would make trouble for the Sealord and the envoy with the chicken on his chest, she did not doubt.\n\nShe would think about that later, though. Just now, there was no time. I had best run. Mercy still had some lines to say, her first lines and her last, and Izembaro would have her pretty little empty head if she were late for her own rape.\n","slug":"MERCY","published":1,"updated":"2016-08-24T15:50:44.333Z","layout":"post","photos":[],"link":"","_id":"cis92veai0005h8dqab38plwy","content":"<h2 id=\"MERCYE-EXCERPT-FROM-THE-WINDS-OF-WINTER\"><a href=\"#MERCYE-EXCERPT-FROM-THE-WINDS-OF-WINTER\" class=\"headerlink\" title=\"MERCYE--EXCERPT FROM THE WINDS OF WINTER\"></a>MERCYE--EXCERPT FROM THE WINDS OF WINTER</h2><p>She woke with a gasp, not knowing who she was, or where.</p>\n<p>The smell of blood was heavy in her nostrils… or was that her nightmare, lingering? She had dreamed of wolves again, of running through some dark pine forest with a great pack at her hells, hard on the scent of prey.</p>\n<p>Half-light filled the room, grey and gloomy. Shivering, she sat up in bed and ran a hand across her scalp. Stubble bristled against her palm. I need to shave before Izembaro sees. Mercy, I’m Mercy, and tonight I’ll be raped and murdered. Her true name was Mercedene, but Mercy was all anyone ever called her…<br><a id=\"more\"></a><br>Except in dreams. She took a breath to quiet the howling in her heart, trying to remember more of what she’d dreamt, but most of it had gone already. There had been blood in it, though, and a full moon overhead, and a tree that watched her as she ran.</p>\n<p>She had fastened the shutters back so the morning sun might wake her. But there was no sun outside the window of Mercy’s little room, only a wall of shifting grey fog. The air had grown chilly… and a good thing, else she might have slept all day. It would be just like Mercy to sleep through her own rape.</p>\n<p>Gooseprickles covered her legs. Her coverlet had twisted around her like a snake. She unwound it, threw the blanket to the bare plank floor and padded naked to the window. Braavos was lost in fog. She could see the green water of the little canal below, the cobbled stone street that ran beneath her building, two arches of the mossy bridge… but the far end of the bridge vanished in greyness, and of the buildings across the canal only a few vague lights remained. She heard a soft splash as a serpent boat emerged beneath the bridge’s central arch. “What hour?” Mercy called down to the man who stood by the snake’s uplifted tail, pushing her onward with his pole.</p>\n<p>The waterman gazed up, searching for the voice. “Four, by the Titan’s roar.” His words echoed hollowly off the swirling green waters and the walls of unseen buildings.</p>\n<p>She was not late, not yet, but she should not dawdle. Mercy was a happy soul and a hard worker, but seldom timely. That would not serve tonight. The envoy from Westeros was expected at the Gate this evening, and Izembaro would be in no mood to hear excuses, even if she served them up with a sweet smile.</p>\n<p>She had filled her basin from the canal last night before she went to sleep, preferring the brackish water to the slimy green rainwater stewing in the cistern out back. Dipping a rough cloth, she washed herself head to heel, standing on one leg at a time to scrub her calloused feet. After that she found her razor. A bare scalp helped the wigs fit better, Izembaro claimed.</p>\n<p>She shaved, donned her smallclothes, and slipped a shapeless brown wool dress down over her head. One of her stockings needed mending, she saw as she pulled it up. She would ask the Snapper for help; her own sewing was so wretched that the wardrobe mistress usually took pity on her. Else I could filtch a nicer pair from wardrobe. That was risky, though. Izembaro hated it when the mummers wore his costumes in the streets.Except for Wendeyne. Give Izembaro’s cock a little suck and a girl can wear any costume that she wants. Mercy was not so foolish as all that. Daena had warned her. “Girls who start down that road wind up on the Ship, where every man in the pit knows he can have any pretty thing he might see up on the stage, if his purse is plump enough.”</p>\n<p>Her boots were lumps of old brown leather mottled with saltstains and cracked from long wear, her belt a length of hempen rope dyed blue. She knotted it about her waist, and hung a knife on her right hip and a coin pouch on her left. Last of all she threw her cloak across her shoulders. It was a real mummer’s cloak, purple wool lined in red silk, with a hood to keep the rain off, and three secret pockets too. She’d hid some coins in one of those, an iron key in another, a blade in the last. A real blade, not a fruit knife like the one on her hip, but it did not belong to Mercy, no more than her other treasures did. The fruit knife belonged to Mercy. She was made for eating fruit, for smiling and joking, for working hard and doing as she was told.</p>\n<p>“Mercy, Mercy, Mercy,” she sang as she descended the wooden stair to the street. The handrail was splintery, the steps steep, and there were five flights, but that was why she’d gotten the room so cheap. That, and Mercy’s smile. She might be bald and skinny, but Mercy had a pretty smile, and a certain grace. Even Izembaro agreed that she was graceful. She was not far from the Gate as the crows flies, but for girls with feet instead of wings the way was longer. Braavos was a crooked city. The streets were crooked, the alleys were crookeder, and the canals were crookedest of all. Most days she preferred to go the long way, down the Ragman’s Road along the Outer Harbor, where she had the sea before her and the sky above, and a clear view across the Great Lagoon to the Arsenal and the piney slopes of Sellagoro’s Shield. Sailors would hail her as she passed the docks, calling down from the decks of tarry Ibbenese whalers and big-bellied Westerosi cogs. Mercy could not always understand their words, but she knew what they were saying. Sometimes she would smile back and tell them they could find her at the Gate if they had the coin.</p>\n<p>The long way also took her across the Bridge of Eyes with its carved stone faces. From the top of its span, she could look through the arches and see all the city: the green copper domes of the Hall of Truth, the masts rising like a forest from the Purple Harbor, the tall towers of the mighty, the golden thunderbolt turning on its spire atop the Sealord’s Palace… even the Titan’s bronze shoulders, off across the dark green waters. But that was only when the sun was shining down on Braavos. If the fog was thick there was nothing to see but grey, so today Mercy chose the shorter route to save some wear on her poor cracked boots.</p>\n<p>The mists seemed to part before her and close up again as she passed. The cobblestones were wet and slick under her feet. She heard a cat yowl plaintively. Braavos was a good city for cats, and they roamed everywhere, especially at night. In the fog all cats are grey, Mercy thought. In the fog all men are killers.</p>\n<p>She had never seen a thicker fog than this one. On the larger canals, the watermen would be running their serpent boats into one another, unable to make out any more than dim lights from the buildings to either side of them.</p>\n<p>Mercy passed an old man with a lantern walking the other way, and envied him his light. The street was so gloomy she could scarcely see where she was stepping. In the humbler parts of the city, the houses, shops, and warehouses crowded together, leaning on each other like drunken lovers, their upper stories so close that you could step from one balcony to the next. The streets below became dark tunnels where every footfall echoed. The small canals were even more hazardous, since many of the houses that lined them had privies jutting out over the water. Izembaro loved to give the Sealord’s speech fromThe Merchant’s Melancholy Daughter, about how “here the last Titan yet stands, astride the stony shoulders of his brothers,” but Mercy preferred the scene where the fat merchant shat on the Sealord’s head as he passed underneath in his gold-and-purple barge. Only in Braavos could something like that happen, it was said, and only in Braavos would Sealord and sailor alike howl with laughter to see it.</p>\n<p>The Gate stood close by the edge of Drowned Town, between the Outer Harbor and the Purple Harbor. An old warehouse had burnt there and the ground was sinking a little more each year, so the land came cheap. Atop the flooded stone foundation of the warehouse, Izembaro raised his cavernous playhall. The Dome and the Blue Lantern might enjoy more fashionable environs, he told his mummers, but here between the harbors they would never lack for sailors and whores to fill their pit. The Ship was close by, still pulling handsome crowds to the quay where she had been moored for twenty years, he said, and the Gate would flourish too.</p>\n<p>Time had proved him right. The Gate’s stage had developed a tilt as the building settled, their costumes were prone to mildew, and water snakes nested in the flooded cellar, but none of that troubled the mummers so long as the house was full.</p>\n<p>The last bridge was made of rope and raw planks, and seemed to dissolve into nothingness, but that was only the fog. Mercy scampered across, her heels ringing on the wood. The fog opened before her like a tattered grey curtain to reveal the playhouse. Buttery yellow light spilled from the doors, and Mercy could hear voices from within. Beside the entrance, Big Brusco had painted over the title of the last show, and writtenThe Bloody Hand in its place in huge red letters. He was painting a bloody hand beneath the words, for those who could not read. Mercy stopped to have a look. “That’s a nice hand,” she told him.</p>\n<p>“Thumb’s crooked.” Brusco dabbed at it with his brush. “King o’ the Mummers been asking after you.”</p>\n<p>“It was so dark I slept and slept.” When Izembaro had first dubbed himself the King of the Mummers, the company had taken a wicked pleasure in it, savoring the outrage of their rivals from the Dome and the Blue Lantern. Of late, though, Izembaro had begun to take his title too seriously. “He will only play kings now,” Marro said, rolling his eyes, “and if the play has no king in it, he would sooner not stage it at all.”</p>\n<p>The Bloody Hand offered two kings, the fat one and the boy. Izembaro would play the fat one. It was not a large part, but he had a fine speech as he lay dying, and a splendid fight with a demonic boar before that. Phario Forel had written it, and he had the bloodiest quill of all of Braavos.</p>\n<p>Mercy found the company assembled behind the stage, and slipped in between Daena and the Snapper at the back, hoping her late arrival would go unnoticed. Izembaro was telling everyone that he expected the Gate to be packed to the rafters this evening, despite the fog. “The King of Westeros is sending his envoy to do homage to the King of the Mummers tonight,” he told his troupe. “We will not disappoint our fellow monarch.”</p>\n<p>“We?” said the Snapper, who did all the costumes for the mummers. “Is there more than one of him, now?”</p>\n<p>“He’s fat enough to count for two,” whispered Bobono. Every mummer’s troupe had to have a dwarf. He was theirs. When he saw Mercy, he gave her a leer. “Oho,” he said, “there she is. Is the little girl all ready for her rape?” He smacked his lips.</p>\n<p>The Snapper smacked him in the head. “Be quiet.”</p>\n<p>The King of the Mummers ignored the brief commotion. He was still talking, telling the mummers how magnificent they must be. Besides the Westerosi envoy, there would be keyholders in the crowd this evening, and famous courtesans as well. He did not intend for them to leave with a poor opinion of the Gate. “It shall go ill for any man who fails me,” he promised, a threat he borrowed from the speech Prince Garin gives on the eve of battle in Wroth of the Dragonlords, Phario Forel’s first play.</p>\n<p>By the time Izembaro finally finished speaking, less than an hour remained before the show, and the mummers were all frantic and fretful by turns. The Gate rang to the sound of Mercy’s name.</p>\n<p>“Mercy,” her friend Daena implored, “Lady Stork has stepped on the hem of her gown again. Come help me sew it up.”</p>\n<p>“Mercy,” the Stranger called, “bring the bloody paste, my horn is coming loose.”</p>\n<p>“Mercy,” boomed Izembaro the Great himself, “what have you done with my crown, girl? I cannot make my entrance without my crown. How shall they know that I’m a king?”</p>\n<p>“Mercy,” squeaked the dwarf Bobono, “Mercy, something’s amiss with my laces, my cock keeps flopping out.”</p>\n<p>She fetched the sticky paste and fastened the Stranger’s left horn back onto his forehead. She found Izembaro’s crown in the privy where he always left it and helped him pin it to his wig, and then ran for needle and thread so the Snapper could sew the lace hem back onto the cloth-of-gold gown that the queen would wear in the wedding scene.</p>\n<p>And Bobono’s cock was indeed flopping out. It was made to flop out, for the rape. What a hideous thing, Mercy thought as she knelt before the dwarf to fix him. The cock was a foot long and as thick as her arm, big enough to be seen from the highest balcony. The dyer had done a poor job with the leather, though; the thing was a mottled pink and white, with a bulbous head the color of a plum. Mercy pushed it back into Bobono’s breeches and laced him back up. “Mercy,” he sang as she tied him tight, “Mercy, Mercy, come to my room tonight and make a man of me.”</p>\n<p>“I’ll make a eunuch of you if you keep unlacing yourself just so I’ll fiddle with your crotch.”</p>\n<p>“We were meant to be together, Mercy,” Bobono insisted. “Look, we’re just the same height.”</p>\n<p>“Only when I’m on my knees. Do you remember your first line?” It had only been a fortnight since the dwarf had lurched onto stage in his cups and opened The Anguish of the Archon with the grumpkin’s speech from The Merchant’s Lusty Lady. Izembaro would skin him alive if he made such a blunder again, and never mind how hard it was to find a good dwarf.</p>\n<p>“What are we playing, Mercy?” Bobono asked innocently.</p>\n<p>He is teasing me, Mercy thought. He’s not drunk tonight, he knows the show perfectly well. “We are doing Phario’s new Bloody Hand, in honor of the envoy from the Seven Kingdoms.”</p>\n<p>“Now I recall.” Bobono lowered his voice to a sinister croak. “The seven-faced god has cheated me,” he said. “My noble sire he made of purest gold, and gold he made my siblings, boy and girl. But I am formed of darker stuff, of bones and blood and clay, twisted into this rude shape you see before you.” With that, he grabbed at her chest, fumbling for a nipple. “You have no titties. How can I rape a girl with no titties?”</p>\n<p>She caught his nose between her thumb and forefinger and twisted. “You’ll have no nose until you get your hands off me.”</p>\n<p>“Owwwww,” the dwarf squealed, releasing her.</p>\n<p>“I’ll grow titties in a year or two.” Mercy rose, to tower over the little man. “But you’ll never grow another nose. You think of that, before you touch me there.”</p>\n<p>Bobono rubbed his tender nose. “There’s no need to get so shy. I’ll be raping you soon enough.”</p>\n<p>“Not until the second act.”</p>\n<p>“I always give Wendeyne’s titties a nice squeeze when I rape her in The Anguish of the Archon,” the dwarf complained. “She likes it, and the pit does too. You have to please the pit.”</p>\n<p>That was one of Izembaro’s “wisdoms,” as he liked to call them. You have to please the pit. “I bet it would please the pit if I ripped off the dwarf’s cock and beat him about the head with it,” Mercy replied. “That’s something they won’t have seen before.” Always give them something they haven’t seen before was another of Izembaro’s “wisdoms,” and one that Bobono had no easy answer for. “There, you’re done,” Mercy announced. “Now see if you can keep in your breeches till it’s needed.”</p>\n<p>Izembaro was calling for her again. Now he could not find his boar spear. Mercy found it for him, helped Big Brusco don his boar suit, checked the trick daggers just to make certain no one had replaced one with a real blade (someone had done that at the Dome once, and a mummer had died), and poured Lady Stork the little nip of wine she liked to have before each play. When all the cries of “Mercy, Mercy, Mercy” finally died away, she stole a moment for a quick peek out into the house.</p>\n<p>The pit was as full as ever she’d seen it, and they were enjoying themselves already, joking and jostling, eating and drinking. She saw a peddler selling chunks of cheese, ripping them off the wheel with his fingers whenever he found a buyer. A woman had a bag of wrinkled apples. Skins of wine were being passed from hand to hand, some girls were selling kisses, and one sailor was playing the sea pipes. The sad-eyed little man called Quill stood in the back, come to see what he could steal for one of his own plays. Cossomo the Conjurer had come as well, and on his arm was Yna, the one-eyed whore from the Happy Port, but Mercy could not know those two, and they would not know Mercy. Daena recognized some Gate regulars in the crowd, and pointed them out for her; the dyer Dellono with his pinched white face and mottled purple hands, Galeo the sausage-maker in his greasy leather apron, tall Tomarro with his pet rat on his shoulder. “Tomarro best not let Galeo see that rat,” Daena warned. “That’s the only meat he puts in them sausages, I hear.” Mercy covered her mouth and laughed.</p>\n<p>The balconies were filling too. The first and third levels were for merchants and captains and other respectable folk. The bravos preferred the fourth and highest, where the seats were cheapest. It was a riot of bright color up there, while down below more somber shades held sway. The second balcony was cut up into private boxes where the mighty could comport themselves in comfort and privacy, safely apart from the vulgarity above and below. They had the best view of the stage, and servants to bring them food, wine, cushions, whatever they might desire. It was rare to find the second balcony more than half full at the Gate; such of the mighty who relished a night of mummery were more inclined to visit the Dome or the Blue Lantern, where the offerings were considered subtler and more poetic.</p>\n<p>This night was different, though, no doubt on account of the Westerosi envoy. In one box sat three scions of Otharys, each accompanied by a famous courtesan; Prestayn sat alone, a man so ancient that you wondered how he ever reached his seat; Torone and Pranelis shared a box, as they shared an uncomfortable alliance; the Third Sword was hosting a half-dozen friends.</p>\n<p>“I count five keyholders,” said Daena.</p>\n<p>“Bessaro is so fat you ought to count him twice,” Mercy replied, giggling. Izembaro had a belly on him, but compared to Bessaro he was as lithe as a willow. The keyholder was so big he needed a special seat, thrice the size of a common chair.</p>\n<p>“They’re all fat, them Reyaans,” Daena said. “Bellies as big as their ships. You should have seen the father. He made this one look small. One time he was summoned to the Hall of Truth to vote, but when he stepped onto his barge it sank.” She clutched Mercy by the elbow. “Look, the Sealord’s box.” The Sealord had never visited the Gate, but Izembaro named a box for him anyway, the largest and most opulent in the house. “That must be the Westerosi envoy. Have you ever seen such clothes on an old man? And look, he’s brought the Black Pearl!”</p>\n<p>The envoy was slight and balding, with a funny grey wisp of a beard growing from his chin. His cloak was yellow velvet, and his breeches. His doublet was a blue so bright it almost made Mercy’s eyes water. Upon his breast a shield had been embroidered in yellow thread, and on the shield was a proud blue rooster picked out in lapis lazuli. One of his guards helped him to his seat, while two others stood behind him in the back of the box.</p>\n<p>The woman with him could not have been more than a third his age. She was so lovely that the lamps seemed to burn brighter when she passed. She had dressed in a low-cut gown of pale yellow silk, startling against the light brown of her skin. Her black hair was bound up in a net of spun gold, and a jet-and-gold necklace brushed against the top of her full breasts. As they watched, she leaned close to the envoy and whispered something in his ear that made him laugh. “They should call her the Brown Pearl,” Mercy said to Daena. “She’s more brown than black.”</p>\n<p>“The first Black Pearl was black as a pot of ink,” said Daena. “She was a pirate queen, fathered by a Sealord’s son on a princess from the Summer Isles. A dragon king from Westeros took her for his lover.”</p>\n<p>“I would like to see a dragon,” Mercy said wistfully. “Why does the envoy have a chicken on his chest?”</p>\n<p>Daena howled. “Mercy, don’t you know anything? It’s his siggle. In the Sunset Kingdoms all the lords have siggles. Some have flowers, some have fish, some have bears and elks and other things. See, the envoy’s guards are wearing lions.”</p>\n<p>It was true. There were four guards; big, hard-looking men in ringmail, with heavy Westerosi longswords sheathed at their hips. Their crimson cloaks were bordered in whorls of gold, and golden lions with red garnet eyes clasped each cloak at the shoulder. When Mercy glanced at the faces beneath the gilded, lion-crested helm, her belly gave a quiver.The gods have given me a gift. Her fingers clutched hard at Daena’s arm. “That guard. The one on the end, behind the Black Pearl.”</p>\n<p>“What of him? Do you know him?”</p>\n<p>“No.” Mercy had been born and bred in Braavos, how could she know some Westerosi? She had to think a moment. “It’s only… well, he’s fair to look on, don’t you think?” He was, in a rough-hewn way, though his eyes were hard.</p>\n<p>Daena shrugged. “He’s very old. Not so old as the other ones, but… he could be thirty. And Westerosi. They’re terrible savages, Mercy. Best stay well away from his sort.”</p>\n<p>“Stay away?” Mercy giggled. She was a giggly sort of girl, was Mercy. “No. I’ve got to get closer.” She gave Daena a squeeze and said, “If the Snapper comes looking for me, tell her that I went off to read my lines again.” She only had a few, and most were just, “Oh, no, no, no,” and “Don’t, oh don’t, don’t touch me,” and “Please, m’lord, I am still a maiden,” but this was the first time Izembaro had given her any lines at all, so it was only to be expected that poor Mercy would want to get them right.</p>\n<p>The envoy from the Seven Kingdoms had taken two of his guards into his box to stand behind him and the Black Pearl, but the other two had been posted just outside the door to make certain he was not disturbed. They were talking quietly in the Common Tongue of Westeros as she slipped up silently behind them in the darkened passage. That was not a language Mercy knew.</p>\n<p>“Seven hells, this place is damp,” she heard her guard complain. “I’m chilled to the bones. Where are the bloody orange trees? I always heard there were orange trees in the Free Cities. Lemons and limes. Pomegranates. Hot peppers, warm nights, girls with bare bellies. Where are the bare-bellied girls, I ask you?”</p>\n<p>“Down in Lys, and Myr, and Old Volantis,” the other guard replied. He was an older man, big-bellied and grizzled. “I went to Lys with Lord Tywin once, when he was Hand to Aerys. Braavos is north of King’s Landing, fool. Can’t you read a bloody map?”</p>\n<p>“How long do you think we’ll be here?”</p>\n<p>“Longer than you’d like,” the old man replied. “If he goes back without the gold the queen will have his head. Besides, I seen that wife of his. There’s steps in Casterly Rock she can’t go down for fear she’d get stuck, that’s how fat she is. Who’d go back to that, when he has his sooty queen?”</p>\n<p>The handsome guardsman grinned. “Don’t suppose he’ll share her with us, afterward?”</p>\n<p>“What, are you mad? You think he notices the likes of us? Bloody bugger don’t even get our names right half the time. Maybe it was different with Clegane.”</p>\n<p>“Ser wasn’t one for mummer shows and fancy whores. When Ser wanted a woman he took one, but sometimes he’d let us have her, after. I wouldn’t mind having a taste of that Black Pearl. You think she’s pink between her legs?”</p>\n<p>Mercy wanted to hear more, but there was no time. The Bloody Hand was about to start, and the Snapper would be looking for her to help with costumes. Izembaro might be the King of the Mummers, but the Snapper was the one that they all feared. Time enough for her pretty guardsman later.</p>\n<p>The Bloody Hand opened in a lichyard.</p>\n<p>When the dwarf appeared suddenly from behind a wooden tombstone, the crowd began to hiss and curse. Bobono waddled to the front of the stage and leered at them. “The seven-faced god has cheated me,” he began, snarling the words. “My noble sire he made of purest gold, and gold he made my siblings, boy and girl. But I am formed of darker stuff, of bones and blood and clay… “</p>\n<p>By then Marro had appeared behind him, gaunt and terrible in the Stranger’s long black robes. His face was black as well, his teeth red and shiny with blood, while ivory horns jutted upwards from his brow. Bobono could not see him, but the balconies could, and now the pit as well. The Gate grew deathly quiet. Marro moved forward silently.</p>\n<p>So did Mercy. The costumes were all hung, and the Snapper was busy sewing Daena into her gown for the court scene, so Mercy’s absence should not be noted. Quiet as a shadow, she slipped around the back again, up to where the guardsmen stood outside the envoy’s box. Standing in a darkened alcove, still as stone, she had a good look at his face. She studied it carefully, to be sure. Am I too young for him? she wondered. Too plain? Too skinny? She hoped he wasn’t the sort of man who liked big breasts on a girl. Bobono had been right about her chest. It would be best if I could take him back to my place, have him all to myself. But will he come with me?</p>\n<p>“You think it might be him?” the pretty one was saying.</p>\n<p>“What, did the Others take your wits?”</p>\n<p>“Why not? He’s a dwarf, ain’t he?”</p>\n<p>“The Imp weren’t the only dwarf in the world.”</p>\n<p>“Maybe not, but look here, everyone says how clever he was, true? So maybe he figures the last place his sister would ever look for him would be in some mummer show, making fun of himself. So he does just that, to tweak her nose.”</p>\n<p>“Ah, you’re mad.”</p>\n<p>“Well, maybe I’ll follow him after the mummery. Find out for myself.” The guardsman put a hand on the hilt of his sword. “If I’m right, I’ll be a ma lord, and if I’m wrong, well, bleed it, it’s just some dwarf.” He gave a bark of laughter.</p>\n<p>On stage, Bobono was bargaining with Marro’s sinister Stranger. He had a big voice for such a little man, and he made it ring off the highest rafters now. “Give me the cup,” he told the Stranger, “for I shall drink deep. And if it tastes of gold and lion’s blood, so much the better. As I cannot be the hero, let me be the monster, and lesson them in fear in place of love.”</p>\n<p>Mercy mouthed the last lines along with him. They were better lines than hers, and apt besides. He’ll want me or he won’t, she thought, so let the play begin. She said a silent prayer to the god of many faces, slipped out of her alcove, and flounced up to the guardsmen. Mercy, Mercy, Mercy. “My lords,” she said, “do you speak Braavosi? Oh, please, tell me you do.”</p>\n<p>The two guardsmen exchanged a look. “What’s this thing going on about?” the older one asked. “Who is she?”</p>\n<p>“One of the mummers,” said the pretty one. He pushed his fair hair back off his brow and smiled at her. “Sorry, sweetling, we don’t speak your gibble-gabble.”</p>\n<p>Fuss and feathers, Mercy thought, they only know the Common Tongue. That was no good. Give it up or go ahead. She could not give it up. She wanted him so bad. “I know your tongue, a little,” she lied, with Mercy’s sweetest smile. “You are lords of Westeros, my friend said.”</p>\n<p>The old one laughed. “Lords? Aye, that’s us.”</p>\n<p>Mercy looked down at her feet, so shy. “Izembaro said to please the lords,” she whispered. “If there is anything you want, anything at all… “</p>\n<p>The two guardsmen exchanged a look. Then the handsome one reached out and touched her breast. “Anything?“</p>\n<p>“You’re disgusting,” said the older man.</p>\n<p>“Why? If this Izembaro wants to be hospitable, it would be rude to refuse.” He gave her nipple a tweak through the fabric of her dress, just the way the dwarf had done when she was fixing his cock for him. “Mummers are the next best thing to whores.”</p>\n<p>“Might be, but this one is a child.”</p>\n<p>“I am not,” lied Mercy. “I’m a maiden now.”</p>\n<p>“Not for long,” said the comely one. “I’m Lord Rafford, sweetling, and I know just what I want. Hike up those skirts now, and lean back against that wall.”</p>\n<p>“Not here,” Mercy said, brushing his hands away. “Not where the play is on. I might cry out, and Izembaro would be mad.”</p>\n<p>“Where, then?”</p>\n<p>“I know a place.”</p>\n<p>The older guard was scowling. “What, you think can just scamper off? What if his knightliness comes looking for you?”</p>\n<p>“Why would he? He’s got a show to watch. And he’s got his own whore, why shouldn’t I have mine? This won’t take long.”</p>\n<p>No, she thought, it won’t. Mercy took him by the hand, led him through the back and down the steps and out into the foggy night. “You could be a mummer, if you wanted,” she told him, as he pressed her up against the wall of the playhouse.</p>\n<p>“Me?” The guardsman snorted. “Not me, girl. All that bloody talking, I wouldn’t remember half of it.”</p>\n<p>“It’s hard at first,” she admitted. “But after a time it comes easier. I could teach you to say a line. I could.”</p>\n<p>He grabbed her wrist. “I’ll do the teaching. Time for your first lesson.” He pulled her hard against him and kissed her on the lips, forcing his tongue into her mouth. It was all wet and slimy, like an eel. Mercy licked it with her own tongue, then broke away from him, breathless. “Not here. Someone might see. My room’s not far, but hurry. I have to be back before the second act, or I’ll miss my rape.”</p>\n<p>He grinned. “No fear o’ that, girl.” But he let her pull him after her. Hand in hand, they went racing through the fog, over bridges and through alleys and up five flights of splintery wooden stairs. The guardsman was panting by the time they burst through the door of her little room. Mercy lit a tallow candle, then danced around at him, giggling. “Oh, now you’re all tired out. I forgot how old you were, m’lord. Do you want to take a little nap? Just lie down and close your eyes, and I’ll come back after the Imp’s done raping me.”</p>\n<p>“You’re not going anywhere.” He pulled her roughly to him. “Get those rags off, and I’ll show you how old I am, girl.”</p>\n<p>“Mercy,” she said. “My name is Mercy. Can you say it?”</p>\n<p>“Mercy,” he said. “My name is Raff.”</p>\n<p>“I know.” She slipped her hand between his legs, and felt how hard he was through the wool of his breeches.</p>\n<p>“The laces,” he urged her. “Be a sweet girl and undo them.” Instead she slid her finger down along the inside of his thigh. He gave a grunt. “Damn, be careful there, you — “</p>\n<p>Mercy gave a gasp and stepped away, her face confused and frightened. “You’rebleeding.”</p>\n<p>“Wha — ” He looked down at himself. “Gods be good. What did you do to me, you little cunt?” The red stain spread across his thigh, soaking the heavy fabric.</p>\n<p>“Nothing,” Mercy squeaked. “I never… oh, oh, there’s so much blood. Stop it, stop it, you’re scaring me.”</p>\n<p>He shook his head, a dazed look on his face. When he pressed his hand to his thigh, blood squirted through his fingers. It was running down his leg, into his boot. He doesn’t look so comely now, she thought. He just looks white and frightened.</p>\n<p>“A towel,” the guardsman gasped. “Bring me a towel, a rag, press down on it. Gods. I feel dizzy.” His leg was drenched with blood from the thigh down. When he tried to put his weight on it, his knee buckled and he fell. “Help me,” he pleaded, as the crotch of his breeches reddened. “Mother have mercy, girl. A healer… run and find a healer, quick now.”</p>\n<p>“There’s one on the next canal, but he won’t come. You have to go to him. Can’t you walk?”</p>\n<p>“Walk?” His fingers were slick with blood. “Are you blind, girl? I’m bleeding like a stuck pig. I can’t walk on this.”</p>\n<p>“Well,” she said, “I don’t know how you’ll get there, then.”</p>\n<p>“You’ll need to carry me.”</p>\n<p>See? thought Mercy. You know your line, and so do I.</p>\n<p>“Think so?” asked Arya, sweetly.</p>\n<p>Raff the Sweetling looked up sharply as the long thin blade came sliding from her sleeve. She slipped it through his throat beneath the chin, twisted, and ripped it back out sideways with a single smooth slash. A fine red rain followed, and in his eyes the light went out.</p>\n<p>“Valar morghulis,” Arya whispered, but Raff was dead and did not hear. She sniffed. I should have helped him down the steps before I killed him. Now I’ll need to drag him all the way to the canal and roll him in. The eels would do the rest.</p>\n<p>“Mercy, Mercy, Mercy,” she sang sadly. A foolish, giddy girl she’d been, but good hearted. She would miss her, and she would miss Daena and the Snapper and the rest, even Izembaro and Bobono. This would make trouble for the Sealord and the envoy with the chicken on his chest, she did not doubt.</p>\n<p>She would think about that later, though. Just now, there was no time. I had best run. Mercy still had some lines to say, her first lines and her last, and Izembaro would have her pretty little empty head if she were late for her own rape.</p>\n","excerpt":"<h2 id=\"MERCYE-EXCERPT-FROM-THE-WINDS-OF-WINTER\"><a href=\"#MERCYE-EXCERPT-FROM-THE-WINDS-OF-WINTER\" class=\"headerlink\" title=\"MERCYE--EXCERPT FROM THE WINDS OF WINTER\"></a>MERCYE--EXCERPT FROM THE WINDS OF WINTER</h2><p>She woke with a gasp, not knowing who she was, or where.</p>\n<p>The smell of blood was heavy in her nostrils… or was that her nightmare, lingering? She had dreamed of wolves again, of running through some dark pine forest with a great pack at her hells, hard on the scent of prey.</p>\n<p>Half-light filled the room, grey and gloomy. Shivering, she sat up in bed and ran a hand across her scalp. Stubble bristled against her palm. I need to shave before Izembaro sees. Mercy, I’m Mercy, and tonight I’ll be raped and murdered. Her true name was Mercedene, but Mercy was all anyone ever called her…<br>","more":"<br>Except in dreams. She took a breath to quiet the howling in her heart, trying to remember more of what she’d dreamt, but most of it had gone already. There had been blood in it, though, and a full moon overhead, and a tree that watched her as she ran.</p>\n<p>She had fastened the shutters back so the morning sun might wake her. But there was no sun outside the window of Mercy’s little room, only a wall of shifting grey fog. The air had grown chilly… and a good thing, else she might have slept all day. It would be just like Mercy to sleep through her own rape.</p>\n<p>Gooseprickles covered her legs. Her coverlet had twisted around her like a snake. She unwound it, threw the blanket to the bare plank floor and padded naked to the window. Braavos was lost in fog. She could see the green water of the little canal below, the cobbled stone street that ran beneath her building, two arches of the mossy bridge… but the far end of the bridge vanished in greyness, and of the buildings across the canal only a few vague lights remained. She heard a soft splash as a serpent boat emerged beneath the bridge’s central arch. “What hour?” Mercy called down to the man who stood by the snake’s uplifted tail, pushing her onward with his pole.</p>\n<p>The waterman gazed up, searching for the voice. “Four, by the Titan’s roar.” His words echoed hollowly off the swirling green waters and the walls of unseen buildings.</p>\n<p>She was not late, not yet, but she should not dawdle. Mercy was a happy soul and a hard worker, but seldom timely. That would not serve tonight. The envoy from Westeros was expected at the Gate this evening, and Izembaro would be in no mood to hear excuses, even if she served them up with a sweet smile.</p>\n<p>She had filled her basin from the canal last night before she went to sleep, preferring the brackish water to the slimy green rainwater stewing in the cistern out back. Dipping a rough cloth, she washed herself head to heel, standing on one leg at a time to scrub her calloused feet. After that she found her razor. A bare scalp helped the wigs fit better, Izembaro claimed.</p>\n<p>She shaved, donned her smallclothes, and slipped a shapeless brown wool dress down over her head. One of her stockings needed mending, she saw as she pulled it up. She would ask the Snapper for help; her own sewing was so wretched that the wardrobe mistress usually took pity on her. Else I could filtch a nicer pair from wardrobe. That was risky, though. Izembaro hated it when the mummers wore his costumes in the streets.Except for Wendeyne. Give Izembaro’s cock a little suck and a girl can wear any costume that she wants. Mercy was not so foolish as all that. Daena had warned her. “Girls who start down that road wind up on the Ship, where every man in the pit knows he can have any pretty thing he might see up on the stage, if his purse is plump enough.”</p>\n<p>Her boots were lumps of old brown leather mottled with saltstains and cracked from long wear, her belt a length of hempen rope dyed blue. She knotted it about her waist, and hung a knife on her right hip and a coin pouch on her left. Last of all she threw her cloak across her shoulders. It was a real mummer’s cloak, purple wool lined in red silk, with a hood to keep the rain off, and three secret pockets too. She’d hid some coins in one of those, an iron key in another, a blade in the last. A real blade, not a fruit knife like the one on her hip, but it did not belong to Mercy, no more than her other treasures did. The fruit knife belonged to Mercy. She was made for eating fruit, for smiling and joking, for working hard and doing as she was told.</p>\n<p>“Mercy, Mercy, Mercy,” she sang as she descended the wooden stair to the street. The handrail was splintery, the steps steep, and there were five flights, but that was why she’d gotten the room so cheap. That, and Mercy’s smile. She might be bald and skinny, but Mercy had a pretty smile, and a certain grace. Even Izembaro agreed that she was graceful. She was not far from the Gate as the crows flies, but for girls with feet instead of wings the way was longer. Braavos was a crooked city. The streets were crooked, the alleys were crookeder, and the canals were crookedest of all. Most days she preferred to go the long way, down the Ragman’s Road along the Outer Harbor, where she had the sea before her and the sky above, and a clear view across the Great Lagoon to the Arsenal and the piney slopes of Sellagoro’s Shield. Sailors would hail her as she passed the docks, calling down from the decks of tarry Ibbenese whalers and big-bellied Westerosi cogs. Mercy could not always understand their words, but she knew what they were saying. Sometimes she would smile back and tell them they could find her at the Gate if they had the coin.</p>\n<p>The long way also took her across the Bridge of Eyes with its carved stone faces. From the top of its span, she could look through the arches and see all the city: the green copper domes of the Hall of Truth, the masts rising like a forest from the Purple Harbor, the tall towers of the mighty, the golden thunderbolt turning on its spire atop the Sealord’s Palace… even the Titan’s bronze shoulders, off across the dark green waters. But that was only when the sun was shining down on Braavos. If the fog was thick there was nothing to see but grey, so today Mercy chose the shorter route to save some wear on her poor cracked boots.</p>\n<p>The mists seemed to part before her and close up again as she passed. The cobblestones were wet and slick under her feet. She heard a cat yowl plaintively. Braavos was a good city for cats, and they roamed everywhere, especially at night. In the fog all cats are grey, Mercy thought. In the fog all men are killers.</p>\n<p>She had never seen a thicker fog than this one. On the larger canals, the watermen would be running their serpent boats into one another, unable to make out any more than dim lights from the buildings to either side of them.</p>\n<p>Mercy passed an old man with a lantern walking the other way, and envied him his light. The street was so gloomy she could scarcely see where she was stepping. In the humbler parts of the city, the houses, shops, and warehouses crowded together, leaning on each other like drunken lovers, their upper stories so close that you could step from one balcony to the next. The streets below became dark tunnels where every footfall echoed. The small canals were even more hazardous, since many of the houses that lined them had privies jutting out over the water. Izembaro loved to give the Sealord’s speech fromThe Merchant’s Melancholy Daughter, about how “here the last Titan yet stands, astride the stony shoulders of his brothers,” but Mercy preferred the scene where the fat merchant shat on the Sealord’s head as he passed underneath in his gold-and-purple barge. Only in Braavos could something like that happen, it was said, and only in Braavos would Sealord and sailor alike howl with laughter to see it.</p>\n<p>The Gate stood close by the edge of Drowned Town, between the Outer Harbor and the Purple Harbor. An old warehouse had burnt there and the ground was sinking a little more each year, so the land came cheap. Atop the flooded stone foundation of the warehouse, Izembaro raised his cavernous playhall. The Dome and the Blue Lantern might enjoy more fashionable environs, he told his mummers, but here between the harbors they would never lack for sailors and whores to fill their pit. The Ship was close by, still pulling handsome crowds to the quay where she had been moored for twenty years, he said, and the Gate would flourish too.</p>\n<p>Time had proved him right. The Gate’s stage had developed a tilt as the building settled, their costumes were prone to mildew, and water snakes nested in the flooded cellar, but none of that troubled the mummers so long as the house was full.</p>\n<p>The last bridge was made of rope and raw planks, and seemed to dissolve into nothingness, but that was only the fog. Mercy scampered across, her heels ringing on the wood. The fog opened before her like a tattered grey curtain to reveal the playhouse. Buttery yellow light spilled from the doors, and Mercy could hear voices from within. Beside the entrance, Big Brusco had painted over the title of the last show, and writtenThe Bloody Hand in its place in huge red letters. He was painting a bloody hand beneath the words, for those who could not read. Mercy stopped to have a look. “That’s a nice hand,” she told him.</p>\n<p>“Thumb’s crooked.” Brusco dabbed at it with his brush. “King o’ the Mummers been asking after you.”</p>\n<p>“It was so dark I slept and slept.” When Izembaro had first dubbed himself the King of the Mummers, the company had taken a wicked pleasure in it, savoring the outrage of their rivals from the Dome and the Blue Lantern. Of late, though, Izembaro had begun to take his title too seriously. “He will only play kings now,” Marro said, rolling his eyes, “and if the play has no king in it, he would sooner not stage it at all.”</p>\n<p>The Bloody Hand offered two kings, the fat one and the boy. Izembaro would play the fat one. It was not a large part, but he had a fine speech as he lay dying, and a splendid fight with a demonic boar before that. Phario Forel had written it, and he had the bloodiest quill of all of Braavos.</p>\n<p>Mercy found the company assembled behind the stage, and slipped in between Daena and the Snapper at the back, hoping her late arrival would go unnoticed. Izembaro was telling everyone that he expected the Gate to be packed to the rafters this evening, despite the fog. “The King of Westeros is sending his envoy to do homage to the King of the Mummers tonight,” he told his troupe. “We will not disappoint our fellow monarch.”</p>\n<p>“We?” said the Snapper, who did all the costumes for the mummers. “Is there more than one of him, now?”</p>\n<p>“He’s fat enough to count for two,” whispered Bobono. Every mummer’s troupe had to have a dwarf. He was theirs. When he saw Mercy, he gave her a leer. “Oho,” he said, “there she is. Is the little girl all ready for her rape?” He smacked his lips.</p>\n<p>The Snapper smacked him in the head. “Be quiet.”</p>\n<p>The King of the Mummers ignored the brief commotion. He was still talking, telling the mummers how magnificent they must be. Besides the Westerosi envoy, there would be keyholders in the crowd this evening, and famous courtesans as well. He did not intend for them to leave with a poor opinion of the Gate. “It shall go ill for any man who fails me,” he promised, a threat he borrowed from the speech Prince Garin gives on the eve of battle in Wroth of the Dragonlords, Phario Forel’s first play.</p>\n<p>By the time Izembaro finally finished speaking, less than an hour remained before the show, and the mummers were all frantic and fretful by turns. The Gate rang to the sound of Mercy’s name.</p>\n<p>“Mercy,” her friend Daena implored, “Lady Stork has stepped on the hem of her gown again. Come help me sew it up.”</p>\n<p>“Mercy,” the Stranger called, “bring the bloody paste, my horn is coming loose.”</p>\n<p>“Mercy,” boomed Izembaro the Great himself, “what have you done with my crown, girl? I cannot make my entrance without my crown. How shall they know that I’m a king?”</p>\n<p>“Mercy,” squeaked the dwarf Bobono, “Mercy, something’s amiss with my laces, my cock keeps flopping out.”</p>\n<p>She fetched the sticky paste and fastened the Stranger’s left horn back onto his forehead. She found Izembaro’s crown in the privy where he always left it and helped him pin it to his wig, and then ran for needle and thread so the Snapper could sew the lace hem back onto the cloth-of-gold gown that the queen would wear in the wedding scene.</p>\n<p>And Bobono’s cock was indeed flopping out. It was made to flop out, for the rape. What a hideous thing, Mercy thought as she knelt before the dwarf to fix him. The cock was a foot long and as thick as her arm, big enough to be seen from the highest balcony. The dyer had done a poor job with the leather, though; the thing was a mottled pink and white, with a bulbous head the color of a plum. Mercy pushed it back into Bobono’s breeches and laced him back up. “Mercy,” he sang as she tied him tight, “Mercy, Mercy, come to my room tonight and make a man of me.”</p>\n<p>“I’ll make a eunuch of you if you keep unlacing yourself just so I’ll fiddle with your crotch.”</p>\n<p>“We were meant to be together, Mercy,” Bobono insisted. “Look, we’re just the same height.”</p>\n<p>“Only when I’m on my knees. Do you remember your first line?” It had only been a fortnight since the dwarf had lurched onto stage in his cups and opened The Anguish of the Archon with the grumpkin’s speech from The Merchant’s Lusty Lady. Izembaro would skin him alive if he made such a blunder again, and never mind how hard it was to find a good dwarf.</p>\n<p>“What are we playing, Mercy?” Bobono asked innocently.</p>\n<p>He is teasing me, Mercy thought. He’s not drunk tonight, he knows the show perfectly well. “We are doing Phario’s new Bloody Hand, in honor of the envoy from the Seven Kingdoms.”</p>\n<p>“Now I recall.” Bobono lowered his voice to a sinister croak. “The seven-faced god has cheated me,” he said. “My noble sire he made of purest gold, and gold he made my siblings, boy and girl. But I am formed of darker stuff, of bones and blood and clay, twisted into this rude shape you see before you.” With that, he grabbed at her chest, fumbling for a nipple. “You have no titties. How can I rape a girl with no titties?”</p>\n<p>She caught his nose between her thumb and forefinger and twisted. “You’ll have no nose until you get your hands off me.”</p>\n<p>“Owwwww,” the dwarf squealed, releasing her.</p>\n<p>“I’ll grow titties in a year or two.” Mercy rose, to tower over the little man. “But you’ll never grow another nose. You think of that, before you touch me there.”</p>\n<p>Bobono rubbed his tender nose. “There’s no need to get so shy. I’ll be raping you soon enough.”</p>\n<p>“Not until the second act.”</p>\n<p>“I always give Wendeyne’s titties a nice squeeze when I rape her in The Anguish of the Archon,” the dwarf complained. “She likes it, and the pit does too. You have to please the pit.”</p>\n<p>That was one of Izembaro’s “wisdoms,” as he liked to call them. You have to please the pit. “I bet it would please the pit if I ripped off the dwarf’s cock and beat him about the head with it,” Mercy replied. “That’s something they won’t have seen before.” Always give them something they haven’t seen before was another of Izembaro’s “wisdoms,” and one that Bobono had no easy answer for. “There, you’re done,” Mercy announced. “Now see if you can keep in your breeches till it’s needed.”</p>\n<p>Izembaro was calling for her again. Now he could not find his boar spear. Mercy found it for him, helped Big Brusco don his boar suit, checked the trick daggers just to make certain no one had replaced one with a real blade (someone had done that at the Dome once, and a mummer had died), and poured Lady Stork the little nip of wine she liked to have before each play. When all the cries of “Mercy, Mercy, Mercy” finally died away, she stole a moment for a quick peek out into the house.</p>\n<p>The pit was as full as ever she’d seen it, and they were enjoying themselves already, joking and jostling, eating and drinking. She saw a peddler selling chunks of cheese, ripping them off the wheel with his fingers whenever he found a buyer. A woman had a bag of wrinkled apples. Skins of wine were being passed from hand to hand, some girls were selling kisses, and one sailor was playing the sea pipes. The sad-eyed little man called Quill stood in the back, come to see what he could steal for one of his own plays. Cossomo the Conjurer had come as well, and on his arm was Yna, the one-eyed whore from the Happy Port, but Mercy could not know those two, and they would not know Mercy. Daena recognized some Gate regulars in the crowd, and pointed them out for her; the dyer Dellono with his pinched white face and mottled purple hands, Galeo the sausage-maker in his greasy leather apron, tall Tomarro with his pet rat on his shoulder. “Tomarro best not let Galeo see that rat,” Daena warned. “That’s the only meat he puts in them sausages, I hear.” Mercy covered her mouth and laughed.</p>\n<p>The balconies were filling too. The first and third levels were for merchants and captains and other respectable folk. The bravos preferred the fourth and highest, where the seats were cheapest. It was a riot of bright color up there, while down below more somber shades held sway. The second balcony was cut up into private boxes where the mighty could comport themselves in comfort and privacy, safely apart from the vulgarity above and below. They had the best view of the stage, and servants to bring them food, wine, cushions, whatever they might desire. It was rare to find the second balcony more than half full at the Gate; such of the mighty who relished a night of mummery were more inclined to visit the Dome or the Blue Lantern, where the offerings were considered subtler and more poetic.</p>\n<p>This night was different, though, no doubt on account of the Westerosi envoy. In one box sat three scions of Otharys, each accompanied by a famous courtesan; Prestayn sat alone, a man so ancient that you wondered how he ever reached his seat; Torone and Pranelis shared a box, as they shared an uncomfortable alliance; the Third Sword was hosting a half-dozen friends.</p>\n<p>“I count five keyholders,” said Daena.</p>\n<p>“Bessaro is so fat you ought to count him twice,” Mercy replied, giggling. Izembaro had a belly on him, but compared to Bessaro he was as lithe as a willow. The keyholder was so big he needed a special seat, thrice the size of a common chair.</p>\n<p>“They’re all fat, them Reyaans,” Daena said. “Bellies as big as their ships. You should have seen the father. He made this one look small. One time he was summoned to the Hall of Truth to vote, but when he stepped onto his barge it sank.” She clutched Mercy by the elbow. “Look, the Sealord’s box.” The Sealord had never visited the Gate, but Izembaro named a box for him anyway, the largest and most opulent in the house. “That must be the Westerosi envoy. Have you ever seen such clothes on an old man? And look, he’s brought the Black Pearl!”</p>\n<p>The envoy was slight and balding, with a funny grey wisp of a beard growing from his chin. His cloak was yellow velvet, and his breeches. His doublet was a blue so bright it almost made Mercy’s eyes water. Upon his breast a shield had been embroidered in yellow thread, and on the shield was a proud blue rooster picked out in lapis lazuli. One of his guards helped him to his seat, while two others stood behind him in the back of the box.</p>\n<p>The woman with him could not have been more than a third his age. She was so lovely that the lamps seemed to burn brighter when she passed. She had dressed in a low-cut gown of pale yellow silk, startling against the light brown of her skin. Her black hair was bound up in a net of spun gold, and a jet-and-gold necklace brushed against the top of her full breasts. As they watched, she leaned close to the envoy and whispered something in his ear that made him laugh. “They should call her the Brown Pearl,” Mercy said to Daena. “She’s more brown than black.”</p>\n<p>“The first Black Pearl was black as a pot of ink,” said Daena. “She was a pirate queen, fathered by a Sealord’s son on a princess from the Summer Isles. A dragon king from Westeros took her for his lover.”</p>\n<p>“I would like to see a dragon,” Mercy said wistfully. “Why does the envoy have a chicken on his chest?”</p>\n<p>Daena howled. “Mercy, don’t you know anything? It’s his siggle. In the Sunset Kingdoms all the lords have siggles. Some have flowers, some have fish, some have bears and elks and other things. See, the envoy’s guards are wearing lions.”</p>\n<p>It was true. There were four guards; big, hard-looking men in ringmail, with heavy Westerosi longswords sheathed at their hips. Their crimson cloaks were bordered in whorls of gold, and golden lions with red garnet eyes clasped each cloak at the shoulder. When Mercy glanced at the faces beneath the gilded, lion-crested helm, her belly gave a quiver.The gods have given me a gift. Her fingers clutched hard at Daena’s arm. “That guard. The one on the end, behind the Black Pearl.”</p>\n<p>“What of him? Do you know him?”</p>\n<p>“No.” Mercy had been born and bred in Braavos, how could she know some Westerosi? She had to think a moment. “It’s only… well, he’s fair to look on, don’t you think?” He was, in a rough-hewn way, though his eyes were hard.</p>\n<p>Daena shrugged. “He’s very old. Not so old as the other ones, but… he could be thirty. And Westerosi. They’re terrible savages, Mercy. Best stay well away from his sort.”</p>\n<p>“Stay away?” Mercy giggled. She was a giggly sort of girl, was Mercy. “No. I’ve got to get closer.” She gave Daena a squeeze and said, “If the Snapper comes looking for me, tell her that I went off to read my lines again.” She only had a few, and most were just, “Oh, no, no, no,” and “Don’t, oh don’t, don’t touch me,” and “Please, m’lord, I am still a maiden,” but this was the first time Izembaro had given her any lines at all, so it was only to be expected that poor Mercy would want to get them right.</p>\n<p>The envoy from the Seven Kingdoms had taken two of his guards into his box to stand behind him and the Black Pearl, but the other two had been posted just outside the door to make certain he was not disturbed. They were talking quietly in the Common Tongue of Westeros as she slipped up silently behind them in the darkened passage. That was not a language Mercy knew.</p>\n<p>“Seven hells, this place is damp,” she heard her guard complain. “I’m chilled to the bones. Where are the bloody orange trees? I always heard there were orange trees in the Free Cities. Lemons and limes. Pomegranates. Hot peppers, warm nights, girls with bare bellies. Where are the bare-bellied girls, I ask you?”</p>\n<p>“Down in Lys, and Myr, and Old Volantis,” the other guard replied. He was an older man, big-bellied and grizzled. “I went to Lys with Lord Tywin once, when he was Hand to Aerys. Braavos is north of King’s Landing, fool. Can’t you read a bloody map?”</p>\n<p>“How long do you think we’ll be here?”</p>\n<p>“Longer than you’d like,” the old man replied. “If he goes back without the gold the queen will have his head. Besides, I seen that wife of his. There’s steps in Casterly Rock she can’t go down for fear she’d get stuck, that’s how fat she is. Who’d go back to that, when he has his sooty queen?”</p>\n<p>The handsome guardsman grinned. “Don’t suppose he’ll share her with us, afterward?”</p>\n<p>“What, are you mad? You think he notices the likes of us? Bloody bugger don’t even get our names right half the time. Maybe it was different with Clegane.”</p>\n<p>“Ser wasn’t one for mummer shows and fancy whores. When Ser wanted a woman he took one, but sometimes he’d let us have her, after. I wouldn’t mind having a taste of that Black Pearl. You think she’s pink between her legs?”</p>\n<p>Mercy wanted to hear more, but there was no time. The Bloody Hand was about to start, and the Snapper would be looking for her to help with costumes. Izembaro might be the King of the Mummers, but the Snapper was the one that they all feared. Time enough for her pretty guardsman later.</p>\n<p>The Bloody Hand opened in a lichyard.</p>\n<p>When the dwarf appeared suddenly from behind a wooden tombstone, the crowd began to hiss and curse. Bobono waddled to the front of the stage and leered at them. “The seven-faced god has cheated me,” he began, snarling the words. “My noble sire he made of purest gold, and gold he made my siblings, boy and girl. But I am formed of darker stuff, of bones and blood and clay… “</p>\n<p>By then Marro had appeared behind him, gaunt and terrible in the Stranger’s long black robes. His face was black as well, his teeth red and shiny with blood, while ivory horns jutted upwards from his brow. Bobono could not see him, but the balconies could, and now the pit as well. The Gate grew deathly quiet. Marro moved forward silently.</p>\n<p>So did Mercy. The costumes were all hung, and the Snapper was busy sewing Daena into her gown for the court scene, so Mercy’s absence should not be noted. Quiet as a shadow, she slipped around the back again, up to where the guardsmen stood outside the envoy’s box. Standing in a darkened alcove, still as stone, she had a good look at his face. She studied it carefully, to be sure. Am I too young for him? she wondered. Too plain? Too skinny? She hoped he wasn’t the sort of man who liked big breasts on a girl. Bobono had been right about her chest. It would be best if I could take him back to my place, have him all to myself. But will he come with me?</p>\n<p>“You think it might be him?” the pretty one was saying.</p>\n<p>“What, did the Others take your wits?”</p>\n<p>“Why not? He’s a dwarf, ain’t he?”</p>\n<p>“The Imp weren’t the only dwarf in the world.”</p>\n<p>“Maybe not, but look here, everyone says how clever he was, true? So maybe he figures the last place his sister would ever look for him would be in some mummer show, making fun of himself. So he does just that, to tweak her nose.”</p>\n<p>“Ah, you’re mad.”</p>\n<p>“Well, maybe I’ll follow him after the mummery. Find out for myself.” The guardsman put a hand on the hilt of his sword. “If I’m right, I’ll be a ma lord, and if I’m wrong, well, bleed it, it’s just some dwarf.” He gave a bark of laughter.</p>\n<p>On stage, Bobono was bargaining with Marro’s sinister Stranger. He had a big voice for such a little man, and he made it ring off the highest rafters now. “Give me the cup,” he told the Stranger, “for I shall drink deep. And if it tastes of gold and lion’s blood, so much the better. As I cannot be the hero, let me be the monster, and lesson them in fear in place of love.”</p>\n<p>Mercy mouthed the last lines along with him. They were better lines than hers, and apt besides. He’ll want me or he won’t, she thought, so let the play begin. She said a silent prayer to the god of many faces, slipped out of her alcove, and flounced up to the guardsmen. Mercy, Mercy, Mercy. “My lords,” she said, “do you speak Braavosi? Oh, please, tell me you do.”</p>\n<p>The two guardsmen exchanged a look. “What’s this thing going on about?” the older one asked. “Who is she?”</p>\n<p>“One of the mummers,” said the pretty one. He pushed his fair hair back off his brow and smiled at her. “Sorry, sweetling, we don’t speak your gibble-gabble.”</p>\n<p>Fuss and feathers, Mercy thought, they only know the Common Tongue. That was no good. Give it up or go ahead. She could not give it up. She wanted him so bad. “I know your tongue, a little,” she lied, with Mercy’s sweetest smile. “You are lords of Westeros, my friend said.”</p>\n<p>The old one laughed. “Lords? Aye, that’s us.”</p>\n<p>Mercy looked down at her feet, so shy. “Izembaro said to please the lords,” she whispered. “If there is anything you want, anything at all… “</p>\n<p>The two guardsmen exchanged a look. Then the handsome one reached out and touched her breast. “Anything?“</p>\n<p>“You’re disgusting,” said the older man.</p>\n<p>“Why? If this Izembaro wants to be hospitable, it would be rude to refuse.” He gave her nipple a tweak through the fabric of her dress, just the way the dwarf had done when she was fixing his cock for him. “Mummers are the next best thing to whores.”</p>\n<p>“Might be, but this one is a child.”</p>\n<p>“I am not,” lied Mercy. “I’m a maiden now.”</p>\n<p>“Not for long,” said the comely one. “I’m Lord Rafford, sweetling, and I know just what I want. Hike up those skirts now, and lean back against that wall.”</p>\n<p>“Not here,” Mercy said, brushing his hands away. “Not where the play is on. I might cry out, and Izembaro would be mad.”</p>\n<p>“Where, then?”</p>\n<p>“I know a place.”</p>\n<p>The older guard was scowling. “What, you think can just scamper off? What if his knightliness comes looking for you?”</p>\n<p>“Why would he? He’s got a show to watch. And he’s got his own whore, why shouldn’t I have mine? This won’t take long.”</p>\n<p>No, she thought, it won’t. Mercy took him by the hand, led him through the back and down the steps and out into the foggy night. “You could be a mummer, if you wanted,” she told him, as he pressed her up against the wall of the playhouse.</p>\n<p>“Me?” The guardsman snorted. “Not me, girl. All that bloody talking, I wouldn’t remember half of it.”</p>\n<p>“It’s hard at first,” she admitted. “But after a time it comes easier. I could teach you to say a line. I could.”</p>\n<p>He grabbed her wrist. “I’ll do the teaching. Time for your first lesson.” He pulled her hard against him and kissed her on the lips, forcing his tongue into her mouth. It was all wet and slimy, like an eel. Mercy licked it with her own tongue, then broke away from him, breathless. “Not here. Someone might see. My room’s not far, but hurry. I have to be back before the second act, or I’ll miss my rape.”</p>\n<p>He grinned. “No fear o’ that, girl.” But he let her pull him after her. Hand in hand, they went racing through the fog, over bridges and through alleys and up five flights of splintery wooden stairs. The guardsman was panting by the time they burst through the door of her little room. Mercy lit a tallow candle, then danced around at him, giggling. “Oh, now you’re all tired out. I forgot how old you were, m’lord. Do you want to take a little nap? Just lie down and close your eyes, and I’ll come back after the Imp’s done raping me.”</p>\n<p>“You’re not going anywhere.” He pulled her roughly to him. “Get those rags off, and I’ll show you how old I am, girl.”</p>\n<p>“Mercy,” she said. “My name is Mercy. Can you say it?”</p>\n<p>“Mercy,” he said. “My name is Raff.”</p>\n<p>“I know.” She slipped her hand between his legs, and felt how hard he was through the wool of his breeches.</p>\n<p>“The laces,” he urged her. “Be a sweet girl and undo them.” Instead she slid her finger down along the inside of his thigh. He gave a grunt. “Damn, be careful there, you — “</p>\n<p>Mercy gave a gasp and stepped away, her face confused and frightened. “You’rebleeding.”</p>\n<p>“Wha — ” He looked down at himself. “Gods be good. What did you do to me, you little cunt?” The red stain spread across his thigh, soaking the heavy fabric.</p>\n<p>“Nothing,” Mercy squeaked. “I never… oh, oh, there’s so much blood. Stop it, stop it, you’re scaring me.”</p>\n<p>He shook his head, a dazed look on his face. When he pressed his hand to his thigh, blood squirted through his fingers. It was running down his leg, into his boot. He doesn’t look so comely now, she thought. He just looks white and frightened.</p>\n<p>“A towel,” the guardsman gasped. “Bring me a towel, a rag, press down on it. Gods. I feel dizzy.” His leg was drenched with blood from the thigh down. When he tried to put his weight on it, his knee buckled and he fell. “Help me,” he pleaded, as the crotch of his breeches reddened. “Mother have mercy, girl. A healer… run and find a healer, quick now.”</p>\n<p>“There’s one on the next canal, but he won’t come. You have to go to him. Can’t you walk?”</p>\n<p>“Walk?” His fingers were slick with blood. “Are you blind, girl? I’m bleeding like a stuck pig. I can’t walk on this.”</p>\n<p>“Well,” she said, “I don’t know how you’ll get there, then.”</p>\n<p>“You’ll need to carry me.”</p>\n<p>See? thought Mercy. You know your line, and so do I.</p>\n<p>“Think so?” asked Arya, sweetly.</p>\n<p>Raff the Sweetling looked up sharply as the long thin blade came sliding from her sleeve. She slipped it through his throat beneath the chin, twisted, and ripped it back out sideways with a single smooth slash. A fine red rain followed, and in his eyes the light went out.</p>\n<p>“Valar morghulis,” Arya whispered, but Raff was dead and did not hear. She sniffed. I should have helped him down the steps before I killed him. Now I’ll need to drag him all the way to the canal and roll him in. The eels would do the rest.</p>\n<p>“Mercy, Mercy, Mercy,” she sang sadly. A foolish, giddy girl she’d been, but good hearted. She would miss her, and she would miss Daena and the Snapper and the rest, even Izembaro and Bobono. This would make trouble for the Sealord and the envoy with the chicken on his chest, she did not doubt.</p>\n<p>She would think about that later, though. Just now, there was no time. I had best run. Mercy still had some lines to say, her first lines and her last, and Izembaro would have her pretty little empty head if she were late for her own rape.</p>"},{"title":"ARIANNE","date":"2016-03-31T15:07:07.000Z","comments":1,"_content":"## ARIANNEE\\--EXCERPT FROM THE WINDS OF WINTER\n\nThey struck out north by northwest, across drylands and parched plains and pale sands toward Ghost Hill, the stronghold of House Toland, where the ship that would take them across the Sea of Dorne awaited them.  \"Send a raven whenever you have news,\" Prince Doran told her, \"but report only what you know to be true.  We are lost in fog here, besieged by rumors, falsehoods, and traveler’s tales.  I dare not act until I know for a certainty what is happening.\"\n\nWar is happening, though Arianne, and this time Dorne will not be spared.  \"Doom and death are coming,\" Ellaria Sand had warned them, before she took her own leave from Prince Doran.  \"It is time for my little snakes to scatter, the better to survive the carnage.\"  Ellaria was returning to her father’s seat at Hellholt.  With her went her daughter Loreza, who had just turned seven.  Dorea remained at the Water Gardens, one child amongst a hundred.Obella was to be dispatched to Sunspear, to serve as a cupbearer to the wife of the castellan, Manfrey Martell.\n<!-- more -->\nAnd Elia Sand, oldest of the four girls that Prince Oberyn had fathered on Ellaria, would cross the Sea of Dorne with Arianne.  \"As a lady, not a lance,\" her mother said firmly, but like all the Sand Snakes, Elia had her own mind.\n\nThey crossed the sands in two long days and the better part of two nights, stopping thrice to change their horses.  It was a lonely time for Arianne, surrounded by so many strangers.  Elia was her cousin, but half a child, and Daemon Sand… things had never been the same between her and the Bastard of Godsgrace after her father refused his offer for her hand.  He was a boy then, and bastard born, no fit consort for a princess of Dorne, he should have known better.  And it was my father’s will, not mine.  The rest of her companions she hardly knew at all.    \n\nArianne missed her friends.  Drey and Garin and her sweet Spotted Slyva had been a part of her since she was little, trusted confidants who had shared her dreams and secrets, cheered her when she was sad, helped her face her fears.  One of them had betrayed her, but she missed them all the same.  It was my own fault.  Arianne had made them part of her plot to steal off with Myrcella Baratheon and crown her queen, an act of rebellion meant to force her father’s hand, but someone’s loose tongue had undone her.  The clumsy conspiracy had accomplished nothing, except to cost poor Myrcella part of her face, and Ser Arys Oakheart his life.\n\nArianne missed Ser Arys too, more than she ever would have thought.  He loved me madly, she told herself, yet I was never more than fond of him.  I made use of him in mybed and in my plot, took his love and took his honor, gave him nothing but my body.  In the end he could not live with what we’d done.  Why else would her white knight have charged right into Areo Hotah’s longaxe, to die the way he did?  I was a foolish willful girl, playing at the game of thrones like a drunkard rolling dice.  \n\nThe cost of her folly had been dear.  Drey had been sent across the world to Norvos, Garin exiled to Tyrosh for two years, her sweet silly smiling Slyva married off to Eldon Estermont, a man old enough to be her grandsire.  Ser Arys had paid with his life’s blood, Myrcella with an ear.  \n\nOnly Ser Gerold Dayne had escaped unscathed.  Darkstar.  If Myrcella’s horse had not shied at the last instant, his longsword would have opened her from chest to waist instead just taking off her ear.  Dayne was her most grievous sin, the one that Arianne most regretted.  With one stroke of his sword, he had changed her botched plot into something foul and bloody.  If the gods were good, by now Obara Sand had treed him in his mountain fastness and put an end to him.\n\nShe said as much to Daemon Sand that first night, as they made camp.  \"Be careful what you pray for, princess,\" he replied.  \"Darkstar could put an end to Lady Obara just as easily.\"\n\n\"She has Areo Hotah with her.\"  Prince Doran’s captain of guards had dispatched Ser Arys Oakheart with a single blow, though the Kingsguard were supposed to be the finest knights in all the realm.  \"No man can stand against Hotah.\"\n\n\"Is that what Darkstar is?  A man?\"  Ser Daemon grimaced.  \"A man would not have done what he did to Princess Myrcella.  Ser Gerold is more a viper than your uncle ever was.  Prince Oberyn could see that he was poison, he said so more than once.  It’s just a pity that he never got around to killing him.\"\n\nPoison, thought Arianne.  Yes.  Pretty poison, though.  That was how he’d fooled her.  Gerold Dayne was hard and cruel, but so fair to look upon that the princess had not believed half the tales she’d heard of him.  Pretty boys had ever been her weakness, particularly the ones who were dark and dangerous as well.  That was before, when I was just a girl, she told herself.  I am a woman now, my father’s daughter.  I have learned that lesson.\n\nCome break of day, they were off again.  Elia Sand led the way, her black braid flying behind her as she raced across the dry, cracked plains and up into the hills.  The girl was mad for horses, which might be why she often smelled like one, to the despair of her mother.  Sometimes Arianne felt sorry for Ellaria.  Four girls, and every one of them her father’s daughter.  \n\nThe rest of the party kept a more sedate pace.  The princess found herself riding beside Ser Daemon, remembering other rides when they were younger, rides that often ended in embraces.  When she found herself stealing glances at him, tall and gallant in the saddle, Arianne reminded herself that she was heir to Dorne, and him no more than her shield.  \"Tell me what you know of this Jon Connington,\" she commanded.\n\n\"He’s dead,\" said Daemon Sand.  \"He died in the Disputed Lands.  Of drink, I’ve heard it said.\"      \n\n\"So a dead drunk leads this army?\"\n\n\"Perhaps this Jon Connington is a son of that one.  Or just some clever sellsword who has taken on a dead man’s name.\"\n\n\"Or he never died at all.\"  Could Connington have been pretending to be dead for all these years?  That would require patience worthy of her father.  The thought made Arianne uneasy.  Treating with a man that subtle could be perilous.  \"What was he like before he… before he died?\"\n\n\"I was a boy at Godsgrace when he was sent into exile.  I never knew the man.\"\n\n\"Then tell me what you’ve heard of him from others.\"\n\n\"As my princess commands.  Connington was Lord of Griffin’s Roost when Griffin’s Roost was still a lordship worth the having.  Prince Rhaegar’s squire, or one of them.  Later Prince Rhaegar’s friend and companion.  The Mad King named him Hand during Robert’s Rebellion, but he was defeated at Stoney Sept in the Battle of the Bells, and Robert slipped away.  King Aerys was wroth, and sent Connington into exile.  There he died.\"\n\n\"Or not.\"  Prince Doran had told her all of that.  There must be more.  \"Those are just the things he did.  I know all that.  What sort of man was he?  Honest and honorable, venal and grasping, proud?\"\n\n\"Proud, for a certainty.  Even arrogant.  A faithful friend to Rhaegar, but prickly with others.  Robert was his liege, but I’ve heard it said that Connington chafed at serving such a lord.  Even then, Robert was known to be fond of wine and whores.\"\n\n\"No whores for Lord Jon, then?\"\n\n\"I could not say.  Some men keep their whoring secret.\"\n\n\"Did he have a wife?  A paramour?\"\n\nSer Daemon shrugged.  \"Not that I have ever heard.\"\n\nThat was troubling too.  Ser Arys Oakheart had broken his vows for her, but it did not sound as if Jon Connington could be similarly swayed.  Can I match such a man with words alone?\n\nThe princess lapsed into silence, all the while pondering what she would find at journey’s end.  That night when they made camp, she crept into the tent she shared with Jayne Ladybright and Elia Sand and slipped the bit of parchment out of her sleeve to read the words again.\n\n>*To Prince Doran of House Martell,*  \n{% centerquote %}\nYou will remember me, I pray.I knew your sister well,and was a leal servant of your good-brother.I grieve for them as you do.I did not die, no more than did your sister’s son.To save his life we kept him hidden,but the time for hiding is done.  A dragon has returned to Westeros to claim his birthright and seek vengeance for his father, and for the princess Elia, his mother.In her name I turn to Dorne.Do not forsake us.{% endcenterquote %}\n>Jon Connington  \n>Lord of Griffin’s Roost  \n>Hand of the True King\n\n\nArianne read the letter thrice, then rolled it up and tucked it back into her sleeve.  A dragon has returned to Westeros, but not the dragon my father was expecting.  Nowhere in the words was there a mention of Daenerys Stormborn… nor of Prince Quentyn, her brother, who had been sent to seek the dragon queen.  The princess remembered how her father had pressed the onyx cyvasse piece into her palm, his voice hoarse and low as he confessed his plan.  A long and perilous voyage, with an uncertain welcome at its end, he had said.  He has gone to bring us back our heart’s desire.  Vengeance.  Justice.  Fire and blood.\n\nFire and blood was what Jon Connington (if indeed it was him) was offering as well.  Or was it?  \"He comes with sellswords, but no dragons,\" Prince Doran had told her, the night the raven came.  \"The Golden Company is the best and largest of the free companies, but ten thousand mercenaries cannot hope to win the Seven Kingdoms.  Elia’s son… I would weep for joy if some part of my sister had survived, but what proof do we have that this is Aegon?\"  His voice broke when he said that.  \"Where are the dragons?\" he asked.  \"Where is Daenerys?\" and Arianne knew that he was really saying, \"Where is my son?\"\n\nIn the Boneway and the Prince’s Pass, two Dornish hosts had massed, and there they sat, sharpening their spears, polishing their armor, dicing, drinking, quarreling, their numbers dwindling by the day, waiting, waiting, waiting for the Prince of Dorne to loose them on the enemies of House Martell.  Waiting for the dragons.  For fire and blood.  For me.  One word from Arianne and those armies would march… so long as that word wasdragon.  If instead the word she sent was war, Lord Yronwood and Lord Fowler and their armies would remain in place.  The Prince of Dorne was nothing if not subtle; here warmeant wait.  \n\nAt mid-morning on the third day Ghost Hill loomed up before them, its chalk-white walls shining against the deep blue of the Sea of Dorne.  From the square towers at the castle’s corners flew the banners of House Toland; a green dragon biting its own tail, upon a golden field.  The sun-and-spear of House Martell streamed atop the great central keep, gold and red and orange, defiant.\n\nRavens had flown ahead to warn Lady Toland of their coming, so the castle gates were open, and Nymella’s eldest daughter rode forth with her steward to meet them near the bottom of the hill.  Tall and fierce, with a blaze of bright red hair tumbling about her shoulders, Valena Toland greeted Arianne with a shout of, \"Come at last, have you?  How slow are those horses?\"\n\n\"Swift enough to outrun yours to the castle gates.\"    \n\n\"We will see about that.\"  Valena wheeled her big red around and put her heels into him, and the race was on, through the dusty lanes of the village at the bottom of the hill, as chickens and villagers alike scrambled out of their path.  Arianne was three horse lengths behind by the time she got her mare up to a gallop, but had closed to one halfway up the slope.  The two of them were side-by-side as they thundered towards the gatehouse, but five yards from the gates Elia Sand came flying from the cloud of dust behind them to rush past both of them on her black filly.\n\n\"Are you half horse, child?\" Valena asked, laughing, in the yard.  \"Princess, did you bring a stable girl?\"\n\n\"I’m Elia,\" the girl announced.  \"Lady Lance.\"\n\nWhoever hung that name on her has much to answer for.  Like as not it had been Prince Oberyn, though, and the Red Viper had never answered to anyone but himself.\n\n\"The girl jouster,\" Valena said.  \"Yes, I’ve heard of you.  Since you were the first to the yard, you’ve won the honor of watering and bridling the horses.\"\n\n\"And after that find the bath house,\" said Princess Arianne.  Elia was chalk and dust from heels to hair.  \n\nThat night Arianne and her knights supped with Lady Nymella and her daughters in the great hall of the castle.  Teora, the younger girl, had the same red hair as her sister, but elsewise could not have been more different.  Short, plump, and so shy she might have passed for a mute, she displayed more interest in the spiced beef and honeyed duck than in the comely young knights at the table, and seemed content to let her lady mother and her sister speak for House Toland.  \n\n\"We have heard the same tales here that you have heard at Sunspear,\" Lady Nymella told them as her serving man poured the wine.  \"Sellswords landing on Cape Wrath, castles under siege or being taken, crops seized or burned.  Where these men come from and who they are, no one is certain.\"\n\n\"Pirates and adventurers, we heard at first,\" said Valena.  \"Then it was supposed to be the Golden Company.  Now it’s said to be Jon Connington, the Mad King’s Hand, come back from the grave to reclaim his birthright.  Whoever it is, Griffin’s Roost has fallen to them.  Rain House, Crow’s Nest, Mistwood, even Greenstone on its island.  All taken.\"\n\nArianne’s thoughts went at once to her sweet Spotted Slyva.  \"Who would want Greenstone?  Was there a battle?\"\n\n\"Not as we have heard, but all the tales are garbled.\"\n\n\"Tarth has fallen too, some fisherfolk will tell you,\" said Valena.  \"These sellswords now hold most of Cape Wrath and half the Stepstones.  We hear talk of elephants in the rainwood.\"\n\n\"Elephants?\"  Arianne did not know what to think of that.  \"Are you certain?  Not dragons?\"\n\n\"Elephants,\" Lady Nymella said firmly.\n\n\"And krakens off the Broken Arm, pulling under crippled galleys,\" said Valena.  \"The blood draws them to the surface, our maester claims.  There are bodies in the water.  A few have washed up on our shores.  And that’s not half of it.  A new pirate king has set up on Torturer’s Deep.  The Lord of the Waters, he styles himself.  This one has real warships, three-deckers, monstrous large.  You were wise not to come by sea.  Since the Redwyne fleet passed through the Stepstones, those waters are crawling with strange sails, all the way north to the Straights of Tarth and Shipbreaker’s Bay.  Myrmen, Volantenes, Lyseni, even reavers from the Iron Islands.  Some have entered the Sea of Dorne to land men on the south shore of Cape Wrath.  We found a good fast ship for you, as your father commanded, but even so… be careful.\"\n\nIt is true, then.  Arianne wanted to ask after her brother, but her father had urged her to watch every word.  If these ships had not brought Quentyn home again with his dragon queen, best not to mention him.  Only her father and a few of his most trusted men knew about her brother’s mission to Slaver’s Bay.  Lady Toland and her daughters were not amongst them.  If it were Quentyn, he would have brought Daenerys back to Dorne, surely.  Why would he risk a landing on Cape Wrath, amongst the stormlords?  \n\n\"Is Dorne at risk?\" Lady Nymella asked.  \"I confess, each time I see a strange sail my heart leaps to my throat.  What if these ships turn south?  The best part of the Toland strength is with Lord Yronwood in the Boneway.  Who will defend Ghost Hill if these strangers land upon our shores?  Should I call my men home?\"\n\n\"Your men are needed where they are, my lady,\" Daemon Sand assured her.  Arianne was quick to nod.  Any other counsel could well lead to Lord Yronwood’s host unravelling like an old tapestry as each man rushed home to defend his own lands against supposed enemies who might or might not ever come.  \"Once we know beyond a doubt whether these be friends or foes, my father will know what to do,\" the princess said.\n\nIt was then that pasty, pudgy Teora raised her eyes from the creamcakes on her plate.  \"It is dragons.\"      \n\n\"Dragons?\"  said her mother.  \"Teora, don’t be mad.\"\n\n\"I’m not.  They’re coming.\"\n\n\"How could you possibly know that?\" her sister asked, with a note of scorn in her voice.\n\n\"One of your little dreams?\"\n\nTeora gave a tiny nod, chin trembling.  \"They were dancing.  In my dream.  And everywhere the dragons danced the people died.\"\n\n\"Seven save us.\"  Lady Nymella gave an exasperated sigh.\n\n\"If you did not eat so many creamcakes you would not have such dreams.  Rich foods are not for girls your age, when your humors are so unbalanced.  Maester Toman says — \"\n\n\"I hate Maester Toman,\" Teora said.  Then she bolted from the table, leaving her lady mother to make apologies for her.\n\n\"Be gentle with her, my lady,\" Arianne said.  \"I remember when I was her age.  My father despaired of me, I’m sure.\"  \n\n\"I can attest to that.\"  Ser Daemon took a sip of wine and said, \"House Toland has a dragon on its banners.\"  \n\n\"A dragon eating its own tail, aye,\" Valena said.  \"From the days of Aegon’s Conquest.  He did not conquer here.  Elsewhere he burned his foes, him and his sisters, but here we melted away before them, leaving only stone and sand for them to burn.  And round and round the dragons went, snapping at their tails for want of any other food, till they were tied in knots.\"\n\n\"Our forebears played their part in that,\" Lady Nymella said proudly.  \"Bold deeds were done, and brave men died.  All of it was written down by the maesters who served us.  We have books, if my princess would like to know more.\"\n\n\"Some other time, perhaps,\" said Arianne.\n\nAs Ghost Hill slept that night, the princess donned a hooded cloak against the chill and and walked the castle battlements to clear her thoughts.  Daemon Sand found her leaning on a parapet and gazing out to sea, where the moon was dancing on the water.  \"Princess,\" he said.  \"You ought to be abed.\"\n\n\"I could say the same of you.\"  Arianne turned to gaze upon his face.  A good face, she decided.  The boy I knew has become a handsome man.  His eyes were as blue as a desert sky, his hair the light brown of the sands they had just crossed.  A close-cropped beard followed the thin of a strong jaw, but could not quite hide the dimples when he smiled.  I always loved his smile.\n\nThe Bastard of Godsgrace was one of Dorne’s finest swords as well, as might be expected from one who had been Prince Oberyn’s squire and had received his knighthood from the Red Viper himself.  Some said that he had been her uncle’s lover too, though seldom to his face.  Arianne did not know the truth of that.  He had been her lover, though.  At fourteen she had given him her maidenhead.  Daemon had not been much older, so their couplings had been as clumsy as they were ardent.  Still, it had been sweet.  \n\nArianne gave him her most seductive smile.  \"We might share a bed together.\"\n\nSer Daemon’s face was stone.  \"Have you forgotten, princess?  I am bastard born.\"  He took her hand in his.  \"If I am unworthy of this hand, how can I be worthy of your cunt?\"\n\nShe snatched her hand away.  \"You deserve a slap for that.\"  \n\n\"My face is yours.  Do what you will.\"\n\n\"What I will you will not, it seems.  So be it.  Talk with me instead.  Could this truly be Prince Aegon?\"\n\n\"Gregor Clegane ripped Aegon out of Elia’s arms and smashed his head against a wall,\" Ser Daemon said.  \"If Lord Connington’s prince has a crushed skull, I will believe that Aegon Targaryen has returned from the grave.  Elsewise, no.  This is some feigned boy, no more.  A sellsword’s ploy to win support.\"\n\nMy father fears the same.  \"If not, though… if this truly is Jon Connington, if the boy is Rhaegar’s son… \"\n\n\"Are you hoping that he is, or that he’s not?\"\n\n\"I… it would give great joy to my father if Elia’s son were still alive.  He loved his sister well.\"\n\n\"It was you I asked about, not your father.\"\n\nSo it was.  \"I was seven when Elia died.  They say I held her daughter Rhaenys once, when I was too young to remember.  Aegon will be a stranger to me, whether true or false.\"  The princess paused.  \"We looked for Rhaegar’s sister, not his son.\"  Her father had confided in Ser Daemon when he chose him as his daughter’s shield; with him at least she could speak freely.  \"I would sooner it were Quentyn who’d returned.\"\n\n\"Or so you say,\" said Daemon Sand.  \"Good night, princess.\"  He bowed to her, and left her standing there.\n\nWhat did he mean by that?  Arianne watched him walk away.  What sort of sister would I be, if I did not want my brother back?  It was true, she had resented Quentyn for all those years that she had thought their father meant to name him as his heir in place of her, but that had turned out to be just a misunderstanding.  She was the heir to Dorne, she had her father’s word on that.  Quentyn would have his dragon queen, Daenerys.\n\nIn Sunspear hung a portrait of the Princess Daenerys who had come to Dorne to marry one of Arianne’s forebears.  In her younger days Arianne had spent hours gazing at it, back when she was just a pudgy flat-chested girl on the cusp of maidenhood who prayed every night for the gods to make her pretty.  A hundred years ago, Daenerys Targaryen came to Dorne to make a peace.  Now another comes to make a war, and my brother will be her king and consort.King Quentyn.  Why did that sound so silly?  \n\nAlmost as silly as Quentyn riding on a dragon.  Her brother was an earnest boy,well-behaved and dutiful, but dull.  And plain, so plain.  The gods had given Arianne the beauty she had prayed for, but Quentyn must have prayed for something else.  His head was overlarge and sort of square, his hair the color of dried mud.  His shoulders slumped as well, and he was too thick about the middle.  He looks too much like Father.\n\n\"I love my brother,\" said Arianne, though only the moon could hear her.  Though if truth be told, she scarcely knew him.  Quentyn had been fostered by Lord Anders of House Yronwood, the Bloodroyal, the son of Lord Ormond Yronwood and grandson of Lord Edgar.  In his youth her uncle Oberyn had fought a duel with Edgar, had given him a wound that mortified and killed him.  Afterward men called him ‘the Red Viper,’ and spoke of poison on his blade.  The Yronwoods were an ancient house, proud and powerful.  Before the coming of the Rhoynar they had been kings over half of Dorne, with domains that dwarfed those of House Martell.  Blood feud and rebellion would surely have followed Lord Edgar’s death, had not her father acted at once.  The Red Viper went to Oldtown, thence across to the narrow sea to Lys, though none dared call it exile.  And in due time, Quentyn was given to Lord Anders to foster as a sign of trust.  That helped to heal the breach between Sunspear and the Yronwoods, but it had opened new ones between Quentyn and the Sand Snakes… and Arianne had always been closer to her cousins than to her distant brother.\n\n\"We are still the same blood, though,\" she whispered.  \"Of course I want my brother home.  I do.\"  The wind off the sea was raising gooseprickles all up and down her arms.  Arianne pulled her cloak about herself, and went off to seek her bed.\n\nTheir ship was called the Peregrine.  They sailed upon the morning tide.  The gods were good to them, the sea calm.  Even with good winds, the crossing took a day and a night.  Jayne Ladybright grew greensick and spent most of the voyage spewing, which Elia Sand seemed to find hilarious.  \"Someone needs to spank that child,\" Joss Hood was heard to say… but Elia was amongst those who heard him say it.\n\n\"I am almost a woman grown, ser,\" she responded haughtily.  \"I’ll let you spank me, though…  but first you’ll need to tilt with me, and knock me off my horse.\"\n\n\"We are on a ship, and without horses,\" Joss replied.\n\n\"And ladies do not joust,\" insisted Ser Garibald Shells, a far more serious and proper young man than his companion.\n\n\"I do.  I’m Lady Lance.\"\n\nArianne had heard enough.  \"You may be a lance, but you are no lady.  Go below and stay there till we reach land.\"\n\nElsewise the crossing was uneventful.  At dusk they spied a galley in the distance, her oars rising and falling against the evening stars, but she was moving away from them, and soon dwindled and was gone.  Arianne played a game of cyvasse with Ser Daemon, and another one with Garibald Shells, and somehow managed to lose both.  Ser Garibald was kind enough to say that she played a gallant game, but Daemon mocked her.  \"You have other pieces beside the dragon, princess.  Try moving them sometime.\"\n\n\"I like the dragon.\"  She wanted to slap the smile off his face.  Or kiss it off, perhaps.  The man was as smug as he was comely.  Of all the knights in Dorne, why did my father chose this one to be my shield?  He knows our history.  \"It is just a game.  Tell me of Prince Viserys.\"\n\n\"The Beggar King?\"  Ser Daemon seemed surprised.  \n\n\"Everyone says that Prince Rhaegar was beautiful.  Was Viserys beautiful as well?\"\n\n\"I suppose.  He was Targaryen.  I never saw the man.\"\n\nThe secret pact that Prince Doran had made all those years called for Arianne to be wed to Prince Viserys, not Quentyn to Daenerys.  It had all come undone on the Dothraki sea, when he was murdered.  Crowned with a pot of molten gold.  \"He was killed by a Dothraki khal,\" said Arianne.  \"The dragon queen’s own husband.\"\n\n\"So I’ve heard.  What of it?\"      \n\n\"Just… why did Daenerys let it happen?  Viserys was her brother.  All that remained of her own blood.\"\n\n\"The Dothraki are a savage folk.  Who can know why they kill?  Perhaps Viserys wiped his arse with the wrong hand.\"\n\nPerhaps, thought Arianne, or perhaps Daenerys realized that once her brother was crowned and wed to me, she would be doomed to spend the rest of her life sleeping in a tent and smelling like a horse.  \"She is the Mad King’s daughter,\" the princess said.  \"How do we do know — \"\n\n\"We cannot know,\" Ser Daemon said.  \"We can only hope.\"\n","source":"_posts/ARIANNE.md","raw":"---\ntitle: ARIANNE\ndate: 2016-03-31 23:07:07\ntags: 冰与火之歌\ncomments: true\n---\n## ARIANNEE\\--EXCERPT FROM THE WINDS OF WINTER\n\nThey struck out north by northwest, across drylands and parched plains and pale sands toward Ghost Hill, the stronghold of House Toland, where the ship that would take them across the Sea of Dorne awaited them.  \"Send a raven whenever you have news,\" Prince Doran told her, \"but report only what you know to be true.  We are lost in fog here, besieged by rumors, falsehoods, and traveler’s tales.  I dare not act until I know for a certainty what is happening.\"\n\nWar is happening, though Arianne, and this time Dorne will not be spared.  \"Doom and death are coming,\" Ellaria Sand had warned them, before she took her own leave from Prince Doran.  \"It is time for my little snakes to scatter, the better to survive the carnage.\"  Ellaria was returning to her father’s seat at Hellholt.  With her went her daughter Loreza, who had just turned seven.  Dorea remained at the Water Gardens, one child amongst a hundred.Obella was to be dispatched to Sunspear, to serve as a cupbearer to the wife of the castellan, Manfrey Martell.\n<!-- more -->\nAnd Elia Sand, oldest of the four girls that Prince Oberyn had fathered on Ellaria, would cross the Sea of Dorne with Arianne.  \"As a lady, not a lance,\" her mother said firmly, but like all the Sand Snakes, Elia had her own mind.\n\nThey crossed the sands in two long days and the better part of two nights, stopping thrice to change their horses.  It was a lonely time for Arianne, surrounded by so many strangers.  Elia was her cousin, but half a child, and Daemon Sand… things had never been the same between her and the Bastard of Godsgrace after her father refused his offer for her hand.  He was a boy then, and bastard born, no fit consort for a princess of Dorne, he should have known better.  And it was my father’s will, not mine.  The rest of her companions she hardly knew at all.    \n\nArianne missed her friends.  Drey and Garin and her sweet Spotted Slyva had been a part of her since she was little, trusted confidants who had shared her dreams and secrets, cheered her when she was sad, helped her face her fears.  One of them had betrayed her, but she missed them all the same.  It was my own fault.  Arianne had made them part of her plot to steal off with Myrcella Baratheon and crown her queen, an act of rebellion meant to force her father’s hand, but someone’s loose tongue had undone her.  The clumsy conspiracy had accomplished nothing, except to cost poor Myrcella part of her face, and Ser Arys Oakheart his life.\n\nArianne missed Ser Arys too, more than she ever would have thought.  He loved me madly, she told herself, yet I was never more than fond of him.  I made use of him in mybed and in my plot, took his love and took his honor, gave him nothing but my body.  In the end he could not live with what we’d done.  Why else would her white knight have charged right into Areo Hotah’s longaxe, to die the way he did?  I was a foolish willful girl, playing at the game of thrones like a drunkard rolling dice.  \n\nThe cost of her folly had been dear.  Drey had been sent across the world to Norvos, Garin exiled to Tyrosh for two years, her sweet silly smiling Slyva married off to Eldon Estermont, a man old enough to be her grandsire.  Ser Arys had paid with his life’s blood, Myrcella with an ear.  \n\nOnly Ser Gerold Dayne had escaped unscathed.  Darkstar.  If Myrcella’s horse had not shied at the last instant, his longsword would have opened her from chest to waist instead just taking off her ear.  Dayne was her most grievous sin, the one that Arianne most regretted.  With one stroke of his sword, he had changed her botched plot into something foul and bloody.  If the gods were good, by now Obara Sand had treed him in his mountain fastness and put an end to him.\n\nShe said as much to Daemon Sand that first night, as they made camp.  \"Be careful what you pray for, princess,\" he replied.  \"Darkstar could put an end to Lady Obara just as easily.\"\n\n\"She has Areo Hotah with her.\"  Prince Doran’s captain of guards had dispatched Ser Arys Oakheart with a single blow, though the Kingsguard were supposed to be the finest knights in all the realm.  \"No man can stand against Hotah.\"\n\n\"Is that what Darkstar is?  A man?\"  Ser Daemon grimaced.  \"A man would not have done what he did to Princess Myrcella.  Ser Gerold is more a viper than your uncle ever was.  Prince Oberyn could see that he was poison, he said so more than once.  It’s just a pity that he never got around to killing him.\"\n\nPoison, thought Arianne.  Yes.  Pretty poison, though.  That was how he’d fooled her.  Gerold Dayne was hard and cruel, but so fair to look upon that the princess had not believed half the tales she’d heard of him.  Pretty boys had ever been her weakness, particularly the ones who were dark and dangerous as well.  That was before, when I was just a girl, she told herself.  I am a woman now, my father’s daughter.  I have learned that lesson.\n\nCome break of day, they were off again.  Elia Sand led the way, her black braid flying behind her as she raced across the dry, cracked plains and up into the hills.  The girl was mad for horses, which might be why she often smelled like one, to the despair of her mother.  Sometimes Arianne felt sorry for Ellaria.  Four girls, and every one of them her father’s daughter.  \n\nThe rest of the party kept a more sedate pace.  The princess found herself riding beside Ser Daemon, remembering other rides when they were younger, rides that often ended in embraces.  When she found herself stealing glances at him, tall and gallant in the saddle, Arianne reminded herself that she was heir to Dorne, and him no more than her shield.  \"Tell me what you know of this Jon Connington,\" she commanded.\n\n\"He’s dead,\" said Daemon Sand.  \"He died in the Disputed Lands.  Of drink, I’ve heard it said.\"      \n\n\"So a dead drunk leads this army?\"\n\n\"Perhaps this Jon Connington is a son of that one.  Or just some clever sellsword who has taken on a dead man’s name.\"\n\n\"Or he never died at all.\"  Could Connington have been pretending to be dead for all these years?  That would require patience worthy of her father.  The thought made Arianne uneasy.  Treating with a man that subtle could be perilous.  \"What was he like before he… before he died?\"\n\n\"I was a boy at Godsgrace when he was sent into exile.  I never knew the man.\"\n\n\"Then tell me what you’ve heard of him from others.\"\n\n\"As my princess commands.  Connington was Lord of Griffin’s Roost when Griffin’s Roost was still a lordship worth the having.  Prince Rhaegar’s squire, or one of them.  Later Prince Rhaegar’s friend and companion.  The Mad King named him Hand during Robert’s Rebellion, but he was defeated at Stoney Sept in the Battle of the Bells, and Robert slipped away.  King Aerys was wroth, and sent Connington into exile.  There he died.\"\n\n\"Or not.\"  Prince Doran had told her all of that.  There must be more.  \"Those are just the things he did.  I know all that.  What sort of man was he?  Honest and honorable, venal and grasping, proud?\"\n\n\"Proud, for a certainty.  Even arrogant.  A faithful friend to Rhaegar, but prickly with others.  Robert was his liege, but I’ve heard it said that Connington chafed at serving such a lord.  Even then, Robert was known to be fond of wine and whores.\"\n\n\"No whores for Lord Jon, then?\"\n\n\"I could not say.  Some men keep their whoring secret.\"\n\n\"Did he have a wife?  A paramour?\"\n\nSer Daemon shrugged.  \"Not that I have ever heard.\"\n\nThat was troubling too.  Ser Arys Oakheart had broken his vows for her, but it did not sound as if Jon Connington could be similarly swayed.  Can I match such a man with words alone?\n\nThe princess lapsed into silence, all the while pondering what she would find at journey’s end.  That night when they made camp, she crept into the tent she shared with Jayne Ladybright and Elia Sand and slipped the bit of parchment out of her sleeve to read the words again.\n\n>*To Prince Doran of House Martell,*  \n{% centerquote %}\nYou will remember me, I pray.I knew your sister well,and was a leal servant of your good-brother.I grieve for them as you do.I did not die, no more than did your sister’s son.To save his life we kept him hidden,but the time for hiding is done.  A dragon has returned to Westeros to claim his birthright and seek vengeance for his father, and for the princess Elia, his mother.In her name I turn to Dorne.Do not forsake us.{% endcenterquote %}\n>Jon Connington  \n>Lord of Griffin’s Roost  \n>Hand of the True King\n\n\nArianne read the letter thrice, then rolled it up and tucked it back into her sleeve.  A dragon has returned to Westeros, but not the dragon my father was expecting.  Nowhere in the words was there a mention of Daenerys Stormborn… nor of Prince Quentyn, her brother, who had been sent to seek the dragon queen.  The princess remembered how her father had pressed the onyx cyvasse piece into her palm, his voice hoarse and low as he confessed his plan.  A long and perilous voyage, with an uncertain welcome at its end, he had said.  He has gone to bring us back our heart’s desire.  Vengeance.  Justice.  Fire and blood.\n\nFire and blood was what Jon Connington (if indeed it was him) was offering as well.  Or was it?  \"He comes with sellswords, but no dragons,\" Prince Doran had told her, the night the raven came.  \"The Golden Company is the best and largest of the free companies, but ten thousand mercenaries cannot hope to win the Seven Kingdoms.  Elia’s son… I would weep for joy if some part of my sister had survived, but what proof do we have that this is Aegon?\"  His voice broke when he said that.  \"Where are the dragons?\" he asked.  \"Where is Daenerys?\" and Arianne knew that he was really saying, \"Where is my son?\"\n\nIn the Boneway and the Prince’s Pass, two Dornish hosts had massed, and there they sat, sharpening their spears, polishing their armor, dicing, drinking, quarreling, their numbers dwindling by the day, waiting, waiting, waiting for the Prince of Dorne to loose them on the enemies of House Martell.  Waiting for the dragons.  For fire and blood.  For me.  One word from Arianne and those armies would march… so long as that word wasdragon.  If instead the word she sent was war, Lord Yronwood and Lord Fowler and their armies would remain in place.  The Prince of Dorne was nothing if not subtle; here warmeant wait.  \n\nAt mid-morning on the third day Ghost Hill loomed up before them, its chalk-white walls shining against the deep blue of the Sea of Dorne.  From the square towers at the castle’s corners flew the banners of House Toland; a green dragon biting its own tail, upon a golden field.  The sun-and-spear of House Martell streamed atop the great central keep, gold and red and orange, defiant.\n\nRavens had flown ahead to warn Lady Toland of their coming, so the castle gates were open, and Nymella’s eldest daughter rode forth with her steward to meet them near the bottom of the hill.  Tall and fierce, with a blaze of bright red hair tumbling about her shoulders, Valena Toland greeted Arianne with a shout of, \"Come at last, have you?  How slow are those horses?\"\n\n\"Swift enough to outrun yours to the castle gates.\"    \n\n\"We will see about that.\"  Valena wheeled her big red around and put her heels into him, and the race was on, through the dusty lanes of the village at the bottom of the hill, as chickens and villagers alike scrambled out of their path.  Arianne was three horse lengths behind by the time she got her mare up to a gallop, but had closed to one halfway up the slope.  The two of them were side-by-side as they thundered towards the gatehouse, but five yards from the gates Elia Sand came flying from the cloud of dust behind them to rush past both of them on her black filly.\n\n\"Are you half horse, child?\" Valena asked, laughing, in the yard.  \"Princess, did you bring a stable girl?\"\n\n\"I’m Elia,\" the girl announced.  \"Lady Lance.\"\n\nWhoever hung that name on her has much to answer for.  Like as not it had been Prince Oberyn, though, and the Red Viper had never answered to anyone but himself.\n\n\"The girl jouster,\" Valena said.  \"Yes, I’ve heard of you.  Since you were the first to the yard, you’ve won the honor of watering and bridling the horses.\"\n\n\"And after that find the bath house,\" said Princess Arianne.  Elia was chalk and dust from heels to hair.  \n\nThat night Arianne and her knights supped with Lady Nymella and her daughters in the great hall of the castle.  Teora, the younger girl, had the same red hair as her sister, but elsewise could not have been more different.  Short, plump, and so shy she might have passed for a mute, she displayed more interest in the spiced beef and honeyed duck than in the comely young knights at the table, and seemed content to let her lady mother and her sister speak for House Toland.  \n\n\"We have heard the same tales here that you have heard at Sunspear,\" Lady Nymella told them as her serving man poured the wine.  \"Sellswords landing on Cape Wrath, castles under siege or being taken, crops seized or burned.  Where these men come from and who they are, no one is certain.\"\n\n\"Pirates and adventurers, we heard at first,\" said Valena.  \"Then it was supposed to be the Golden Company.  Now it’s said to be Jon Connington, the Mad King’s Hand, come back from the grave to reclaim his birthright.  Whoever it is, Griffin’s Roost has fallen to them.  Rain House, Crow’s Nest, Mistwood, even Greenstone on its island.  All taken.\"\n\nArianne’s thoughts went at once to her sweet Spotted Slyva.  \"Who would want Greenstone?  Was there a battle?\"\n\n\"Not as we have heard, but all the tales are garbled.\"\n\n\"Tarth has fallen too, some fisherfolk will tell you,\" said Valena.  \"These sellswords now hold most of Cape Wrath and half the Stepstones.  We hear talk of elephants in the rainwood.\"\n\n\"Elephants?\"  Arianne did not know what to think of that.  \"Are you certain?  Not dragons?\"\n\n\"Elephants,\" Lady Nymella said firmly.\n\n\"And krakens off the Broken Arm, pulling under crippled galleys,\" said Valena.  \"The blood draws them to the surface, our maester claims.  There are bodies in the water.  A few have washed up on our shores.  And that’s not half of it.  A new pirate king has set up on Torturer’s Deep.  The Lord of the Waters, he styles himself.  This one has real warships, three-deckers, monstrous large.  You were wise not to come by sea.  Since the Redwyne fleet passed through the Stepstones, those waters are crawling with strange sails, all the way north to the Straights of Tarth and Shipbreaker’s Bay.  Myrmen, Volantenes, Lyseni, even reavers from the Iron Islands.  Some have entered the Sea of Dorne to land men on the south shore of Cape Wrath.  We found a good fast ship for you, as your father commanded, but even so… be careful.\"\n\nIt is true, then.  Arianne wanted to ask after her brother, but her father had urged her to watch every word.  If these ships had not brought Quentyn home again with his dragon queen, best not to mention him.  Only her father and a few of his most trusted men knew about her brother’s mission to Slaver’s Bay.  Lady Toland and her daughters were not amongst them.  If it were Quentyn, he would have brought Daenerys back to Dorne, surely.  Why would he risk a landing on Cape Wrath, amongst the stormlords?  \n\n\"Is Dorne at risk?\" Lady Nymella asked.  \"I confess, each time I see a strange sail my heart leaps to my throat.  What if these ships turn south?  The best part of the Toland strength is with Lord Yronwood in the Boneway.  Who will defend Ghost Hill if these strangers land upon our shores?  Should I call my men home?\"\n\n\"Your men are needed where they are, my lady,\" Daemon Sand assured her.  Arianne was quick to nod.  Any other counsel could well lead to Lord Yronwood’s host unravelling like an old tapestry as each man rushed home to defend his own lands against supposed enemies who might or might not ever come.  \"Once we know beyond a doubt whether these be friends or foes, my father will know what to do,\" the princess said.\n\nIt was then that pasty, pudgy Teora raised her eyes from the creamcakes on her plate.  \"It is dragons.\"      \n\n\"Dragons?\"  said her mother.  \"Teora, don’t be mad.\"\n\n\"I’m not.  They’re coming.\"\n\n\"How could you possibly know that?\" her sister asked, with a note of scorn in her voice.\n\n\"One of your little dreams?\"\n\nTeora gave a tiny nod, chin trembling.  \"They were dancing.  In my dream.  And everywhere the dragons danced the people died.\"\n\n\"Seven save us.\"  Lady Nymella gave an exasperated sigh.\n\n\"If you did not eat so many creamcakes you would not have such dreams.  Rich foods are not for girls your age, when your humors are so unbalanced.  Maester Toman says — \"\n\n\"I hate Maester Toman,\" Teora said.  Then she bolted from the table, leaving her lady mother to make apologies for her.\n\n\"Be gentle with her, my lady,\" Arianne said.  \"I remember when I was her age.  My father despaired of me, I’m sure.\"  \n\n\"I can attest to that.\"  Ser Daemon took a sip of wine and said, \"House Toland has a dragon on its banners.\"  \n\n\"A dragon eating its own tail, aye,\" Valena said.  \"From the days of Aegon’s Conquest.  He did not conquer here.  Elsewhere he burned his foes, him and his sisters, but here we melted away before them, leaving only stone and sand for them to burn.  And round and round the dragons went, snapping at their tails for want of any other food, till they were tied in knots.\"\n\n\"Our forebears played their part in that,\" Lady Nymella said proudly.  \"Bold deeds were done, and brave men died.  All of it was written down by the maesters who served us.  We have books, if my princess would like to know more.\"\n\n\"Some other time, perhaps,\" said Arianne.\n\nAs Ghost Hill slept that night, the princess donned a hooded cloak against the chill and and walked the castle battlements to clear her thoughts.  Daemon Sand found her leaning on a parapet and gazing out to sea, where the moon was dancing on the water.  \"Princess,\" he said.  \"You ought to be abed.\"\n\n\"I could say the same of you.\"  Arianne turned to gaze upon his face.  A good face, she decided.  The boy I knew has become a handsome man.  His eyes were as blue as a desert sky, his hair the light brown of the sands they had just crossed.  A close-cropped beard followed the thin of a strong jaw, but could not quite hide the dimples when he smiled.  I always loved his smile.\n\nThe Bastard of Godsgrace was one of Dorne’s finest swords as well, as might be expected from one who had been Prince Oberyn’s squire and had received his knighthood from the Red Viper himself.  Some said that he had been her uncle’s lover too, though seldom to his face.  Arianne did not know the truth of that.  He had been her lover, though.  At fourteen she had given him her maidenhead.  Daemon had not been much older, so their couplings had been as clumsy as they were ardent.  Still, it had been sweet.  \n\nArianne gave him her most seductive smile.  \"We might share a bed together.\"\n\nSer Daemon’s face was stone.  \"Have you forgotten, princess?  I am bastard born.\"  He took her hand in his.  \"If I am unworthy of this hand, how can I be worthy of your cunt?\"\n\nShe snatched her hand away.  \"You deserve a slap for that.\"  \n\n\"My face is yours.  Do what you will.\"\n\n\"What I will you will not, it seems.  So be it.  Talk with me instead.  Could this truly be Prince Aegon?\"\n\n\"Gregor Clegane ripped Aegon out of Elia’s arms and smashed his head against a wall,\" Ser Daemon said.  \"If Lord Connington’s prince has a crushed skull, I will believe that Aegon Targaryen has returned from the grave.  Elsewise, no.  This is some feigned boy, no more.  A sellsword’s ploy to win support.\"\n\nMy father fears the same.  \"If not, though… if this truly is Jon Connington, if the boy is Rhaegar’s son… \"\n\n\"Are you hoping that he is, or that he’s not?\"\n\n\"I… it would give great joy to my father if Elia’s son were still alive.  He loved his sister well.\"\n\n\"It was you I asked about, not your father.\"\n\nSo it was.  \"I was seven when Elia died.  They say I held her daughter Rhaenys once, when I was too young to remember.  Aegon will be a stranger to me, whether true or false.\"  The princess paused.  \"We looked for Rhaegar’s sister, not his son.\"  Her father had confided in Ser Daemon when he chose him as his daughter’s shield; with him at least she could speak freely.  \"I would sooner it were Quentyn who’d returned.\"\n\n\"Or so you say,\" said Daemon Sand.  \"Good night, princess.\"  He bowed to her, and left her standing there.\n\nWhat did he mean by that?  Arianne watched him walk away.  What sort of sister would I be, if I did not want my brother back?  It was true, she had resented Quentyn for all those years that she had thought their father meant to name him as his heir in place of her, but that had turned out to be just a misunderstanding.  She was the heir to Dorne, she had her father’s word on that.  Quentyn would have his dragon queen, Daenerys.\n\nIn Sunspear hung a portrait of the Princess Daenerys who had come to Dorne to marry one of Arianne’s forebears.  In her younger days Arianne had spent hours gazing at it, back when she was just a pudgy flat-chested girl on the cusp of maidenhood who prayed every night for the gods to make her pretty.  A hundred years ago, Daenerys Targaryen came to Dorne to make a peace.  Now another comes to make a war, and my brother will be her king and consort.King Quentyn.  Why did that sound so silly?  \n\nAlmost as silly as Quentyn riding on a dragon.  Her brother was an earnest boy,well-behaved and dutiful, but dull.  And plain, so plain.  The gods had given Arianne the beauty she had prayed for, but Quentyn must have prayed for something else.  His head was overlarge and sort of square, his hair the color of dried mud.  His shoulders slumped as well, and he was too thick about the middle.  He looks too much like Father.\n\n\"I love my brother,\" said Arianne, though only the moon could hear her.  Though if truth be told, she scarcely knew him.  Quentyn had been fostered by Lord Anders of House Yronwood, the Bloodroyal, the son of Lord Ormond Yronwood and grandson of Lord Edgar.  In his youth her uncle Oberyn had fought a duel with Edgar, had given him a wound that mortified and killed him.  Afterward men called him ‘the Red Viper,’ and spoke of poison on his blade.  The Yronwoods were an ancient house, proud and powerful.  Before the coming of the Rhoynar they had been kings over half of Dorne, with domains that dwarfed those of House Martell.  Blood feud and rebellion would surely have followed Lord Edgar’s death, had not her father acted at once.  The Red Viper went to Oldtown, thence across to the narrow sea to Lys, though none dared call it exile.  And in due time, Quentyn was given to Lord Anders to foster as a sign of trust.  That helped to heal the breach between Sunspear and the Yronwoods, but it had opened new ones between Quentyn and the Sand Snakes… and Arianne had always been closer to her cousins than to her distant brother.\n\n\"We are still the same blood, though,\" she whispered.  \"Of course I want my brother home.  I do.\"  The wind off the sea was raising gooseprickles all up and down her arms.  Arianne pulled her cloak about herself, and went off to seek her bed.\n\nTheir ship was called the Peregrine.  They sailed upon the morning tide.  The gods were good to them, the sea calm.  Even with good winds, the crossing took a day and a night.  Jayne Ladybright grew greensick and spent most of the voyage spewing, which Elia Sand seemed to find hilarious.  \"Someone needs to spank that child,\" Joss Hood was heard to say… but Elia was amongst those who heard him say it.\n\n\"I am almost a woman grown, ser,\" she responded haughtily.  \"I’ll let you spank me, though…  but first you’ll need to tilt with me, and knock me off my horse.\"\n\n\"We are on a ship, and without horses,\" Joss replied.\n\n\"And ladies do not joust,\" insisted Ser Garibald Shells, a far more serious and proper young man than his companion.\n\n\"I do.  I’m Lady Lance.\"\n\nArianne had heard enough.  \"You may be a lance, but you are no lady.  Go below and stay there till we reach land.\"\n\nElsewise the crossing was uneventful.  At dusk they spied a galley in the distance, her oars rising and falling against the evening stars, but she was moving away from them, and soon dwindled and was gone.  Arianne played a game of cyvasse with Ser Daemon, and another one with Garibald Shells, and somehow managed to lose both.  Ser Garibald was kind enough to say that she played a gallant game, but Daemon mocked her.  \"You have other pieces beside the dragon, princess.  Try moving them sometime.\"\n\n\"I like the dragon.\"  She wanted to slap the smile off his face.  Or kiss it off, perhaps.  The man was as smug as he was comely.  Of all the knights in Dorne, why did my father chose this one to be my shield?  He knows our history.  \"It is just a game.  Tell me of Prince Viserys.\"\n\n\"The Beggar King?\"  Ser Daemon seemed surprised.  \n\n\"Everyone says that Prince Rhaegar was beautiful.  Was Viserys beautiful as well?\"\n\n\"I suppose.  He was Targaryen.  I never saw the man.\"\n\nThe secret pact that Prince Doran had made all those years called for Arianne to be wed to Prince Viserys, not Quentyn to Daenerys.  It had all come undone on the Dothraki sea, when he was murdered.  Crowned with a pot of molten gold.  \"He was killed by a Dothraki khal,\" said Arianne.  \"The dragon queen’s own husband.\"\n\n\"So I’ve heard.  What of it?\"      \n\n\"Just… why did Daenerys let it happen?  Viserys was her brother.  All that remained of her own blood.\"\n\n\"The Dothraki are a savage folk.  Who can know why they kill?  Perhaps Viserys wiped his arse with the wrong hand.\"\n\nPerhaps, thought Arianne, or perhaps Daenerys realized that once her brother was crowned and wed to me, she would be doomed to spend the rest of her life sleeping in a tent and smelling like a horse.  \"She is the Mad King’s daughter,\" the princess said.  \"How do we do know — \"\n\n\"We cannot know,\" Ser Daemon said.  \"We can only hope.\"\n","slug":"ARIANNE","published":1,"updated":"2016-08-24T15:50:44.240Z","layout":"post","photos":[],"link":"","_id":"cis92veal0006h8dqpk74w3uu","content":"<h2 id=\"ARIANNEE-EXCERPT-FROM-THE-WINDS-OF-WINTER\"><a href=\"#ARIANNEE-EXCERPT-FROM-THE-WINDS-OF-WINTER\" class=\"headerlink\" title=\"ARIANNEE--EXCERPT FROM THE WINDS OF WINTER\"></a>ARIANNEE--EXCERPT FROM THE WINDS OF WINTER</h2><p>They struck out north by northwest, across drylands and parched plains and pale sands toward Ghost Hill, the stronghold of House Toland, where the ship that would take them across the Sea of Dorne awaited them.  “Send a raven whenever you have news,” Prince Doran told her, “but report only what you know to be true.  We are lost in fog here, besieged by rumors, falsehoods, and traveler’s tales.  I dare not act until I know for a certainty what is happening.”</p>\n<p>War is happening, though Arianne, and this time Dorne will not be spared.  “Doom and death are coming,” Ellaria Sand had warned them, before she took her own leave from Prince Doran.  “It is time for my little snakes to scatter, the better to survive the carnage.”  Ellaria was returning to her father’s seat at Hellholt.  With her went her daughter Loreza, who had just turned seven.  Dorea remained at the Water Gardens, one child amongst a hundred.Obella was to be dispatched to Sunspear, to serve as a cupbearer to the wife of the castellan, Manfrey Martell.<br><a id=\"more\"></a><br>And Elia Sand, oldest of the four girls that Prince Oberyn had fathered on Ellaria, would cross the Sea of Dorne with Arianne.  “As a lady, not a lance,” her mother said firmly, but like all the Sand Snakes, Elia had her own mind.</p>\n<p>They crossed the sands in two long days and the better part of two nights, stopping thrice to change their horses.  It was a lonely time for Arianne, surrounded by so many strangers.  Elia was her cousin, but half a child, and Daemon Sand… things had never been the same between her and the Bastard of Godsgrace after her father refused his offer for her hand.  He was a boy then, and bastard born, no fit consort for a princess of Dorne, he should have known better.  And it was my father’s will, not mine.  The rest of her companions she hardly knew at all.    </p>\n<p>Arianne missed her friends.  Drey and Garin and her sweet Spotted Slyva had been a part of her since she was little, trusted confidants who had shared her dreams and secrets, cheered her when she was sad, helped her face her fears.  One of them had betrayed her, but she missed them all the same.  It was my own fault.  Arianne had made them part of her plot to steal off with Myrcella Baratheon and crown her queen, an act of rebellion meant to force her father’s hand, but someone’s loose tongue had undone her.  The clumsy conspiracy had accomplished nothing, except to cost poor Myrcella part of her face, and Ser Arys Oakheart his life.</p>\n<p>Arianne missed Ser Arys too, more than she ever would have thought.  He loved me madly, she told herself, yet I was never more than fond of him.  I made use of him in mybed and in my plot, took his love and took his honor, gave him nothing but my body.  In the end he could not live with what we’d done.  Why else would her white knight have charged right into Areo Hotah’s longaxe, to die the way he did?  I was a foolish willful girl, playing at the game of thrones like a drunkard rolling dice.  </p>\n<p>The cost of her folly had been dear.  Drey had been sent across the world to Norvos, Garin exiled to Tyrosh for two years, her sweet silly smiling Slyva married off to Eldon Estermont, a man old enough to be her grandsire.  Ser Arys had paid with his life’s blood, Myrcella with an ear.  </p>\n<p>Only Ser Gerold Dayne had escaped unscathed.  Darkstar.  If Myrcella’s horse had not shied at the last instant, his longsword would have opened her from chest to waist instead just taking off her ear.  Dayne was her most grievous sin, the one that Arianne most regretted.  With one stroke of his sword, he had changed her botched plot into something foul and bloody.  If the gods were good, by now Obara Sand had treed him in his mountain fastness and put an end to him.</p>\n<p>She said as much to Daemon Sand that first night, as they made camp.  “Be careful what you pray for, princess,” he replied.  “Darkstar could put an end to Lady Obara just as easily.”</p>\n<p>“She has Areo Hotah with her.”  Prince Doran’s captain of guards had dispatched Ser Arys Oakheart with a single blow, though the Kingsguard were supposed to be the finest knights in all the realm.  “No man can stand against Hotah.”</p>\n<p>“Is that what Darkstar is?  A man?”  Ser Daemon grimaced.  “A man would not have done what he did to Princess Myrcella.  Ser Gerold is more a viper than your uncle ever was.  Prince Oberyn could see that he was poison, he said so more than once.  It’s just a pity that he never got around to killing him.”</p>\n<p>Poison, thought Arianne.  Yes.  Pretty poison, though.  That was how he’d fooled her.  Gerold Dayne was hard and cruel, but so fair to look upon that the princess had not believed half the tales she’d heard of him.  Pretty boys had ever been her weakness, particularly the ones who were dark and dangerous as well.  That was before, when I was just a girl, she told herself.  I am a woman now, my father’s daughter.  I have learned that lesson.</p>\n<p>Come break of day, they were off again.  Elia Sand led the way, her black braid flying behind her as she raced across the dry, cracked plains and up into the hills.  The girl was mad for horses, which might be why she often smelled like one, to the despair of her mother.  Sometimes Arianne felt sorry for Ellaria.  Four girls, and every one of them her father’s daughter.  </p>\n<p>The rest of the party kept a more sedate pace.  The princess found herself riding beside Ser Daemon, remembering other rides when they were younger, rides that often ended in embraces.  When she found herself stealing glances at him, tall and gallant in the saddle, Arianne reminded herself that she was heir to Dorne, and him no more than her shield.  “Tell me what you know of this Jon Connington,” she commanded.</p>\n<p>“He’s dead,” said Daemon Sand.  “He died in the Disputed Lands.  Of drink, I’ve heard it said.”      </p>\n<p>“So a dead drunk leads this army?”</p>\n<p>“Perhaps this Jon Connington is a son of that one.  Or just some clever sellsword who has taken on a dead man’s name.”</p>\n<p>“Or he never died at all.”  Could Connington have been pretending to be dead for all these years?  That would require patience worthy of her father.  The thought made Arianne uneasy.  Treating with a man that subtle could be perilous.  “What was he like before he… before he died?”</p>\n<p>“I was a boy at Godsgrace when he was sent into exile.  I never knew the man.”</p>\n<p>“Then tell me what you’ve heard of him from others.”</p>\n<p>“As my princess commands.  Connington was Lord of Griffin’s Roost when Griffin’s Roost was still a lordship worth the having.  Prince Rhaegar’s squire, or one of them.  Later Prince Rhaegar’s friend and companion.  The Mad King named him Hand during Robert’s Rebellion, but he was defeated at Stoney Sept in the Battle of the Bells, and Robert slipped away.  King Aerys was wroth, and sent Connington into exile.  There he died.”</p>\n<p>“Or not.”  Prince Doran had told her all of that.  There must be more.  “Those are just the things he did.  I know all that.  What sort of man was he?  Honest and honorable, venal and grasping, proud?”</p>\n<p>“Proud, for a certainty.  Even arrogant.  A faithful friend to Rhaegar, but prickly with others.  Robert was his liege, but I’ve heard it said that Connington chafed at serving such a lord.  Even then, Robert was known to be fond of wine and whores.”</p>\n<p>“No whores for Lord Jon, then?”</p>\n<p>“I could not say.  Some men keep their whoring secret.”</p>\n<p>“Did he have a wife?  A paramour?”</p>\n<p>Ser Daemon shrugged.  “Not that I have ever heard.”</p>\n<p>That was troubling too.  Ser Arys Oakheart had broken his vows for her, but it did not sound as if Jon Connington could be similarly swayed.  Can I match such a man with words alone?</p>\n<p>The princess lapsed into silence, all the while pondering what she would find at journey’s end.  That night when they made camp, she crept into the tent she shared with Jayne Ladybright and Elia Sand and slipped the bit of parchment out of her sleeve to read the words again.</p>\n<blockquote>\n<p><em>To Prince Doran of House Martell,</em><br><blockquote class=\"blockquote-center\"><p>You will remember me, I pray.I knew your sister well,and was a leal servant of your good-brother.I grieve for them as you do.I did not die, no more than did your sister’s son.To save his life we kept him hidden,but the time for hiding is done.  A dragon has returned to Westeros to claim his birthright and seek vengeance for his father, and for the princess Elia, his mother.In her name I turn to Dorne.Do not forsake us.</p>\n</blockquote><br>Jon Connington<br>Lord of Griffin’s Roost<br>Hand of the True King</p>\n</blockquote>\n<p>Arianne read the letter thrice, then rolled it up and tucked it back into her sleeve.  A dragon has returned to Westeros, but not the dragon my father was expecting.  Nowhere in the words was there a mention of Daenerys Stormborn… nor of Prince Quentyn, her brother, who had been sent to seek the dragon queen.  The princess remembered how her father had pressed the onyx cyvasse piece into her palm, his voice hoarse and low as he confessed his plan.  A long and perilous voyage, with an uncertain welcome at its end, he had said.  He has gone to bring us back our heart’s desire.  Vengeance.  Justice.  Fire and blood.</p>\n<p>Fire and blood was what Jon Connington (if indeed it was him) was offering as well.  Or was it?  “He comes with sellswords, but no dragons,” Prince Doran had told her, the night the raven came.  “The Golden Company is the best and largest of the free companies, but ten thousand mercenaries cannot hope to win the Seven Kingdoms.  Elia’s son… I would weep for joy if some part of my sister had survived, but what proof do we have that this is Aegon?”  His voice broke when he said that.  “Where are the dragons?” he asked.  “Where is Daenerys?” and Arianne knew that he was really saying, “Where is my son?”</p>\n<p>In the Boneway and the Prince’s Pass, two Dornish hosts had massed, and there they sat, sharpening their spears, polishing their armor, dicing, drinking, quarreling, their numbers dwindling by the day, waiting, waiting, waiting for the Prince of Dorne to loose them on the enemies of House Martell.  Waiting for the dragons.  For fire and blood.  For me.  One word from Arianne and those armies would march… so long as that word wasdragon.  If instead the word she sent was war, Lord Yronwood and Lord Fowler and their armies would remain in place.  The Prince of Dorne was nothing if not subtle; here warmeant wait.  </p>\n<p>At mid-morning on the third day Ghost Hill loomed up before them, its chalk-white walls shining against the deep blue of the Sea of Dorne.  From the square towers at the castle’s corners flew the banners of House Toland; a green dragon biting its own tail, upon a golden field.  The sun-and-spear of House Martell streamed atop the great central keep, gold and red and orange, defiant.</p>\n<p>Ravens had flown ahead to warn Lady Toland of their coming, so the castle gates were open, and Nymella’s eldest daughter rode forth with her steward to meet them near the bottom of the hill.  Tall and fierce, with a blaze of bright red hair tumbling about her shoulders, Valena Toland greeted Arianne with a shout of, “Come at last, have you?  How slow are those horses?”</p>\n<p>“Swift enough to outrun yours to the castle gates.”    </p>\n<p>“We will see about that.”  Valena wheeled her big red around and put her heels into him, and the race was on, through the dusty lanes of the village at the bottom of the hill, as chickens and villagers alike scrambled out of their path.  Arianne was three horse lengths behind by the time she got her mare up to a gallop, but had closed to one halfway up the slope.  The two of them were side-by-side as they thundered towards the gatehouse, but five yards from the gates Elia Sand came flying from the cloud of dust behind them to rush past both of them on her black filly.</p>\n<p>“Are you half horse, child?” Valena asked, laughing, in the yard.  “Princess, did you bring a stable girl?”</p>\n<p>“I’m Elia,” the girl announced.  “Lady Lance.”</p>\n<p>Whoever hung that name on her has much to answer for.  Like as not it had been Prince Oberyn, though, and the Red Viper had never answered to anyone but himself.</p>\n<p>“The girl jouster,” Valena said.  “Yes, I’ve heard of you.  Since you were the first to the yard, you’ve won the honor of watering and bridling the horses.”</p>\n<p>“And after that find the bath house,” said Princess Arianne.  Elia was chalk and dust from heels to hair.  </p>\n<p>That night Arianne and her knights supped with Lady Nymella and her daughters in the great hall of the castle.  Teora, the younger girl, had the same red hair as her sister, but elsewise could not have been more different.  Short, plump, and so shy she might have passed for a mute, she displayed more interest in the spiced beef and honeyed duck than in the comely young knights at the table, and seemed content to let her lady mother and her sister speak for House Toland.  </p>\n<p>“We have heard the same tales here that you have heard at Sunspear,” Lady Nymella told them as her serving man poured the wine.  “Sellswords landing on Cape Wrath, castles under siege or being taken, crops seized or burned.  Where these men come from and who they are, no one is certain.”</p>\n<p>“Pirates and adventurers, we heard at first,” said Valena.  “Then it was supposed to be the Golden Company.  Now it’s said to be Jon Connington, the Mad King’s Hand, come back from the grave to reclaim his birthright.  Whoever it is, Griffin’s Roost has fallen to them.  Rain House, Crow’s Nest, Mistwood, even Greenstone on its island.  All taken.”</p>\n<p>Arianne’s thoughts went at once to her sweet Spotted Slyva.  “Who would want Greenstone?  Was there a battle?”</p>\n<p>“Not as we have heard, but all the tales are garbled.”</p>\n<p>“Tarth has fallen too, some fisherfolk will tell you,” said Valena.  “These sellswords now hold most of Cape Wrath and half the Stepstones.  We hear talk of elephants in the rainwood.”</p>\n<p>“Elephants?”  Arianne did not know what to think of that.  “Are you certain?  Not dragons?”</p>\n<p>“Elephants,” Lady Nymella said firmly.</p>\n<p>“And krakens off the Broken Arm, pulling under crippled galleys,” said Valena.  “The blood draws them to the surface, our maester claims.  There are bodies in the water.  A few have washed up on our shores.  And that’s not half of it.  A new pirate king has set up on Torturer’s Deep.  The Lord of the Waters, he styles himself.  This one has real warships, three-deckers, monstrous large.  You were wise not to come by sea.  Since the Redwyne fleet passed through the Stepstones, those waters are crawling with strange sails, all the way north to the Straights of Tarth and Shipbreaker’s Bay.  Myrmen, Volantenes, Lyseni, even reavers from the Iron Islands.  Some have entered the Sea of Dorne to land men on the south shore of Cape Wrath.  We found a good fast ship for you, as your father commanded, but even so… be careful.”</p>\n<p>It is true, then.  Arianne wanted to ask after her brother, but her father had urged her to watch every word.  If these ships had not brought Quentyn home again with his dragon queen, best not to mention him.  Only her father and a few of his most trusted men knew about her brother’s mission to Slaver’s Bay.  Lady Toland and her daughters were not amongst them.  If it were Quentyn, he would have brought Daenerys back to Dorne, surely.  Why would he risk a landing on Cape Wrath, amongst the stormlords?  </p>\n<p>“Is Dorne at risk?” Lady Nymella asked.  “I confess, each time I see a strange sail my heart leaps to my throat.  What if these ships turn south?  The best part of the Toland strength is with Lord Yronwood in the Boneway.  Who will defend Ghost Hill if these strangers land upon our shores?  Should I call my men home?”</p>\n<p>“Your men are needed where they are, my lady,” Daemon Sand assured her.  Arianne was quick to nod.  Any other counsel could well lead to Lord Yronwood’s host unravelling like an old tapestry as each man rushed home to defend his own lands against supposed enemies who might or might not ever come.  “Once we know beyond a doubt whether these be friends or foes, my father will know what to do,” the princess said.</p>\n<p>It was then that pasty, pudgy Teora raised her eyes from the creamcakes on her plate.  “It is dragons.”      </p>\n<p>“Dragons?”  said her mother.  “Teora, don’t be mad.”</p>\n<p>“I’m not.  They’re coming.”</p>\n<p>“How could you possibly know that?” her sister asked, with a note of scorn in her voice.</p>\n<p>“One of your little dreams?”</p>\n<p>Teora gave a tiny nod, chin trembling.  “They were dancing.  In my dream.  And everywhere the dragons danced the people died.”</p>\n<p>“Seven save us.”  Lady Nymella gave an exasperated sigh.</p>\n<p>“If you did not eat so many creamcakes you would not have such dreams.  Rich foods are not for girls your age, when your humors are so unbalanced.  Maester Toman says — “</p>\n<p>“I hate Maester Toman,” Teora said.  Then she bolted from the table, leaving her lady mother to make apologies for her.</p>\n<p>“Be gentle with her, my lady,” Arianne said.  “I remember when I was her age.  My father despaired of me, I’m sure.”  </p>\n<p>“I can attest to that.”  Ser Daemon took a sip of wine and said, “House Toland has a dragon on its banners.”  </p>\n<p>“A dragon eating its own tail, aye,” Valena said.  “From the days of Aegon’s Conquest.  He did not conquer here.  Elsewhere he burned his foes, him and his sisters, but here we melted away before them, leaving only stone and sand for them to burn.  And round and round the dragons went, snapping at their tails for want of any other food, till they were tied in knots.”</p>\n<p>“Our forebears played their part in that,” Lady Nymella said proudly.  “Bold deeds were done, and brave men died.  All of it was written down by the maesters who served us.  We have books, if my princess would like to know more.”</p>\n<p>“Some other time, perhaps,” said Arianne.</p>\n<p>As Ghost Hill slept that night, the princess donned a hooded cloak against the chill and and walked the castle battlements to clear her thoughts.  Daemon Sand found her leaning on a parapet and gazing out to sea, where the moon was dancing on the water.  “Princess,” he said.  “You ought to be abed.”</p>\n<p>“I could say the same of you.”  Arianne turned to gaze upon his face.  A good face, she decided.  The boy I knew has become a handsome man.  His eyes were as blue as a desert sky, his hair the light brown of the sands they had just crossed.  A close-cropped beard followed the thin of a strong jaw, but could not quite hide the dimples when he smiled.  I always loved his smile.</p>\n<p>The Bastard of Godsgrace was one of Dorne’s finest swords as well, as might be expected from one who had been Prince Oberyn’s squire and had received his knighthood from the Red Viper himself.  Some said that he had been her uncle’s lover too, though seldom to his face.  Arianne did not know the truth of that.  He had been her lover, though.  At fourteen she had given him her maidenhead.  Daemon had not been much older, so their couplings had been as clumsy as they were ardent.  Still, it had been sweet.  </p>\n<p>Arianne gave him her most seductive smile.  “We might share a bed together.”</p>\n<p>Ser Daemon’s face was stone.  “Have you forgotten, princess?  I am bastard born.”  He took her hand in his.  “If I am unworthy of this hand, how can I be worthy of your cunt?”</p>\n<p>She snatched her hand away.  “You deserve a slap for that.”  </p>\n<p>“My face is yours.  Do what you will.”</p>\n<p>“What I will you will not, it seems.  So be it.  Talk with me instead.  Could this truly be Prince Aegon?”</p>\n<p>“Gregor Clegane ripped Aegon out of Elia’s arms and smashed his head against a wall,” Ser Daemon said.  “If Lord Connington’s prince has a crushed skull, I will believe that Aegon Targaryen has returned from the grave.  Elsewise, no.  This is some feigned boy, no more.  A sellsword’s ploy to win support.”</p>\n<p>My father fears the same.  “If not, though… if this truly is Jon Connington, if the boy is Rhaegar’s son… “</p>\n<p>“Are you hoping that he is, or that he’s not?”</p>\n<p>“I… it would give great joy to my father if Elia’s son were still alive.  He loved his sister well.”</p>\n<p>“It was you I asked about, not your father.”</p>\n<p>So it was.  “I was seven when Elia died.  They say I held her daughter Rhaenys once, when I was too young to remember.  Aegon will be a stranger to me, whether true or false.”  The princess paused.  “We looked for Rhaegar’s sister, not his son.”  Her father had confided in Ser Daemon when he chose him as his daughter’s shield; with him at least she could speak freely.  “I would sooner it were Quentyn who’d returned.”</p>\n<p>“Or so you say,” said Daemon Sand.  “Good night, princess.”  He bowed to her, and left her standing there.</p>\n<p>What did he mean by that?  Arianne watched him walk away.  What sort of sister would I be, if I did not want my brother back?  It was true, she had resented Quentyn for all those years that she had thought their father meant to name him as his heir in place of her, but that had turned out to be just a misunderstanding.  She was the heir to Dorne, she had her father’s word on that.  Quentyn would have his dragon queen, Daenerys.</p>\n<p>In Sunspear hung a portrait of the Princess Daenerys who had come to Dorne to marry one of Arianne’s forebears.  In her younger days Arianne had spent hours gazing at it, back when she was just a pudgy flat-chested girl on the cusp of maidenhood who prayed every night for the gods to make her pretty.  A hundred years ago, Daenerys Targaryen came to Dorne to make a peace.  Now another comes to make a war, and my brother will be her king and consort.King Quentyn.  Why did that sound so silly?  </p>\n<p>Almost as silly as Quentyn riding on a dragon.  Her brother was an earnest boy,well-behaved and dutiful, but dull.  And plain, so plain.  The gods had given Arianne the beauty she had prayed for, but Quentyn must have prayed for something else.  His head was overlarge and sort of square, his hair the color of dried mud.  His shoulders slumped as well, and he was too thick about the middle.  He looks too much like Father.</p>\n<p>“I love my brother,” said Arianne, though only the moon could hear her.  Though if truth be told, she scarcely knew him.  Quentyn had been fostered by Lord Anders of House Yronwood, the Bloodroyal, the son of Lord Ormond Yronwood and grandson of Lord Edgar.  In his youth her uncle Oberyn had fought a duel with Edgar, had given him a wound that mortified and killed him.  Afterward men called him ‘the Red Viper,’ and spoke of poison on his blade.  The Yronwoods were an ancient house, proud and powerful.  Before the coming of the Rhoynar they had been kings over half of Dorne, with domains that dwarfed those of House Martell.  Blood feud and rebellion would surely have followed Lord Edgar’s death, had not her father acted at once.  The Red Viper went to Oldtown, thence across to the narrow sea to Lys, though none dared call it exile.  And in due time, Quentyn was given to Lord Anders to foster as a sign of trust.  That helped to heal the breach between Sunspear and the Yronwoods, but it had opened new ones between Quentyn and the Sand Snakes… and Arianne had always been closer to her cousins than to her distant brother.</p>\n<p>“We are still the same blood, though,” she whispered.  “Of course I want my brother home.  I do.”  The wind off the sea was raising gooseprickles all up and down her arms.  Arianne pulled her cloak about herself, and went off to seek her bed.</p>\n<p>Their ship was called the Peregrine.  They sailed upon the morning tide.  The gods were good to them, the sea calm.  Even with good winds, the crossing took a day and a night.  Jayne Ladybright grew greensick and spent most of the voyage spewing, which Elia Sand seemed to find hilarious.  “Someone needs to spank that child,” Joss Hood was heard to say… but Elia was amongst those who heard him say it.</p>\n<p>“I am almost a woman grown, ser,” she responded haughtily.  “I’ll let you spank me, though…  but first you’ll need to tilt with me, and knock me off my horse.”</p>\n<p>“We are on a ship, and without horses,” Joss replied.</p>\n<p>“And ladies do not joust,” insisted Ser Garibald Shells, a far more serious and proper young man than his companion.</p>\n<p>“I do.  I’m Lady Lance.”</p>\n<p>Arianne had heard enough.  “You may be a lance, but you are no lady.  Go below and stay there till we reach land.”</p>\n<p>Elsewise the crossing was uneventful.  At dusk they spied a galley in the distance, her oars rising and falling against the evening stars, but she was moving away from them, and soon dwindled and was gone.  Arianne played a game of cyvasse with Ser Daemon, and another one with Garibald Shells, and somehow managed to lose both.  Ser Garibald was kind enough to say that she played a gallant game, but Daemon mocked her.  “You have other pieces beside the dragon, princess.  Try moving them sometime.”</p>\n<p>“I like the dragon.”  She wanted to slap the smile off his face.  Or kiss it off, perhaps.  The man was as smug as he was comely.  Of all the knights in Dorne, why did my father chose this one to be my shield?  He knows our history.  “It is just a game.  Tell me of Prince Viserys.”</p>\n<p>“The Beggar King?”  Ser Daemon seemed surprised.  </p>\n<p>“Everyone says that Prince Rhaegar was beautiful.  Was Viserys beautiful as well?”</p>\n<p>“I suppose.  He was Targaryen.  I never saw the man.”</p>\n<p>The secret pact that Prince Doran had made all those years called for Arianne to be wed to Prince Viserys, not Quentyn to Daenerys.  It had all come undone on the Dothraki sea, when he was murdered.  Crowned with a pot of molten gold.  “He was killed by a Dothraki khal,” said Arianne.  “The dragon queen’s own husband.”</p>\n<p>“So I’ve heard.  What of it?”      </p>\n<p>“Just… why did Daenerys let it happen?  Viserys was her brother.  All that remained of her own blood.”</p>\n<p>“The Dothraki are a savage folk.  Who can know why they kill?  Perhaps Viserys wiped his arse with the wrong hand.”</p>\n<p>Perhaps, thought Arianne, or perhaps Daenerys realized that once her brother was crowned and wed to me, she would be doomed to spend the rest of her life sleeping in a tent and smelling like a horse.  “She is the Mad King’s daughter,” the princess said.  “How do we do know — “</p>\n<p>“We cannot know,” Ser Daemon said.  “We can only hope.”</p>\n","excerpt":"<h2 id=\"ARIANNEE-EXCERPT-FROM-THE-WINDS-OF-WINTER\"><a href=\"#ARIANNEE-EXCERPT-FROM-THE-WINDS-OF-WINTER\" class=\"headerlink\" title=\"ARIANNEE--EXCERPT FROM THE WINDS OF WINTER\"></a>ARIANNEE--EXCERPT FROM THE WINDS OF WINTER</h2><p>They struck out north by northwest, across drylands and parched plains and pale sands toward Ghost Hill, the stronghold of House Toland, where the ship that would take them across the Sea of Dorne awaited them.  “Send a raven whenever you have news,” Prince Doran told her, “but report only what you know to be true.  We are lost in fog here, besieged by rumors, falsehoods, and traveler’s tales.  I dare not act until I know for a certainty what is happening.”</p>\n<p>War is happening, though Arianne, and this time Dorne will not be spared.  “Doom and death are coming,” Ellaria Sand had warned them, before she took her own leave from Prince Doran.  “It is time for my little snakes to scatter, the better to survive the carnage.”  Ellaria was returning to her father’s seat at Hellholt.  With her went her daughter Loreza, who had just turned seven.  Dorea remained at the Water Gardens, one child amongst a hundred.Obella was to be dispatched to Sunspear, to serve as a cupbearer to the wife of the castellan, Manfrey Martell.<br>","more":"<br>And Elia Sand, oldest of the four girls that Prince Oberyn had fathered on Ellaria, would cross the Sea of Dorne with Arianne.  “As a lady, not a lance,” her mother said firmly, but like all the Sand Snakes, Elia had her own mind.</p>\n<p>They crossed the sands in two long days and the better part of two nights, stopping thrice to change their horses.  It was a lonely time for Arianne, surrounded by so many strangers.  Elia was her cousin, but half a child, and Daemon Sand… things had never been the same between her and the Bastard of Godsgrace after her father refused his offer for her hand.  He was a boy then, and bastard born, no fit consort for a princess of Dorne, he should have known better.  And it was my father’s will, not mine.  The rest of her companions she hardly knew at all.    </p>\n<p>Arianne missed her friends.  Drey and Garin and her sweet Spotted Slyva had been a part of her since she was little, trusted confidants who had shared her dreams and secrets, cheered her when she was sad, helped her face her fears.  One of them had betrayed her, but she missed them all the same.  It was my own fault.  Arianne had made them part of her plot to steal off with Myrcella Baratheon and crown her queen, an act of rebellion meant to force her father’s hand, but someone’s loose tongue had undone her.  The clumsy conspiracy had accomplished nothing, except to cost poor Myrcella part of her face, and Ser Arys Oakheart his life.</p>\n<p>Arianne missed Ser Arys too, more than she ever would have thought.  He loved me madly, she told herself, yet I was never more than fond of him.  I made use of him in mybed and in my plot, took his love and took his honor, gave him nothing but my body.  In the end he could not live with what we’d done.  Why else would her white knight have charged right into Areo Hotah’s longaxe, to die the way he did?  I was a foolish willful girl, playing at the game of thrones like a drunkard rolling dice.  </p>\n<p>The cost of her folly had been dear.  Drey had been sent across the world to Norvos, Garin exiled to Tyrosh for two years, her sweet silly smiling Slyva married off to Eldon Estermont, a man old enough to be her grandsire.  Ser Arys had paid with his life’s blood, Myrcella with an ear.  </p>\n<p>Only Ser Gerold Dayne had escaped unscathed.  Darkstar.  If Myrcella’s horse had not shied at the last instant, his longsword would have opened her from chest to waist instead just taking off her ear.  Dayne was her most grievous sin, the one that Arianne most regretted.  With one stroke of his sword, he had changed her botched plot into something foul and bloody.  If the gods were good, by now Obara Sand had treed him in his mountain fastness and put an end to him.</p>\n<p>She said as much to Daemon Sand that first night, as they made camp.  “Be careful what you pray for, princess,” he replied.  “Darkstar could put an end to Lady Obara just as easily.”</p>\n<p>“She has Areo Hotah with her.”  Prince Doran’s captain of guards had dispatched Ser Arys Oakheart with a single blow, though the Kingsguard were supposed to be the finest knights in all the realm.  “No man can stand against Hotah.”</p>\n<p>“Is that what Darkstar is?  A man?”  Ser Daemon grimaced.  “A man would not have done what he did to Princess Myrcella.  Ser Gerold is more a viper than your uncle ever was.  Prince Oberyn could see that he was poison, he said so more than once.  It’s just a pity that he never got around to killing him.”</p>\n<p>Poison, thought Arianne.  Yes.  Pretty poison, though.  That was how he’d fooled her.  Gerold Dayne was hard and cruel, but so fair to look upon that the princess had not believed half the tales she’d heard of him.  Pretty boys had ever been her weakness, particularly the ones who were dark and dangerous as well.  That was before, when I was just a girl, she told herself.  I am a woman now, my father’s daughter.  I have learned that lesson.</p>\n<p>Come break of day, they were off again.  Elia Sand led the way, her black braid flying behind her as she raced across the dry, cracked plains and up into the hills.  The girl was mad for horses, which might be why she often smelled like one, to the despair of her mother.  Sometimes Arianne felt sorry for Ellaria.  Four girls, and every one of them her father’s daughter.  </p>\n<p>The rest of the party kept a more sedate pace.  The princess found herself riding beside Ser Daemon, remembering other rides when they were younger, rides that often ended in embraces.  When she found herself stealing glances at him, tall and gallant in the saddle, Arianne reminded herself that she was heir to Dorne, and him no more than her shield.  “Tell me what you know of this Jon Connington,” she commanded.</p>\n<p>“He’s dead,” said Daemon Sand.  “He died in the Disputed Lands.  Of drink, I’ve heard it said.”      </p>\n<p>“So a dead drunk leads this army?”</p>\n<p>“Perhaps this Jon Connington is a son of that one.  Or just some clever sellsword who has taken on a dead man’s name.”</p>\n<p>“Or he never died at all.”  Could Connington have been pretending to be dead for all these years?  That would require patience worthy of her father.  The thought made Arianne uneasy.  Treating with a man that subtle could be perilous.  “What was he like before he… before he died?”</p>\n<p>“I was a boy at Godsgrace when he was sent into exile.  I never knew the man.”</p>\n<p>“Then tell me what you’ve heard of him from others.”</p>\n<p>“As my princess commands.  Connington was Lord of Griffin’s Roost when Griffin’s Roost was still a lordship worth the having.  Prince Rhaegar’s squire, or one of them.  Later Prince Rhaegar’s friend and companion.  The Mad King named him Hand during Robert’s Rebellion, but he was defeated at Stoney Sept in the Battle of the Bells, and Robert slipped away.  King Aerys was wroth, and sent Connington into exile.  There he died.”</p>\n<p>“Or not.”  Prince Doran had told her all of that.  There must be more.  “Those are just the things he did.  I know all that.  What sort of man was he?  Honest and honorable, venal and grasping, proud?”</p>\n<p>“Proud, for a certainty.  Even arrogant.  A faithful friend to Rhaegar, but prickly with others.  Robert was his liege, but I’ve heard it said that Connington chafed at serving such a lord.  Even then, Robert was known to be fond of wine and whores.”</p>\n<p>“No whores for Lord Jon, then?”</p>\n<p>“I could not say.  Some men keep their whoring secret.”</p>\n<p>“Did he have a wife?  A paramour?”</p>\n<p>Ser Daemon shrugged.  “Not that I have ever heard.”</p>\n<p>That was troubling too.  Ser Arys Oakheart had broken his vows for her, but it did not sound as if Jon Connington could be similarly swayed.  Can I match such a man with words alone?</p>\n<p>The princess lapsed into silence, all the while pondering what she would find at journey’s end.  That night when they made camp, she crept into the tent she shared with Jayne Ladybright and Elia Sand and slipped the bit of parchment out of her sleeve to read the words again.</p>\n<blockquote>\n<p><em>To Prince Doran of House Martell,</em><br><blockquote class=\"blockquote-center\"><p>You will remember me, I pray.I knew your sister well,and was a leal servant of your good-brother.I grieve for them as you do.I did not die, no more than did your sister’s son.To save his life we kept him hidden,but the time for hiding is done.  A dragon has returned to Westeros to claim his birthright and seek vengeance for his father, and for the princess Elia, his mother.In her name I turn to Dorne.Do not forsake us.</p>\n</blockquote><br>Jon Connington<br>Lord of Griffin’s Roost<br>Hand of the True King</p>\n</blockquote>\n<p>Arianne read the letter thrice, then rolled it up and tucked it back into her sleeve.  A dragon has returned to Westeros, but not the dragon my father was expecting.  Nowhere in the words was there a mention of Daenerys Stormborn… nor of Prince Quentyn, her brother, who had been sent to seek the dragon queen.  The princess remembered how her father had pressed the onyx cyvasse piece into her palm, his voice hoarse and low as he confessed his plan.  A long and perilous voyage, with an uncertain welcome at its end, he had said.  He has gone to bring us back our heart’s desire.  Vengeance.  Justice.  Fire and blood.</p>\n<p>Fire and blood was what Jon Connington (if indeed it was him) was offering as well.  Or was it?  “He comes with sellswords, but no dragons,” Prince Doran had told her, the night the raven came.  “The Golden Company is the best and largest of the free companies, but ten thousand mercenaries cannot hope to win the Seven Kingdoms.  Elia’s son… I would weep for joy if some part of my sister had survived, but what proof do we have that this is Aegon?”  His voice broke when he said that.  “Where are the dragons?” he asked.  “Where is Daenerys?” and Arianne knew that he was really saying, “Where is my son?”</p>\n<p>In the Boneway and the Prince’s Pass, two Dornish hosts had massed, and there they sat, sharpening their spears, polishing their armor, dicing, drinking, quarreling, their numbers dwindling by the day, waiting, waiting, waiting for the Prince of Dorne to loose them on the enemies of House Martell.  Waiting for the dragons.  For fire and blood.  For me.  One word from Arianne and those armies would march… so long as that word wasdragon.  If instead the word she sent was war, Lord Yronwood and Lord Fowler and their armies would remain in place.  The Prince of Dorne was nothing if not subtle; here warmeant wait.  </p>\n<p>At mid-morning on the third day Ghost Hill loomed up before them, its chalk-white walls shining against the deep blue of the Sea of Dorne.  From the square towers at the castle’s corners flew the banners of House Toland; a green dragon biting its own tail, upon a golden field.  The sun-and-spear of House Martell streamed atop the great central keep, gold and red and orange, defiant.</p>\n<p>Ravens had flown ahead to warn Lady Toland of their coming, so the castle gates were open, and Nymella’s eldest daughter rode forth with her steward to meet them near the bottom of the hill.  Tall and fierce, with a blaze of bright red hair tumbling about her shoulders, Valena Toland greeted Arianne with a shout of, “Come at last, have you?  How slow are those horses?”</p>\n<p>“Swift enough to outrun yours to the castle gates.”    </p>\n<p>“We will see about that.”  Valena wheeled her big red around and put her heels into him, and the race was on, through the dusty lanes of the village at the bottom of the hill, as chickens and villagers alike scrambled out of their path.  Arianne was three horse lengths behind by the time she got her mare up to a gallop, but had closed to one halfway up the slope.  The two of them were side-by-side as they thundered towards the gatehouse, but five yards from the gates Elia Sand came flying from the cloud of dust behind them to rush past both of them on her black filly.</p>\n<p>“Are you half horse, child?” Valena asked, laughing, in the yard.  “Princess, did you bring a stable girl?”</p>\n<p>“I’m Elia,” the girl announced.  “Lady Lance.”</p>\n<p>Whoever hung that name on her has much to answer for.  Like as not it had been Prince Oberyn, though, and the Red Viper had never answered to anyone but himself.</p>\n<p>“The girl jouster,” Valena said.  “Yes, I’ve heard of you.  Since you were the first to the yard, you’ve won the honor of watering and bridling the horses.”</p>\n<p>“And after that find the bath house,” said Princess Arianne.  Elia was chalk and dust from heels to hair.  </p>\n<p>That night Arianne and her knights supped with Lady Nymella and her daughters in the great hall of the castle.  Teora, the younger girl, had the same red hair as her sister, but elsewise could not have been more different.  Short, plump, and so shy she might have passed for a mute, she displayed more interest in the spiced beef and honeyed duck than in the comely young knights at the table, and seemed content to let her lady mother and her sister speak for House Toland.  </p>\n<p>“We have heard the same tales here that you have heard at Sunspear,” Lady Nymella told them as her serving man poured the wine.  “Sellswords landing on Cape Wrath, castles under siege or being taken, crops seized or burned.  Where these men come from and who they are, no one is certain.”</p>\n<p>“Pirates and adventurers, we heard at first,” said Valena.  “Then it was supposed to be the Golden Company.  Now it’s said to be Jon Connington, the Mad King’s Hand, come back from the grave to reclaim his birthright.  Whoever it is, Griffin’s Roost has fallen to them.  Rain House, Crow’s Nest, Mistwood, even Greenstone on its island.  All taken.”</p>\n<p>Arianne’s thoughts went at once to her sweet Spotted Slyva.  “Who would want Greenstone?  Was there a battle?”</p>\n<p>“Not as we have heard, but all the tales are garbled.”</p>\n<p>“Tarth has fallen too, some fisherfolk will tell you,” said Valena.  “These sellswords now hold most of Cape Wrath and half the Stepstones.  We hear talk of elephants in the rainwood.”</p>\n<p>“Elephants?”  Arianne did not know what to think of that.  “Are you certain?  Not dragons?”</p>\n<p>“Elephants,” Lady Nymella said firmly.</p>\n<p>“And krakens off the Broken Arm, pulling under crippled galleys,” said Valena.  “The blood draws them to the surface, our maester claims.  There are bodies in the water.  A few have washed up on our shores.  And that’s not half of it.  A new pirate king has set up on Torturer’s Deep.  The Lord of the Waters, he styles himself.  This one has real warships, three-deckers, monstrous large.  You were wise not to come by sea.  Since the Redwyne fleet passed through the Stepstones, those waters are crawling with strange sails, all the way north to the Straights of Tarth and Shipbreaker’s Bay.  Myrmen, Volantenes, Lyseni, even reavers from the Iron Islands.  Some have entered the Sea of Dorne to land men on the south shore of Cape Wrath.  We found a good fast ship for you, as your father commanded, but even so… be careful.”</p>\n<p>It is true, then.  Arianne wanted to ask after her brother, but her father had urged her to watch every word.  If these ships had not brought Quentyn home again with his dragon queen, best not to mention him.  Only her father and a few of his most trusted men knew about her brother’s mission to Slaver’s Bay.  Lady Toland and her daughters were not amongst them.  If it were Quentyn, he would have brought Daenerys back to Dorne, surely.  Why would he risk a landing on Cape Wrath, amongst the stormlords?  </p>\n<p>“Is Dorne at risk?” Lady Nymella asked.  “I confess, each time I see a strange sail my heart leaps to my throat.  What if these ships turn south?  The best part of the Toland strength is with Lord Yronwood in the Boneway.  Who will defend Ghost Hill if these strangers land upon our shores?  Should I call my men home?”</p>\n<p>“Your men are needed where they are, my lady,” Daemon Sand assured her.  Arianne was quick to nod.  Any other counsel could well lead to Lord Yronwood’s host unravelling like an old tapestry as each man rushed home to defend his own lands against supposed enemies who might or might not ever come.  “Once we know beyond a doubt whether these be friends or foes, my father will know what to do,” the princess said.</p>\n<p>It was then that pasty, pudgy Teora raised her eyes from the creamcakes on her plate.  “It is dragons.”      </p>\n<p>“Dragons?”  said her mother.  “Teora, don’t be mad.”</p>\n<p>“I’m not.  They’re coming.”</p>\n<p>“How could you possibly know that?” her sister asked, with a note of scorn in her voice.</p>\n<p>“One of your little dreams?”</p>\n<p>Teora gave a tiny nod, chin trembling.  “They were dancing.  In my dream.  And everywhere the dragons danced the people died.”</p>\n<p>“Seven save us.”  Lady Nymella gave an exasperated sigh.</p>\n<p>“If you did not eat so many creamcakes you would not have such dreams.  Rich foods are not for girls your age, when your humors are so unbalanced.  Maester Toman says — “</p>\n<p>“I hate Maester Toman,” Teora said.  Then she bolted from the table, leaving her lady mother to make apologies for her.</p>\n<p>“Be gentle with her, my lady,” Arianne said.  “I remember when I was her age.  My father despaired of me, I’m sure.”  </p>\n<p>“I can attest to that.”  Ser Daemon took a sip of wine and said, “House Toland has a dragon on its banners.”  </p>\n<p>“A dragon eating its own tail, aye,” Valena said.  “From the days of Aegon’s Conquest.  He did not conquer here.  Elsewhere he burned his foes, him and his sisters, but here we melted away before them, leaving only stone and sand for them to burn.  And round and round the dragons went, snapping at their tails for want of any other food, till they were tied in knots.”</p>\n<p>“Our forebears played their part in that,” Lady Nymella said proudly.  “Bold deeds were done, and brave men died.  All of it was written down by the maesters who served us.  We have books, if my princess would like to know more.”</p>\n<p>“Some other time, perhaps,” said Arianne.</p>\n<p>As Ghost Hill slept that night, the princess donned a hooded cloak against the chill and and walked the castle battlements to clear her thoughts.  Daemon Sand found her leaning on a parapet and gazing out to sea, where the moon was dancing on the water.  “Princess,” he said.  “You ought to be abed.”</p>\n<p>“I could say the same of you.”  Arianne turned to gaze upon his face.  A good face, she decided.  The boy I knew has become a handsome man.  His eyes were as blue as a desert sky, his hair the light brown of the sands they had just crossed.  A close-cropped beard followed the thin of a strong jaw, but could not quite hide the dimples when he smiled.  I always loved his smile.</p>\n<p>The Bastard of Godsgrace was one of Dorne’s finest swords as well, as might be expected from one who had been Prince Oberyn’s squire and had received his knighthood from the Red Viper himself.  Some said that he had been her uncle’s lover too, though seldom to his face.  Arianne did not know the truth of that.  He had been her lover, though.  At fourteen she had given him her maidenhead.  Daemon had not been much older, so their couplings had been as clumsy as they were ardent.  Still, it had been sweet.  </p>\n<p>Arianne gave him her most seductive smile.  “We might share a bed together.”</p>\n<p>Ser Daemon’s face was stone.  “Have you forgotten, princess?  I am bastard born.”  He took her hand in his.  “If I am unworthy of this hand, how can I be worthy of your cunt?”</p>\n<p>She snatched her hand away.  “You deserve a slap for that.”  </p>\n<p>“My face is yours.  Do what you will.”</p>\n<p>“What I will you will not, it seems.  So be it.  Talk with me instead.  Could this truly be Prince Aegon?”</p>\n<p>“Gregor Clegane ripped Aegon out of Elia’s arms and smashed his head against a wall,” Ser Daemon said.  “If Lord Connington’s prince has a crushed skull, I will believe that Aegon Targaryen has returned from the grave.  Elsewise, no.  This is some feigned boy, no more.  A sellsword’s ploy to win support.”</p>\n<p>My father fears the same.  “If not, though… if this truly is Jon Connington, if the boy is Rhaegar’s son… “</p>\n<p>“Are you hoping that he is, or that he’s not?”</p>\n<p>“I… it would give great joy to my father if Elia’s son were still alive.  He loved his sister well.”</p>\n<p>“It was you I asked about, not your father.”</p>\n<p>So it was.  “I was seven when Elia died.  They say I held her daughter Rhaenys once, when I was too young to remember.  Aegon will be a stranger to me, whether true or false.”  The princess paused.  “We looked for Rhaegar’s sister, not his son.”  Her father had confided in Ser Daemon when he chose him as his daughter’s shield; with him at least she could speak freely.  “I would sooner it were Quentyn who’d returned.”</p>\n<p>“Or so you say,” said Daemon Sand.  “Good night, princess.”  He bowed to her, and left her standing there.</p>\n<p>What did he mean by that?  Arianne watched him walk away.  What sort of sister would I be, if I did not want my brother back?  It was true, she had resented Quentyn for all those years that she had thought their father meant to name him as his heir in place of her, but that had turned out to be just a misunderstanding.  She was the heir to Dorne, she had her father’s word on that.  Quentyn would have his dragon queen, Daenerys.</p>\n<p>In Sunspear hung a portrait of the Princess Daenerys who had come to Dorne to marry one of Arianne’s forebears.  In her younger days Arianne had spent hours gazing at it, back when she was just a pudgy flat-chested girl on the cusp of maidenhood who prayed every night for the gods to make her pretty.  A hundred years ago, Daenerys Targaryen came to Dorne to make a peace.  Now another comes to make a war, and my brother will be her king and consort.King Quentyn.  Why did that sound so silly?  </p>\n<p>Almost as silly as Quentyn riding on a dragon.  Her brother was an earnest boy,well-behaved and dutiful, but dull.  And plain, so plain.  The gods had given Arianne the beauty she had prayed for, but Quentyn must have prayed for something else.  His head was overlarge and sort of square, his hair the color of dried mud.  His shoulders slumped as well, and he was too thick about the middle.  He looks too much like Father.</p>\n<p>“I love my brother,” said Arianne, though only the moon could hear her.  Though if truth be told, she scarcely knew him.  Quentyn had been fostered by Lord Anders of House Yronwood, the Bloodroyal, the son of Lord Ormond Yronwood and grandson of Lord Edgar.  In his youth her uncle Oberyn had fought a duel with Edgar, had given him a wound that mortified and killed him.  Afterward men called him ‘the Red Viper,’ and spoke of poison on his blade.  The Yronwoods were an ancient house, proud and powerful.  Before the coming of the Rhoynar they had been kings over half of Dorne, with domains that dwarfed those of House Martell.  Blood feud and rebellion would surely have followed Lord Edgar’s death, had not her father acted at once.  The Red Viper went to Oldtown, thence across to the narrow sea to Lys, though none dared call it exile.  And in due time, Quentyn was given to Lord Anders to foster as a sign of trust.  That helped to heal the breach between Sunspear and the Yronwoods, but it had opened new ones between Quentyn and the Sand Snakes… and Arianne had always been closer to her cousins than to her distant brother.</p>\n<p>“We are still the same blood, though,” she whispered.  “Of course I want my brother home.  I do.”  The wind off the sea was raising gooseprickles all up and down her arms.  Arianne pulled her cloak about herself, and went off to seek her bed.</p>\n<p>Their ship was called the Peregrine.  They sailed upon the morning tide.  The gods were good to them, the sea calm.  Even with good winds, the crossing took a day and a night.  Jayne Ladybright grew greensick and spent most of the voyage spewing, which Elia Sand seemed to find hilarious.  “Someone needs to spank that child,” Joss Hood was heard to say… but Elia was amongst those who heard him say it.</p>\n<p>“I am almost a woman grown, ser,” she responded haughtily.  “I’ll let you spank me, though…  but first you’ll need to tilt with me, and knock me off my horse.”</p>\n<p>“We are on a ship, and without horses,” Joss replied.</p>\n<p>“And ladies do not joust,” insisted Ser Garibald Shells, a far more serious and proper young man than his companion.</p>\n<p>“I do.  I’m Lady Lance.”</p>\n<p>Arianne had heard enough.  “You may be a lance, but you are no lady.  Go below and stay there till we reach land.”</p>\n<p>Elsewise the crossing was uneventful.  At dusk they spied a galley in the distance, her oars rising and falling against the evening stars, but she was moving away from them, and soon dwindled and was gone.  Arianne played a game of cyvasse with Ser Daemon, and another one with Garibald Shells, and somehow managed to lose both.  Ser Garibald was kind enough to say that she played a gallant game, but Daemon mocked her.  “You have other pieces beside the dragon, princess.  Try moving them sometime.”</p>\n<p>“I like the dragon.”  She wanted to slap the smile off his face.  Or kiss it off, perhaps.  The man was as smug as he was comely.  Of all the knights in Dorne, why did my father chose this one to be my shield?  He knows our history.  “It is just a game.  Tell me of Prince Viserys.”</p>\n<p>“The Beggar King?”  Ser Daemon seemed surprised.  </p>\n<p>“Everyone says that Prince Rhaegar was beautiful.  Was Viserys beautiful as well?”</p>\n<p>“I suppose.  He was Targaryen.  I never saw the man.”</p>\n<p>The secret pact that Prince Doran had made all those years called for Arianne to be wed to Prince Viserys, not Quentyn to Daenerys.  It had all come undone on the Dothraki sea, when he was murdered.  Crowned with a pot of molten gold.  “He was killed by a Dothraki khal,” said Arianne.  “The dragon queen’s own husband.”</p>\n<p>“So I’ve heard.  What of it?”      </p>\n<p>“Just… why did Daenerys let it happen?  Viserys was her brother.  All that remained of her own blood.”</p>\n<p>“The Dothraki are a savage folk.  Who can know why they kill?  Perhaps Viserys wiped his arse with the wrong hand.”</p>\n<p>Perhaps, thought Arianne, or perhaps Daenerys realized that once her brother was crowned and wed to me, she would be doomed to spend the rest of her life sleeping in a tent and smelling like a horse.  “She is the Mad King’s daughter,” the princess said.  “How do we do know — “</p>\n<p>“We cannot know,” Ser Daemon said.  “We can only hope.”</p>"},{"title":"思考篇：1","date":"2016-04-10T13:51:15.000Z","updated":"2016-08-24T15:50:44.365Z","comments":1,"_content":"\n创立博客已数日有余，然，心中杂念繁多，无法静思，直达今日，方下定决心写写感悟。长路漫漫，悠悠数载，狗血淋漓，失尽江山。纵有千古奇谋，难敌花落谁家，吾辈亦何如。\n\n究竟什么是技术呢？什么又是程序员呢？之前我对于技术的理解是业务驱动型的，就是说，只有在有了需求再来考虑技术的实现。这的确是技术的发展轨迹，历来如此。可是对于程序员却不是，最好的程序员，一定是那个热爱技术，追求技术细节，刨根问底的人。这便是我理解的定义。\n<!--more-->\n近来，自己面临毕业后的第一个十字路口，一边是成为上述的合格的程序员，刨根问底，夜以继日。另一种，就是学习新的技术，为了我现在的新的业务需求花费更大的精力。不论哪一种都是痛苦的，关键是我的选择究竟是什么。自己究竟该怎么办？\n\n我还要不要做一个努力的人，为了逃避选择，我已经沉沦很久了，我已经不是那个热爱学习的少年了。看了这么多年书，我究竟得到了什么？除了在扯淡的时候用各种方式击倒对手，其他一概丢失。最爱的作家，川端康成、春上春树、加西亚·马尔克斯、余秋雨、麦尔维尔等等，我还是否保留一颗热爱的灵魂，我有多久没有阅读他们的著作了。上一周开始阅读《看不见的城市》，读了一半就束之高阁了，再没有拿起来，我真的是没有时间吗？不是的，不是没有，一天的时间表大概就是，九点上班，晚上六点下班，回家、吃饭算上两个小时也就是八点，那八点之后到晚上十二点，我就有四个小时，这四个小时，我在干嘛呢？仔细想想，我在玩游戏，我在逃避，我连认真看一部经典电影的心态都做不到，我用各种娱乐节目来让自己忘记我还要去做选择。\n\n我想要的生活究竟是什么呢？我热爱写诗，纵使我两个多月没有写了，可是有时候兴趣上来了，我还是想要写点儿什么的。诗人的世界是不需要理性的，需要一个感性的认识，程序员的世界，是需要逻辑思维能力的，把现实逻辑抽象出来变成程序，纵使现在的编程语言已经足够的“高级”，可是依旧存在学习成本，依旧需要抽象能力。好像扯远了，我在思考的是我想要的是什么样子的生活，实话是，我想要读读书、游游世界、抒发抒发感慨、写写文章，策马扬鞭，纵横四海，这是理想的美好生活。生活只是生活，工作只是工作，这是我花了很多时间得出的结论，为了做好我的工作，我愿意去花苦功，也愿意去压缩生活，可是却不能阻止我熄灭我的理想，不管是什么理由都不行，哪怕我已经放弃为了我的理想去奋斗，哪怕我永远不可能去实现我的理想，我还是要给自己留下这么一株火苗，生生不息。\n\n接下来就说到工作了，理想的工作状态是什么呢？为什么验证某个东西的正确与否，可以花无限的时间去研究，可是大多数的工作都不是这样子的，你可以去花时间去研究，可是必须保证是在有限的时间内为了你现在的工作内容做的改进，而不是一些完全无关的业务需求。我知道自己不能永远只是一个初级程序员，后面的路还有很长的时间要去走。\n\n今天，这篇文章，是在上午和一群小伙伴愉快地聊天，以及下午给了我很大打击的一个人的点醒之后，最终决定还是写点儿什么来的好。毕竟，我不能一直逃避，不能一直做加减法，我必须为之后的工作和生活做出安排的计划。**以及，我明确我要做一个程序员，如果精力充足也许不只是程序员，这是我的工作目标**。\n\n以及最后，关于上面放的三篇文章的解释，那是[《冰与火之歌：凛冬的寒风》J.R.R·马丁释出的唯一三篇节选](http://www.georgerrmartin.com/excerpt-from-the-winds-of-winter/ \"官网\")，新书也许明年能够读到吧。\n","source":"_posts/ThinkingOne.md","raw":"---\ntitle: 思考篇：1\ndate: 2016-04-10 21:51:15\nupdated:\ntags: 随笔\ncomments: true\n---\n\n创立博客已数日有余，然，心中杂念繁多，无法静思，直达今日，方下定决心写写感悟。长路漫漫，悠悠数载，狗血淋漓，失尽江山。纵有千古奇谋，难敌花落谁家，吾辈亦何如。\n\n究竟什么是技术呢？什么又是程序员呢？之前我对于技术的理解是业务驱动型的，就是说，只有在有了需求再来考虑技术的实现。这的确是技术的发展轨迹，历来如此。可是对于程序员却不是，最好的程序员，一定是那个热爱技术，追求技术细节，刨根问底的人。这便是我理解的定义。\n<!--more-->\n近来，自己面临毕业后的第一个十字路口，一边是成为上述的合格的程序员，刨根问底，夜以继日。另一种，就是学习新的技术，为了我现在的新的业务需求花费更大的精力。不论哪一种都是痛苦的，关键是我的选择究竟是什么。自己究竟该怎么办？\n\n我还要不要做一个努力的人，为了逃避选择，我已经沉沦很久了，我已经不是那个热爱学习的少年了。看了这么多年书，我究竟得到了什么？除了在扯淡的时候用各种方式击倒对手，其他一概丢失。最爱的作家，川端康成、春上春树、加西亚·马尔克斯、余秋雨、麦尔维尔等等，我还是否保留一颗热爱的灵魂，我有多久没有阅读他们的著作了。上一周开始阅读《看不见的城市》，读了一半就束之高阁了，再没有拿起来，我真的是没有时间吗？不是的，不是没有，一天的时间表大概就是，九点上班，晚上六点下班，回家、吃饭算上两个小时也就是八点，那八点之后到晚上十二点，我就有四个小时，这四个小时，我在干嘛呢？仔细想想，我在玩游戏，我在逃避，我连认真看一部经典电影的心态都做不到，我用各种娱乐节目来让自己忘记我还要去做选择。\n\n我想要的生活究竟是什么呢？我热爱写诗，纵使我两个多月没有写了，可是有时候兴趣上来了，我还是想要写点儿什么的。诗人的世界是不需要理性的，需要一个感性的认识，程序员的世界，是需要逻辑思维能力的，把现实逻辑抽象出来变成程序，纵使现在的编程语言已经足够的“高级”，可是依旧存在学习成本，依旧需要抽象能力。好像扯远了，我在思考的是我想要的是什么样子的生活，实话是，我想要读读书、游游世界、抒发抒发感慨、写写文章，策马扬鞭，纵横四海，这是理想的美好生活。生活只是生活，工作只是工作，这是我花了很多时间得出的结论，为了做好我的工作，我愿意去花苦功，也愿意去压缩生活，可是却不能阻止我熄灭我的理想，不管是什么理由都不行，哪怕我已经放弃为了我的理想去奋斗，哪怕我永远不可能去实现我的理想，我还是要给自己留下这么一株火苗，生生不息。\n\n接下来就说到工作了，理想的工作状态是什么呢？为什么验证某个东西的正确与否，可以花无限的时间去研究，可是大多数的工作都不是这样子的，你可以去花时间去研究，可是必须保证是在有限的时间内为了你现在的工作内容做的改进，而不是一些完全无关的业务需求。我知道自己不能永远只是一个初级程序员，后面的路还有很长的时间要去走。\n\n今天，这篇文章，是在上午和一群小伙伴愉快地聊天，以及下午给了我很大打击的一个人的点醒之后，最终决定还是写点儿什么来的好。毕竟，我不能一直逃避，不能一直做加减法，我必须为之后的工作和生活做出安排的计划。**以及，我明确我要做一个程序员，如果精力充足也许不只是程序员，这是我的工作目标**。\n\n以及最后，关于上面放的三篇文章的解释，那是[《冰与火之歌：凛冬的寒风》J.R.R·马丁释出的唯一三篇节选](http://www.georgerrmartin.com/excerpt-from-the-winds-of-winter/ \"官网\")，新书也许明年能够读到吧。\n","slug":"ThinkingOne","published":1,"layout":"post","photos":[],"link":"","_id":"cis92veao0008h8dqty1fpyeh","content":"<p>创立博客已数日有余，然，心中杂念繁多，无法静思，直达今日，方下定决心写写感悟。长路漫漫，悠悠数载，狗血淋漓，失尽江山。纵有千古奇谋，难敌花落谁家，吾辈亦何如。</p>\n<p>究竟什么是技术呢？什么又是程序员呢？之前我对于技术的理解是业务驱动型的，就是说，只有在有了需求再来考虑技术的实现。这的确是技术的发展轨迹，历来如此。可是对于程序员却不是，最好的程序员，一定是那个热爱技术，追求技术细节，刨根问底的人。这便是我理解的定义。<br><a id=\"more\"></a><br>近来，自己面临毕业后的第一个十字路口，一边是成为上述的合格的程序员，刨根问底，夜以继日。另一种，就是学习新的技术，为了我现在的新的业务需求花费更大的精力。不论哪一种都是痛苦的，关键是我的选择究竟是什么。自己究竟该怎么办？</p>\n<p>我还要不要做一个努力的人，为了逃避选择，我已经沉沦很久了，我已经不是那个热爱学习的少年了。看了这么多年书，我究竟得到了什么？除了在扯淡的时候用各种方式击倒对手，其他一概丢失。最爱的作家，川端康成、春上春树、加西亚·马尔克斯、余秋雨、麦尔维尔等等，我还是否保留一颗热爱的灵魂，我有多久没有阅读他们的著作了。上一周开始阅读《看不见的城市》，读了一半就束之高阁了，再没有拿起来，我真的是没有时间吗？不是的，不是没有，一天的时间表大概就是，九点上班，晚上六点下班，回家、吃饭算上两个小时也就是八点，那八点之后到晚上十二点，我就有四个小时，这四个小时，我在干嘛呢？仔细想想，我在玩游戏，我在逃避，我连认真看一部经典电影的心态都做不到，我用各种娱乐节目来让自己忘记我还要去做选择。</p>\n<p>我想要的生活究竟是什么呢？我热爱写诗，纵使我两个多月没有写了，可是有时候兴趣上来了，我还是想要写点儿什么的。诗人的世界是不需要理性的，需要一个感性的认识，程序员的世界，是需要逻辑思维能力的，把现实逻辑抽象出来变成程序，纵使现在的编程语言已经足够的“高级”，可是依旧存在学习成本，依旧需要抽象能力。好像扯远了，我在思考的是我想要的是什么样子的生活，实话是，我想要读读书、游游世界、抒发抒发感慨、写写文章，策马扬鞭，纵横四海，这是理想的美好生活。生活只是生活，工作只是工作，这是我花了很多时间得出的结论，为了做好我的工作，我愿意去花苦功，也愿意去压缩生活，可是却不能阻止我熄灭我的理想，不管是什么理由都不行，哪怕我已经放弃为了我的理想去奋斗，哪怕我永远不可能去实现我的理想，我还是要给自己留下这么一株火苗，生生不息。</p>\n<p>接下来就说到工作了，理想的工作状态是什么呢？为什么验证某个东西的正确与否，可以花无限的时间去研究，可是大多数的工作都不是这样子的，你可以去花时间去研究，可是必须保证是在有限的时间内为了你现在的工作内容做的改进，而不是一些完全无关的业务需求。我知道自己不能永远只是一个初级程序员，后面的路还有很长的时间要去走。</p>\n<p>今天，这篇文章，是在上午和一群小伙伴愉快地聊天，以及下午给了我很大打击的一个人的点醒之后，最终决定还是写点儿什么来的好。毕竟，我不能一直逃避，不能一直做加减法，我必须为之后的工作和生活做出安排的计划。<strong>以及，我明确我要做一个程序员，如果精力充足也许不只是程序员，这是我的工作目标</strong>。</p>\n<p>以及最后，关于上面放的三篇文章的解释，那是<a href=\"http://www.georgerrmartin.com/excerpt-from-the-winds-of-winter/\" title=\"官网\" target=\"_blank\" rel=\"external\">《冰与火之歌：凛冬的寒风》J.R.R·马丁释出的唯一三篇节选</a>，新书也许明年能够读到吧。</p>\n","excerpt":"<p>创立博客已数日有余，然，心中杂念繁多，无法静思，直达今日，方下定决心写写感悟。长路漫漫，悠悠数载，狗血淋漓，失尽江山。纵有千古奇谋，难敌花落谁家，吾辈亦何如。</p>\n<p>究竟什么是技术呢？什么又是程序员呢？之前我对于技术的理解是业务驱动型的，就是说，只有在有了需求再来考虑技术的实现。这的确是技术的发展轨迹，历来如此。可是对于程序员却不是，最好的程序员，一定是那个热爱技术，追求技术细节，刨根问底的人。这便是我理解的定义。<br>","more":"<br>近来，自己面临毕业后的第一个十字路口，一边是成为上述的合格的程序员，刨根问底，夜以继日。另一种，就是学习新的技术，为了我现在的新的业务需求花费更大的精力。不论哪一种都是痛苦的，关键是我的选择究竟是什么。自己究竟该怎么办？</p>\n<p>我还要不要做一个努力的人，为了逃避选择，我已经沉沦很久了，我已经不是那个热爱学习的少年了。看了这么多年书，我究竟得到了什么？除了在扯淡的时候用各种方式击倒对手，其他一概丢失。最爱的作家，川端康成、春上春树、加西亚·马尔克斯、余秋雨、麦尔维尔等等，我还是否保留一颗热爱的灵魂，我有多久没有阅读他们的著作了。上一周开始阅读《看不见的城市》，读了一半就束之高阁了，再没有拿起来，我真的是没有时间吗？不是的，不是没有，一天的时间表大概就是，九点上班，晚上六点下班，回家、吃饭算上两个小时也就是八点，那八点之后到晚上十二点，我就有四个小时，这四个小时，我在干嘛呢？仔细想想，我在玩游戏，我在逃避，我连认真看一部经典电影的心态都做不到，我用各种娱乐节目来让自己忘记我还要去做选择。</p>\n<p>我想要的生活究竟是什么呢？我热爱写诗，纵使我两个多月没有写了，可是有时候兴趣上来了，我还是想要写点儿什么的。诗人的世界是不需要理性的，需要一个感性的认识，程序员的世界，是需要逻辑思维能力的，把现实逻辑抽象出来变成程序，纵使现在的编程语言已经足够的“高级”，可是依旧存在学习成本，依旧需要抽象能力。好像扯远了，我在思考的是我想要的是什么样子的生活，实话是，我想要读读书、游游世界、抒发抒发感慨、写写文章，策马扬鞭，纵横四海，这是理想的美好生活。生活只是生活，工作只是工作，这是我花了很多时间得出的结论，为了做好我的工作，我愿意去花苦功，也愿意去压缩生活，可是却不能阻止我熄灭我的理想，不管是什么理由都不行，哪怕我已经放弃为了我的理想去奋斗，哪怕我永远不可能去实现我的理想，我还是要给自己留下这么一株火苗，生生不息。</p>\n<p>接下来就说到工作了，理想的工作状态是什么呢？为什么验证某个东西的正确与否，可以花无限的时间去研究，可是大多数的工作都不是这样子的，你可以去花时间去研究，可是必须保证是在有限的时间内为了你现在的工作内容做的改进，而不是一些完全无关的业务需求。我知道自己不能永远只是一个初级程序员，后面的路还有很长的时间要去走。</p>\n<p>今天，这篇文章，是在上午和一群小伙伴愉快地聊天，以及下午给了我很大打击的一个人的点醒之后，最终决定还是写点儿什么来的好。毕竟，我不能一直逃避，不能一直做加减法，我必须为之后的工作和生活做出安排的计划。<strong>以及，我明确我要做一个程序员，如果精力充足也许不只是程序员，这是我的工作目标</strong>。</p>\n<p>以及最后，关于上面放的三篇文章的解释，那是<a href=\"http://www.georgerrmartin.com/excerpt-from-the-winds-of-winter/\" title=\"官网\">《冰与火之歌：凛冬的寒风》J.R.R·马丁释出的唯一三篇节选</a>，新书也许明年能够读到吧。</p>"},{"title":"关于技术选型","date":"2016-04-13T12:59:36.000Z","update":"2016-04-13T12:59:36.000Z","comments":1,"_content":"## 关于技术选型\n\n对于一个初成长的互联网团队而言，如何选定自己团队需要用的技术是很关键\n1. 要兼顾团队的实力，我相信有一定量的初创团队在一开始的时候的技术实力一定是很弱的，而且也没有多余的钱去请大牛来帮你开发，如果使用外包的话，如果使用外包的最后一定会遇到一堆的坑，说不定哪天恰好在你高速发展的时候你不得不因为技术原因推到重来。那个时候就真的是欲哭无泪了。\n2. 另一方面也要考虑后面的可维护性，不然随着业务的扩展，可维护性的降低，代码迭代的越来越艰难，新功能的开发也越来越慢。现在前端、后端、移动端的选择越来越多，之所以出现这么多的选择就是为了快速提高开发效率，分工合作，高度耦合，提高网站或者app的访问速度。\n3. 不能只使用新的技术，新的技术有可能不稳定，说不定过段时间就被淘汰了。而且太过新颖的技术，网上的教程也很少，甚至有可能连Google都找不到，也不利于新的技术的学习。\n4. 还有最关键的一条，团队才是最重要的。\n<!--more-->\n\n## 关于我的选择\n\n首先我们的主要目标并不是需要一个强大的后台，主要目标是有一个前台的展示效果，足够的好看，访问速度足够的快就行了，而且，团队里面的技术人员都不是做后台的，我自己平时主要是Android程序员，虽然会Java，可是使用Java来开发后台却是一件麻烦的事情，也不利于团队协作。如果说把前端完全外包出去，一来无法保证开发进度，也无法保证开发质量，也不利于后期的维护。\n\n经过几天的思考选择，最后我选择了node.js 用到的技术有：\n- [**node.js**](http://www.imooc.com/learn/75 \"一个视频教学的例子\")  主要用于连接前端和后端，也可以单独作为后端来使用，好处就是响应速度更快，网上的教程也足够的多。\n- **express** 基于node.js的一个MVC的框架，好处就是足够的流行，教程也很多。\n- [**bootstrap**](http://www.bootcss.com/ \"bootstrap的中文教程网站\") 这是一个前端的展示页面，看了一些实例之后觉得，可以应付我们的前端需求，也很简单，上手也很容易，文杰也应该能够上手,而且最新的[bootstrap3](http://v3.bootcss.com/css/ \"关于bootstrap3的介绍\")对于移动端的支持也足够的好。\n- **mysql** 本来看到有的文章说node.js因为是使用js写的，所以对于MongoDB天然地支持，可是我看了一些文档之后觉得，现在没必要使用MongoDB，对于团队来说学习成本太高了，但是现在我对mysql更熟悉的情况下，贸然使用另一个完全不熟悉的数据库会有很大的风险。\n\n> **貌似需要用到语言有 sql，js，html，css，less**\n\n## 后记\n\n这几天就是在面临一些艰难的选择，虽然我知道在Android程序员的这条路上，我还有很多的路要走，可是现在面临新的需求却不得不去解决它。哪怕有可能我在Android这条路上目前无法做到足够的深度，不，花更多的时间就是了。\n\n作为程序员而言，最重要的是什么，那就是学习能力了，恐怕很多人都会对这句话保持赞同的。是时候继续开始新的学习了。\n","source":"_posts/about-technology-selection.md","raw":"---\ntitle: 关于技术选型\ndate: 2016-04-13 20:59:36\ntags: 随笔\nupdate: 2016-04-13 20:59:36\ncomments: true\n---\n## 关于技术选型\n\n对于一个初成长的互联网团队而言，如何选定自己团队需要用的技术是很关键\n1. 要兼顾团队的实力，我相信有一定量的初创团队在一开始的时候的技术实力一定是很弱的，而且也没有多余的钱去请大牛来帮你开发，如果使用外包的话，如果使用外包的最后一定会遇到一堆的坑，说不定哪天恰好在你高速发展的时候你不得不因为技术原因推到重来。那个时候就真的是欲哭无泪了。\n2. 另一方面也要考虑后面的可维护性，不然随着业务的扩展，可维护性的降低，代码迭代的越来越艰难，新功能的开发也越来越慢。现在前端、后端、移动端的选择越来越多，之所以出现这么多的选择就是为了快速提高开发效率，分工合作，高度耦合，提高网站或者app的访问速度。\n3. 不能只使用新的技术，新的技术有可能不稳定，说不定过段时间就被淘汰了。而且太过新颖的技术，网上的教程也很少，甚至有可能连Google都找不到，也不利于新的技术的学习。\n4. 还有最关键的一条，团队才是最重要的。\n<!--more-->\n\n## 关于我的选择\n\n首先我们的主要目标并不是需要一个强大的后台，主要目标是有一个前台的展示效果，足够的好看，访问速度足够的快就行了，而且，团队里面的技术人员都不是做后台的，我自己平时主要是Android程序员，虽然会Java，可是使用Java来开发后台却是一件麻烦的事情，也不利于团队协作。如果说把前端完全外包出去，一来无法保证开发进度，也无法保证开发质量，也不利于后期的维护。\n\n经过几天的思考选择，最后我选择了node.js 用到的技术有：\n- [**node.js**](http://www.imooc.com/learn/75 \"一个视频教学的例子\")  主要用于连接前端和后端，也可以单独作为后端来使用，好处就是响应速度更快，网上的教程也足够的多。\n- **express** 基于node.js的一个MVC的框架，好处就是足够的流行，教程也很多。\n- [**bootstrap**](http://www.bootcss.com/ \"bootstrap的中文教程网站\") 这是一个前端的展示页面，看了一些实例之后觉得，可以应付我们的前端需求，也很简单，上手也很容易，文杰也应该能够上手,而且最新的[bootstrap3](http://v3.bootcss.com/css/ \"关于bootstrap3的介绍\")对于移动端的支持也足够的好。\n- **mysql** 本来看到有的文章说node.js因为是使用js写的，所以对于MongoDB天然地支持，可是我看了一些文档之后觉得，现在没必要使用MongoDB，对于团队来说学习成本太高了，但是现在我对mysql更熟悉的情况下，贸然使用另一个完全不熟悉的数据库会有很大的风险。\n\n> **貌似需要用到语言有 sql，js，html，css，less**\n\n## 后记\n\n这几天就是在面临一些艰难的选择，虽然我知道在Android程序员的这条路上，我还有很多的路要走，可是现在面临新的需求却不得不去解决它。哪怕有可能我在Android这条路上目前无法做到足够的深度，不，花更多的时间就是了。\n\n作为程序员而言，最重要的是什么，那就是学习能力了，恐怕很多人都会对这句话保持赞同的。是时候继续开始新的学习了。\n","slug":"about-technology-selection","published":1,"updated":"2016-08-24T15:50:44.380Z","layout":"post","photos":[],"link":"","_id":"cis92vear000ah8dq1q9i9tye","content":"<h2 id=\"关于技术选型\"><a href=\"#关于技术选型\" class=\"headerlink\" title=\"关于技术选型\"></a>关于技术选型</h2><p>对于一个初成长的互联网团队而言，如何选定自己团队需要用的技术是很关键</p>\n<ol>\n<li>要兼顾团队的实力，我相信有一定量的初创团队在一开始的时候的技术实力一定是很弱的，而且也没有多余的钱去请大牛来帮你开发，如果使用外包的话，如果使用外包的最后一定会遇到一堆的坑，说不定哪天恰好在你高速发展的时候你不得不因为技术原因推到重来。那个时候就真的是欲哭无泪了。</li>\n<li>另一方面也要考虑后面的可维护性，不然随着业务的扩展，可维护性的降低，代码迭代的越来越艰难，新功能的开发也越来越慢。现在前端、后端、移动端的选择越来越多，之所以出现这么多的选择就是为了快速提高开发效率，分工合作，高度耦合，提高网站或者app的访问速度。</li>\n<li>不能只使用新的技术，新的技术有可能不稳定，说不定过段时间就被淘汰了。而且太过新颖的技术，网上的教程也很少，甚至有可能连Google都找不到，也不利于新的技术的学习。</li>\n<li>还有最关键的一条，团队才是最重要的。<a id=\"more\"></a>\n</li>\n</ol>\n<h2 id=\"关于我的选择\"><a href=\"#关于我的选择\" class=\"headerlink\" title=\"关于我的选择\"></a>关于我的选择</h2><p>首先我们的主要目标并不是需要一个强大的后台，主要目标是有一个前台的展示效果，足够的好看，访问速度足够的快就行了，而且，团队里面的技术人员都不是做后台的，我自己平时主要是Android程序员，虽然会Java，可是使用Java来开发后台却是一件麻烦的事情，也不利于团队协作。如果说把前端完全外包出去，一来无法保证开发进度，也无法保证开发质量，也不利于后期的维护。</p>\n<p>经过几天的思考选择，最后我选择了node.js 用到的技术有：</p>\n<ul>\n<li><a href=\"http://www.imooc.com/learn/75\" title=\"一个视频教学的例子\" target=\"_blank\" rel=\"external\"><strong>node.js</strong></a>  主要用于连接前端和后端，也可以单独作为后端来使用，好处就是响应速度更快，网上的教程也足够的多。</li>\n<li><strong>express</strong> 基于node.js的一个MVC的框架，好处就是足够的流行，教程也很多。</li>\n<li><a href=\"http://www.bootcss.com/\" title=\"bootstrap的中文教程网站\" target=\"_blank\" rel=\"external\"><strong>bootstrap</strong></a> 这是一个前端的展示页面，看了一些实例之后觉得，可以应付我们的前端需求，也很简单，上手也很容易，文杰也应该能够上手,而且最新的<a href=\"http://v3.bootcss.com/css/\" title=\"关于bootstrap3的介绍\" target=\"_blank\" rel=\"external\">bootstrap3</a>对于移动端的支持也足够的好。</li>\n<li><strong>mysql</strong> 本来看到有的文章说node.js因为是使用js写的，所以对于MongoDB天然地支持，可是我看了一些文档之后觉得，现在没必要使用MongoDB，对于团队来说学习成本太高了，但是现在我对mysql更熟悉的情况下，贸然使用另一个完全不熟悉的数据库会有很大的风险。</li>\n</ul>\n<blockquote>\n<p><strong>貌似需要用到语言有 sql，js，html，css，less</strong></p>\n</blockquote>\n<h2 id=\"后记\"><a href=\"#后记\" class=\"headerlink\" title=\"后记\"></a>后记</h2><p>这几天就是在面临一些艰难的选择，虽然我知道在Android程序员的这条路上，我还有很多的路要走，可是现在面临新的需求却不得不去解决它。哪怕有可能我在Android这条路上目前无法做到足够的深度，不，花更多的时间就是了。</p>\n<p>作为程序员而言，最重要的是什么，那就是学习能力了，恐怕很多人都会对这句话保持赞同的。是时候继续开始新的学习了。</p>\n","excerpt":"<h2 id=\"关于技术选型\"><a href=\"#关于技术选型\" class=\"headerlink\" title=\"关于技术选型\"></a>关于技术选型</h2><p>对于一个初成长的互联网团队而言，如何选定自己团队需要用的技术是很关键</p>\n<ol>\n<li>要兼顾团队的实力，我相信有一定量的初创团队在一开始的时候的技术实力一定是很弱的，而且也没有多余的钱去请大牛来帮你开发，如果使用外包的话，如果使用外包的最后一定会遇到一堆的坑，说不定哪天恰好在你高速发展的时候你不得不因为技术原因推到重来。那个时候就真的是欲哭无泪了。</li>\n<li>另一方面也要考虑后面的可维护性，不然随着业务的扩展，可维护性的降低，代码迭代的越来越艰难，新功能的开发也越来越慢。现在前端、后端、移动端的选择越来越多，之所以出现这么多的选择就是为了快速提高开发效率，分工合作，高度耦合，提高网站或者app的访问速度。</li>\n<li>不能只使用新的技术，新的技术有可能不稳定，说不定过段时间就被淘汰了。而且太过新颖的技术，网上的教程也很少，甚至有可能连Google都找不到，也不利于新的技术的学习。</li>\n<li>还有最关键的一条，团队才是最重要的。","more":"</li>\n</ol>\n<h2 id=\"关于我的选择\"><a href=\"#关于我的选择\" class=\"headerlink\" title=\"关于我的选择\"></a>关于我的选择</h2><p>首先我们的主要目标并不是需要一个强大的后台，主要目标是有一个前台的展示效果，足够的好看，访问速度足够的快就行了，而且，团队里面的技术人员都不是做后台的，我自己平时主要是Android程序员，虽然会Java，可是使用Java来开发后台却是一件麻烦的事情，也不利于团队协作。如果说把前端完全外包出去，一来无法保证开发进度，也无法保证开发质量，也不利于后期的维护。</p>\n<p>经过几天的思考选择，最后我选择了node.js 用到的技术有：</p>\n<ul>\n<li><a href=\"http://www.imooc.com/learn/75\" title=\"一个视频教学的例子\"><strong>node.js</strong></a>  主要用于连接前端和后端，也可以单独作为后端来使用，好处就是响应速度更快，网上的教程也足够的多。</li>\n<li><strong>express</strong> 基于node.js的一个MVC的框架，好处就是足够的流行，教程也很多。</li>\n<li><a href=\"http://www.bootcss.com/\" title=\"bootstrap的中文教程网站\"><strong>bootstrap</strong></a> 这是一个前端的展示页面，看了一些实例之后觉得，可以应付我们的前端需求，也很简单，上手也很容易，文杰也应该能够上手,而且最新的<a href=\"http://v3.bootcss.com/css/\" title=\"关于bootstrap3的介绍\">bootstrap3</a>对于移动端的支持也足够的好。</li>\n<li><strong>mysql</strong> 本来看到有的文章说node.js因为是使用js写的，所以对于MongoDB天然地支持，可是我看了一些文档之后觉得，现在没必要使用MongoDB，对于团队来说学习成本太高了，但是现在我对mysql更熟悉的情况下，贸然使用另一个完全不熟悉的数据库会有很大的风险。</li>\n</ul>\n<blockquote>\n<p><strong>貌似需要用到语言有 sql，js，html，css，less</strong></p>\n</blockquote>\n<h2 id=\"后记\"><a href=\"#后记\" class=\"headerlink\" title=\"后记\"></a>后记</h2><p>这几天就是在面临一些艰难的选择，虽然我知道在Android程序员的这条路上，我还有很多的路要走，可是现在面临新的需求却不得不去解决它。哪怕有可能我在Android这条路上目前无法做到足够的深度，不，花更多的时间就是了。</p>\n<p>作为程序员而言，最重要的是什么，那就是学习能力了，恐怕很多人都会对这句话保持赞同的。是时候继续开始新的学习了。</p>"},{"title":"关于SharedPreferences的一次问题","date":"2016-06-02T12:50:22.000Z","_content":"SharedPreferences可以用来保存一些很简单的数据，对应的就是一个key-value。但是最近遇到一个问题就是在多进程的时候，没有办法同步保存数据。看到一个解决办法是``Context.MODE_MULTI_PROCESS`` 来进行多线程访问。在官网在介绍这个方法的时候是这样子的：\n<!--more-->\n```\nThis constant was deprecated in API level 23.\nMODE_MULTI_PROCESS does not work reliably in some versions of Android, and furthermore does not provide any mechanism for reconciling concurrent modifications across processes.\nApplications should not attempt to use it.\nInstead, they should use an explicit cross-process data management approach such as ContentProvider.\n\nSharedPreference loading flag: when set, the file on disk will be checked for modification even if the shared preferences instance is already loaded in this process.\nThis behavior is sometimes desired in cases where the application has multiple processes, all writing to the same SharedPreferences file.\nGenerally there are better forms of communication between processes, though.\n\nThis was the legacy (but undocumented) behavior in and before Gingerbread (Android 2.3) and this flag is implied when targetting such releases.\nFor applications targetting SDK versions greater than Android 2.3, this flag must be explicitly set if desired.\n```\n\n在6.0以上这个方法已经被弃用了，最低支持2.3。而且最好使用``ContentProvider``。\n一定要用的话，要尽力避免同时去操作SharedPreferencesde。其实也找到一些开源的库，可是觉得没有必要，所以还是算了。\n\n放一些链接：\n -  <https://github.com/android-cn/android-discuss/issues/135>\n -  <http://zmywly8866.github.io/2015/09/09/sharedpreferences-in-multiprocess.html>\n","source":"_posts/a-problem-about-sharedPreferencesde.md","raw":"---\ntitle: 关于SharedPreferences的一次问题\ndate: 2016-06-02 20:50:22\ntags: android\n---\nSharedPreferences可以用来保存一些很简单的数据，对应的就是一个key-value。但是最近遇到一个问题就是在多进程的时候，没有办法同步保存数据。看到一个解决办法是``Context.MODE_MULTI_PROCESS`` 来进行多线程访问。在官网在介绍这个方法的时候是这样子的：\n<!--more-->\n```\nThis constant was deprecated in API level 23.\nMODE_MULTI_PROCESS does not work reliably in some versions of Android, and furthermore does not provide any mechanism for reconciling concurrent modifications across processes.\nApplications should not attempt to use it.\nInstead, they should use an explicit cross-process data management approach such as ContentProvider.\n\nSharedPreference loading flag: when set, the file on disk will be checked for modification even if the shared preferences instance is already loaded in this process.\nThis behavior is sometimes desired in cases where the application has multiple processes, all writing to the same SharedPreferences file.\nGenerally there are better forms of communication between processes, though.\n\nThis was the legacy (but undocumented) behavior in and before Gingerbread (Android 2.3) and this flag is implied when targetting such releases.\nFor applications targetting SDK versions greater than Android 2.3, this flag must be explicitly set if desired.\n```\n\n在6.0以上这个方法已经被弃用了，最低支持2.3。而且最好使用``ContentProvider``。\n一定要用的话，要尽力避免同时去操作SharedPreferencesde。其实也找到一些开源的库，可是觉得没有必要，所以还是算了。\n\n放一些链接：\n -  <https://github.com/android-cn/android-discuss/issues/135>\n -  <http://zmywly8866.github.io/2015/09/09/sharedpreferences-in-multiprocess.html>\n","slug":"a-problem-about-sharedPreferencesde","published":1,"updated":"2016-08-24T15:50:44.365Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cis92veb2000ch8dq79w4h596","content":"<p>SharedPreferences可以用来保存一些很简单的数据，对应的就是一个key-value。但是最近遇到一个问题就是在多进程的时候，没有办法同步保存数据。看到一个解决办法是<code>Context.MODE_MULTI_PROCESS</code> 来进行多线程访问。在官网在介绍这个方法的时候是这样子的：<br><a id=\"more\"></a><br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">This constant was deprecated in API level 23.</span><br><span class=\"line\">MODE_MULTI_PROCESS does not work reliably in some versions of Android, and furthermore does not provide any mechanism for reconciling concurrent modifications across processes.</span><br><span class=\"line\">Applications should not attempt to use it.</span><br><span class=\"line\">Instead, they should use an explicit cross-process data management approach such as ContentProvider.</span><br><span class=\"line\"></span><br><span class=\"line\">SharedPreference loading flag: when set, the file on disk will be checked for modification even if the shared preferences instance is already loaded in this process.</span><br><span class=\"line\">This behavior is sometimes desired in cases where the application has multiple processes, all writing to the same SharedPreferences file.</span><br><span class=\"line\">Generally there are better forms of communication between processes, though.</span><br><span class=\"line\"></span><br><span class=\"line\">This was the legacy (but undocumented) behavior in and before Gingerbread (Android 2.3) and this flag is implied when targetting such releases.</span><br><span class=\"line\">For applications targetting SDK versions greater than Android 2.3, this flag must be explicitly set if desired.</span><br></pre></td></tr></table></figure></p>\n<p>在6.0以上这个方法已经被弃用了，最低支持2.3。而且最好使用<code>ContentProvider</code>。<br>一定要用的话，要尽力避免同时去操作SharedPreferencesde。其实也找到一些开源的库，可是觉得没有必要，所以还是算了。</p>\n<p>放一些链接：</p>\n<ul>\n<li><a href=\"https://github.com/android-cn/android-discuss/issues/135\" target=\"_blank\" rel=\"external\">https://github.com/android-cn/android-discuss/issues/135</a></li>\n<li><a href=\"http://zmywly8866.github.io/2015/09/09/sharedpreferences-in-multiprocess.html\" target=\"_blank\" rel=\"external\">http://zmywly8866.github.io/2015/09/09/sharedpreferences-in-multiprocess.html</a></li>\n</ul>\n","excerpt":"<p>SharedPreferences可以用来保存一些很简单的数据，对应的就是一个key-value。但是最近遇到一个问题就是在多进程的时候，没有办法同步保存数据。看到一个解决办法是<code>Context.MODE_MULTI_PROCESS</code> 来进行多线程访问。在官网在介绍这个方法的时候是这样子的：<br>","more":"<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">This constant was deprecated in API level 23.</span><br><span class=\"line\">MODE_MULTI_PROCESS does not work reliably in some versions of Android, and furthermore does not provide any mechanism for reconciling concurrent modifications across processes.</span><br><span class=\"line\">Applications should not attempt to use it.</span><br><span class=\"line\">Instead, they should use an explicit cross-process data management approach such as ContentProvider.</span><br><span class=\"line\"></span><br><span class=\"line\">SharedPreference loading flag: when set, the file on disk will be checked for modification even if the shared preferences instance is already loaded in this process.</span><br><span class=\"line\">This behavior is sometimes desired in cases where the application has multiple processes, all writing to the same SharedPreferences file.</span><br><span class=\"line\">Generally there are better forms of communication between processes, though.</span><br><span class=\"line\"></span><br><span class=\"line\">This was the legacy (but undocumented) behavior in and before Gingerbread (Android 2.3) and this flag is implied when targetting such releases.</span><br><span class=\"line\">For applications targetting SDK versions greater than Android 2.3, this flag must be explicitly set if desired.</span><br></pre></td></tr></table></figure></p>\n<p>在6.0以上这个方法已经被弃用了，最低支持2.3。而且最好使用<code>ContentProvider</code>。<br>一定要用的话，要尽力避免同时去操作SharedPreferencesde。其实也找到一些开源的库，可是觉得没有必要，所以还是算了。</p>\n<p>放一些链接：</p>\n<ul>\n<li><a href=\"https://github.com/android-cn/android-discuss/issues/135\">https://github.com/android-cn/android-discuss/issues/135</a></li>\n<li><a href=\"http://zmywly8866.github.io/2015/09/09/sharedpreferences-in-multiprocess.html\">http://zmywly8866.github.io/2015/09/09/sharedpreferences-in-multiprocess.html</a></li>\n</ul>"},{"title":"android动画","date":"2016-04-14T13:45:03.000Z","update":"2016-06-02T12:44:09.000Z","comments":1,"_content":"\n关于android的动画效果一共有三种\n> + View Animtion 即 tweened animation 补间动画\n> + Drawable Animation 即 frame-by-frame animation 帧动画\n> + Property Animation 属性动画\n\n  <!--more-->\n\n 关于这几种动画一直没有搞清楚，最近折腾好久才发现自己搞错了\n\n 前两种动画效果，网上的教程很多，只放一篇吧\n <http://www.cnblogs.com/feisky/archive/2010/01/11/1644482.html>\n\n 推荐一个Android官网最新的文档的网站，面翻墙，国内人做的镜像\n <http://www.loverobots.cn/android-api/reference/android/view/animation/package-summary.html>\n\nProperty Animation的动画找到了一篇很详细的介绍的\n> * [Android属性动画完全解析(上)，初识属性动画的基本用法](http://blog.csdn.net/guolin_blog/article/details/43536355)\n* [Android属性动画完全解析(中)，ValueAnimator和ObjectAnimator的高级用法](http://blog.csdn.net/guolin_blog/article/details/43816093)\n* [Android属性动画完全解析(下)，Interpolator和ViewPropertyAnimator的用法](http://blog.csdn.net/guolin_blog/article/details/44171115)\n\n特此记录下来，免得再犯错\n\n附上`ObjectAnimator.ofFloat(Object target, String propertyName, float... values);`中第二个参数[**propertyName**](http://developer.android.com/guide/topics/graphics/prop-animation.html)的值\n\n> * ***translationX*** and ***translationY***  :\nThese properties control where the View is located as a delta from its left and top coordinates which are set by its layout container.\n* ***rotation***, ***rotationX***, and ***rotationY***  :\nThese properties control the rotation in 2D (rotation property) and 3D around the pivot point.\n* ***scaleX*** and ***scaleY***  :\nThese properties control the 2D scaling of a View around its pivot point.\n* ***pivotX*** and ***pivotY***  :\nThese properties control the location of the pivot point, around which the rotation and scaling transforms occur. By default, the pivot point is located at the center of the object.\n* ***x*** and ***y***  :\nThese are simple utility properties to describe the final location of the View in its container, as a sum of the left and top values and translationX and translationY values.\n* ***alpha***  :\nRepresents the alpha transparency on the View. This value is 1 (opaque) by default, with a value of 0 representing full transparency (not visible).\n\n##update:\n 关于上面那个值，最近发现自己错了，一直懒得改这个地方。其实那个只要你在``target`` 里面你定义一个``setXxYy(float f)`` 这个 ``xxYy`` 就可以用在 ``propertyName`` 。很简单的，还支持：\n -  **public static ObjectAnimator ofArgb (Object target, String propertyName, int... values)**\n -  **public static ObjectAnimator ofInt (Object target, String propertyName, int... values)**\n -  **public static ObjectAnimator ofMultiFloat (Object target, String propertyName, float[][] values)**\n\n还有一个是``android.animation.ValueAnimator``  ，其实``ObjectAnimator`` 也是继承自``ValueAnimator`` 的。\n- **public static ValueAnimator ofArgb (int... values)**\n-  **public static ValueAnimator ofFloat (float... values)**\n-  **public static ValueAnimator ofInt (int... values)**\n\n以上还有很多方法都是提供，值的变化的，感兴趣的可以去查看文档。\n","source":"_posts/android-animtion.md","raw":"---\ntitle: android动画\ndate: 2016-04-14 21:45:03\nupdate: 2016-06-02 20:44:09\ntags: android\ncomments: true\n---\n\n关于android的动画效果一共有三种\n> + View Animtion 即 tweened animation 补间动画\n> + Drawable Animation 即 frame-by-frame animation 帧动画\n> + Property Animation 属性动画\n\n  <!--more-->\n\n 关于这几种动画一直没有搞清楚，最近折腾好久才发现自己搞错了\n\n 前两种动画效果，网上的教程很多，只放一篇吧\n <http://www.cnblogs.com/feisky/archive/2010/01/11/1644482.html>\n\n 推荐一个Android官网最新的文档的网站，面翻墙，国内人做的镜像\n <http://www.loverobots.cn/android-api/reference/android/view/animation/package-summary.html>\n\nProperty Animation的动画找到了一篇很详细的介绍的\n> * [Android属性动画完全解析(上)，初识属性动画的基本用法](http://blog.csdn.net/guolin_blog/article/details/43536355)\n* [Android属性动画完全解析(中)，ValueAnimator和ObjectAnimator的高级用法](http://blog.csdn.net/guolin_blog/article/details/43816093)\n* [Android属性动画完全解析(下)，Interpolator和ViewPropertyAnimator的用法](http://blog.csdn.net/guolin_blog/article/details/44171115)\n\n特此记录下来，免得再犯错\n\n附上`ObjectAnimator.ofFloat(Object target, String propertyName, float... values);`中第二个参数[**propertyName**](http://developer.android.com/guide/topics/graphics/prop-animation.html)的值\n\n> * ***translationX*** and ***translationY***  :\nThese properties control where the View is located as a delta from its left and top coordinates which are set by its layout container.\n* ***rotation***, ***rotationX***, and ***rotationY***  :\nThese properties control the rotation in 2D (rotation property) and 3D around the pivot point.\n* ***scaleX*** and ***scaleY***  :\nThese properties control the 2D scaling of a View around its pivot point.\n* ***pivotX*** and ***pivotY***  :\nThese properties control the location of the pivot point, around which the rotation and scaling transforms occur. By default, the pivot point is located at the center of the object.\n* ***x*** and ***y***  :\nThese are simple utility properties to describe the final location of the View in its container, as a sum of the left and top values and translationX and translationY values.\n* ***alpha***  :\nRepresents the alpha transparency on the View. This value is 1 (opaque) by default, with a value of 0 representing full transparency (not visible).\n\n##update:\n 关于上面那个值，最近发现自己错了，一直懒得改这个地方。其实那个只要你在``target`` 里面你定义一个``setXxYy(float f)`` 这个 ``xxYy`` 就可以用在 ``propertyName`` 。很简单的，还支持：\n -  **public static ObjectAnimator ofArgb (Object target, String propertyName, int... values)**\n -  **public static ObjectAnimator ofInt (Object target, String propertyName, int... values)**\n -  **public static ObjectAnimator ofMultiFloat (Object target, String propertyName, float[][] values)**\n\n还有一个是``android.animation.ValueAnimator``  ，其实``ObjectAnimator`` 也是继承自``ValueAnimator`` 的。\n- **public static ValueAnimator ofArgb (int... values)**\n-  **public static ValueAnimator ofFloat (float... values)**\n-  **public static ValueAnimator ofInt (int... values)**\n\n以上还有很多方法都是提供，值的变化的，感兴趣的可以去查看文档。\n","slug":"android-animtion","published":1,"updated":"2016-08-24T15:50:44.380Z","layout":"post","photos":[],"link":"","_id":"cis92veb7000fh8dqlixepypi","content":"<p>关于android的动画效果一共有三种</p>\n<blockquote>\n<ul>\n<li>View Animtion 即 tweened animation 补间动画</li>\n<li>Drawable Animation 即 frame-by-frame animation 帧动画</li>\n<li>Property Animation 属性动画</li>\n</ul>\n</blockquote>\n  <a id=\"more\"></a>\n<p> 关于这几种动画一直没有搞清楚，最近折腾好久才发现自己搞错了</p>\n<p> 前两种动画效果，网上的教程很多，只放一篇吧<br> <a href=\"http://www.cnblogs.com/feisky/archive/2010/01/11/1644482.html\" target=\"_blank\" rel=\"external\">http://www.cnblogs.com/feisky/archive/2010/01/11/1644482.html</a></p>\n<p> 推荐一个Android官网最新的文档的网站，面翻墙，国内人做的镜像<br> <a href=\"http://www.loverobots.cn/android-api/reference/android/view/animation/package-summary.html\" target=\"_blank\" rel=\"external\">http://www.loverobots.cn/android-api/reference/android/view/animation/package-summary.html</a></p>\n<p>Property Animation的动画找到了一篇很详细的介绍的</p>\n<blockquote>\n<ul>\n<li><a href=\"http://blog.csdn.net/guolin_blog/article/details/43536355\" target=\"_blank\" rel=\"external\">Android属性动画完全解析(上)，初识属性动画的基本用法</a></li>\n<li><a href=\"http://blog.csdn.net/guolin_blog/article/details/43816093\" target=\"_blank\" rel=\"external\">Android属性动画完全解析(中)，ValueAnimator和ObjectAnimator的高级用法</a></li>\n<li><a href=\"http://blog.csdn.net/guolin_blog/article/details/44171115\" target=\"_blank\" rel=\"external\">Android属性动画完全解析(下)，Interpolator和ViewPropertyAnimator的用法</a></li>\n</ul>\n</blockquote>\n<p>特此记录下来，免得再犯错</p>\n<p>附上<code>ObjectAnimator.ofFloat(Object target, String propertyName, float... values);</code>中第二个参数<a href=\"http://developer.android.com/guide/topics/graphics/prop-animation.html\" target=\"_blank\" rel=\"external\"><strong>propertyName</strong></a>的值</p>\n<blockquote>\n<ul>\n<li><strong><em>translationX</em></strong> and <strong><em>translationY</em></strong>  :<br>These properties control where the View is located as a delta from its left and top coordinates which are set by its layout container.</li>\n<li><strong><em>rotation</em></strong>, <strong><em>rotationX</em></strong>, and <strong><em>rotationY</em></strong>  :<br>These properties control the rotation in 2D (rotation property) and 3D around the pivot point.</li>\n<li><strong><em>scaleX</em></strong> and <strong><em>scaleY</em></strong>  :<br>These properties control the 2D scaling of a View around its pivot point.</li>\n<li><strong><em>pivotX</em></strong> and <strong><em>pivotY</em></strong>  :<br>These properties control the location of the pivot point, around which the rotation and scaling transforms occur. By default, the pivot point is located at the center of the object.</li>\n<li><strong><em>x</em></strong> and <strong><em>y</em></strong>  :<br>These are simple utility properties to describe the final location of the View in its container, as a sum of the left and top values and translationX and translationY values.</li>\n<li><strong><em>alpha</em></strong>  :<br>Represents the alpha transparency on the View. This value is 1 (opaque) by default, with a value of 0 representing full transparency (not visible).</li>\n</ul>\n</blockquote>\n<p>##update:<br> 关于上面那个值，最近发现自己错了，一直懒得改这个地方。其实那个只要你在<code>target</code> 里面你定义一个<code>setXxYy(float f)</code> 这个 <code>xxYy</code> 就可以用在 <code>propertyName</code> 。很简单的，还支持：</p>\n<ul>\n<li><strong>public static ObjectAnimator ofArgb (Object target, String propertyName, int… values)</strong></li>\n<li><strong>public static ObjectAnimator ofInt (Object target, String propertyName, int… values)</strong></li>\n<li><strong>public static ObjectAnimator ofMultiFloat (Object target, String propertyName, float[][] values)</strong></li>\n</ul>\n<p>还有一个是<code>android.animation.ValueAnimator</code>  ，其实<code>ObjectAnimator</code> 也是继承自<code>ValueAnimator</code> 的。</p>\n<ul>\n<li><strong>public static ValueAnimator ofArgb (int… values)</strong></li>\n<li><strong>public static ValueAnimator ofFloat (float… values)</strong></li>\n<li><strong>public static ValueAnimator ofInt (int… values)</strong></li>\n</ul>\n<p>以上还有很多方法都是提供，值的变化的，感兴趣的可以去查看文档。</p>\n","excerpt":"<p>关于android的动画效果一共有三种</p>\n<blockquote>\n<ul>\n<li>View Animtion 即 tweened animation 补间动画</li>\n<li>Drawable Animation 即 frame-by-frame animation 帧动画</li>\n<li>Property Animation 属性动画</li>\n</ul>\n</blockquote>","more":"<p> 关于这几种动画一直没有搞清楚，最近折腾好久才发现自己搞错了</p>\n<p> 前两种动画效果，网上的教程很多，只放一篇吧<br> <a href=\"http://www.cnblogs.com/feisky/archive/2010/01/11/1644482.html\">http://www.cnblogs.com/feisky/archive/2010/01/11/1644482.html</a></p>\n<p> 推荐一个Android官网最新的文档的网站，面翻墙，国内人做的镜像<br> <a href=\"http://www.loverobots.cn/android-api/reference/android/view/animation/package-summary.html\">http://www.loverobots.cn/android-api/reference/android/view/animation/package-summary.html</a></p>\n<p>Property Animation的动画找到了一篇很详细的介绍的</p>\n<blockquote>\n<ul>\n<li><a href=\"http://blog.csdn.net/guolin_blog/article/details/43536355\">Android属性动画完全解析(上)，初识属性动画的基本用法</a></li>\n<li><a href=\"http://blog.csdn.net/guolin_blog/article/details/43816093\">Android属性动画完全解析(中)，ValueAnimator和ObjectAnimator的高级用法</a></li>\n<li><a href=\"http://blog.csdn.net/guolin_blog/article/details/44171115\">Android属性动画完全解析(下)，Interpolator和ViewPropertyAnimator的用法</a></li>\n</ul>\n</blockquote>\n<p>特此记录下来，免得再犯错</p>\n<p>附上<code>ObjectAnimator.ofFloat(Object target, String propertyName, float... values);</code>中第二个参数<a href=\"http://developer.android.com/guide/topics/graphics/prop-animation.html\"><strong>propertyName</strong></a>的值</p>\n<blockquote>\n<ul>\n<li><strong><em>translationX</em></strong> and <strong><em>translationY</em></strong>  :<br>These properties control where the View is located as a delta from its left and top coordinates which are set by its layout container.</li>\n<li><strong><em>rotation</em></strong>, <strong><em>rotationX</em></strong>, and <strong><em>rotationY</em></strong>  :<br>These properties control the rotation in 2D (rotation property) and 3D around the pivot point.</li>\n<li><strong><em>scaleX</em></strong> and <strong><em>scaleY</em></strong>  :<br>These properties control the 2D scaling of a View around its pivot point.</li>\n<li><strong><em>pivotX</em></strong> and <strong><em>pivotY</em></strong>  :<br>These properties control the location of the pivot point, around which the rotation and scaling transforms occur. By default, the pivot point is located at the center of the object.</li>\n<li><strong><em>x</em></strong> and <strong><em>y</em></strong>  :<br>These are simple utility properties to describe the final location of the View in its container, as a sum of the left and top values and translationX and translationY values.</li>\n<li><strong><em>alpha</em></strong>  :<br>Represents the alpha transparency on the View. This value is 1 (opaque) by default, with a value of 0 representing full transparency (not visible).</li>\n</ul>\n</blockquote>\n<p>##update:<br> 关于上面那个值，最近发现自己错了，一直懒得改这个地方。其实那个只要你在<code>target</code> 里面你定义一个<code>setXxYy(float f)</code> 这个 <code>xxYy</code> 就可以用在 <code>propertyName</code> 。很简单的，还支持：</p>\n<ul>\n<li><strong>public static ObjectAnimator ofArgb (Object target, String propertyName, int… values)</strong></li>\n<li><strong>public static ObjectAnimator ofInt (Object target, String propertyName, int… values)</strong></li>\n<li><strong>public static ObjectAnimator ofMultiFloat (Object target, String propertyName, float[][] values)</strong></li>\n</ul>\n<p>还有一个是<code>android.animation.ValueAnimator</code>  ，其实<code>ObjectAnimator</code> 也是继承自<code>ValueAnimator</code> 的。</p>\n<ul>\n<li><strong>public static ValueAnimator ofArgb (int… values)</strong></li>\n<li><strong>public static ValueAnimator ofFloat (float… values)</strong></li>\n<li><strong>public static ValueAnimator ofInt (int… values)</strong></li>\n</ul>\n<p>以上还有很多方法都是提供，值的变化的，感兴趣的可以去查看文档。</p>"},{"title":"recyclerview","date":"2016-04-20T13:13:42.000Z","_content":"最新在项目中使用了Android L出现的新控件RecyclerView，把学习的过程都贴出来，便于日后查询。\n\n![Android L](http://img.blog.csdn.net/20160416104439646)\n\n<!--more-->\n\nRecyclerView提供了四种配置：\n> - RecyclerView.LayoutManager\n> - RecyclerView.Adapter< VH extends RecyclerView.ViewHolder >\n> - RecyclerView.ItemDecoration\n> - RecyclerView.ItemAnimator\n\n##  **RecyclerView.LayoutManager**\n一共有三种布局，分别是：\n> - GridLayoutManager      网格布局\n> - LinearLayoutManager   线性布局\n> - StaggeredGridLayoutManager     瀑布流布局\n\n##  **RecyclerView.ItemDecoration**\n可以绘制特殊的RecyclerView的视图，放一篇参考文章<http://blog.csdn.net/lmj623565791/article/details/45059587>\n\n## **RecyclerView.ItemAnimator**\n动画效果，可以指定RecyclerView在添加删除Item时的动画效果。同样，放一篇参考效果\n<https://github.com/wasabeef/recyclerview-animators>\n\n## **RecyclerView.Adapter< VH extends RecyclerView.ViewHolder >**\nRecyclerView的Adapter相比较listview的adapter，强制把ViewHolder分离了出来，有几个方法需要重写：\n```java\npublic class RecyclerViewAdapter extends RecyclerView.Adapter<RecyclerViewAdapter.ViewHolder> {\n    private Context context;\n    private List<String> list;\n\n    public RankRecyclerViewAdpter(Context context, List<String> list) {\n        this.context = context;\n        this.list = list;\n    }\n\n    @Override\n    public RecyclerView.ViewHolder onCreateViewHolder(ViewGroup parent, int viewType) {\n        View v = LayoutInflater.from(parent.getContext()).inflate(R.layout.item_layout, parent, false);\n        return new ViewHolder(v);\n    }\n\n    @Override\n    public void onBindViewHolder(ViewHolder viewHolder, int position) {\n        viewHolder.textView.setText(list.get(position));\n    }\n\n    @Override\n    public int getItemCount() {\n        return list.size();\n    }\n\n    public class ViewHolder extends RecyclerView.ViewHolder {\n        public TextView textView;\n        public ViewHolder(View View) {\n            super(view);\n            textView= (TextView) itemView.findViewById(R.id.textView);\n        }\n    }\n}\n```\n\n有几个问题需要注意：\n> - layout中放的应该是`android.support.v7.widget.RecyclerView` 不然会报错。\n> - `getItemCount()` 的返回值不能为空，不然不会执行`onBindViewHolder`\n> - RecyclerView必须指定LayoutManger，不然同样会报错。\n\n## **RecyclerView的点击事件**\n官方文档中并没有给我们类似ListView的`OnItemClickListener`回调方法，由于RecyclerView比ListView更高级，所以它并没有行或者列的概念，子View可以任意布局，每个子View处理自己的onClick事件，也就是说在Adapter中给子view的rootview设置点击回调。我们今天所要实现的是另外一种方式，类似ListView的`OnItemClickListener`的方式。通过文档我们知道RecyclerView留给开发者一个`RecyclerView.OnItemTouchListener`接口，我们要做的就是实现它，实现点击的回调和长按回调。当然了，这种方式只是一个开始，我们还可以拓展为各种复杂的手势操作的回调。\n参考自：<http://blog.csdn.net/hlglinglong/article/details/44981889>\n```java\npublic class RecyclerItemClickListener implements RecyclerView.OnItemTouchListener{  \n    private View childView;  \n    private RecyclerView touchView;  \n    public RecyclerItemClickListener(Context context, final OnItemClickListener mListener) {  \n        mGestureDetector = new GestureDetector(context, new GestureDetector.SimpleOnGestureListener(){  \n            @Override  \n            public boolean onSingleTapUp(MotionEvent ev) {  \n                if (childView != null && mListener != null) {  \n                    mListener.onItemClick(childView, touchView.getChildPosition(childView));  \n                }  \n                return true;  \n            }  \n            @Override  \n            public void onLongPress(MotionEvent ev) {  \n                if (childView != null && mListener != null) {  \n                    mListener.onLongClick(childView, touchView.getChildPosition(childView));  \n                }  \n            }  \n        });  \n    }  \n\n    GestureDetector mGestureDetector;  \n\n    public interface OnItemClickListener {  \n        public void onItemClick(View view, int position);  \n        public void onLongClick(View view, int posotion);  \n    }  \n\n    @Override  \n    public boolean onInterceptTouchEvent(RecyclerView recyclerView, MotionEvent motionEvent) {  \n        mGestureDetector.onTouchEvent(motionEvent);  \n        childView = recyclerView.findChildViewUnder(motionEvent.getX(), motionEvent.getY());  \n        touchView = recyclerView;  \n        return false;  \n    }  \n\n    @Override  \n    public void onTouchEvent(RecyclerView recyclerView, MotionEvent motionEvent) {  \n\n    }  \n}\n```\n\n## **类似listview的`addHeaderView`和`addFooterView`**\n\nRecyclerView同样没有提供类似listview的`addHeaderView`和`addFooterView` 方法，不过我们可以自定义，参考文章：\n<https://github.com/dingdingyr/HeaderAndFooterRecyclerView->\n原理就是：\n```java\n\t\tGridLayoutManager manager = new GridLayoutManager(this, 2);\n        manager.setSpanSizeLookup(new GridLayoutManager.SpanSizeLookup() {\n            @Override\n            public int getSpanSize(int position) {\n                return adapter.getItemViewType()? manager.getSpanCount() : 1;\n            }\n        });\n```\nGirdLayout可以设置显示的行数，我们可以根据我们要显示的Item类型来指定这个值。\n\n**还有一个问题，那就是在更新apdater的时候不推荐使用`notifyDataSetChanged()` ，因为`notifyDataSetChanged()` 会强制刷新整个视图，如果插入新的数据可以使用 `public final void notifyItemRangeInserted(int positionStart, int itemCount);`。**\n","source":"_posts/recyclerview.md","raw":"---\ntitle: recyclerview\ndate: 2016-04-20 21:13:42\ntags: android\n---\n最新在项目中使用了Android L出现的新控件RecyclerView，把学习的过程都贴出来，便于日后查询。\n\n![Android L](http://img.blog.csdn.net/20160416104439646)\n\n<!--more-->\n\nRecyclerView提供了四种配置：\n> - RecyclerView.LayoutManager\n> - RecyclerView.Adapter< VH extends RecyclerView.ViewHolder >\n> - RecyclerView.ItemDecoration\n> - RecyclerView.ItemAnimator\n\n##  **RecyclerView.LayoutManager**\n一共有三种布局，分别是：\n> - GridLayoutManager      网格布局\n> - LinearLayoutManager   线性布局\n> - StaggeredGridLayoutManager     瀑布流布局\n\n##  **RecyclerView.ItemDecoration**\n可以绘制特殊的RecyclerView的视图，放一篇参考文章<http://blog.csdn.net/lmj623565791/article/details/45059587>\n\n## **RecyclerView.ItemAnimator**\n动画效果，可以指定RecyclerView在添加删除Item时的动画效果。同样，放一篇参考效果\n<https://github.com/wasabeef/recyclerview-animators>\n\n## **RecyclerView.Adapter< VH extends RecyclerView.ViewHolder >**\nRecyclerView的Adapter相比较listview的adapter，强制把ViewHolder分离了出来，有几个方法需要重写：\n```java\npublic class RecyclerViewAdapter extends RecyclerView.Adapter<RecyclerViewAdapter.ViewHolder> {\n    private Context context;\n    private List<String> list;\n\n    public RankRecyclerViewAdpter(Context context, List<String> list) {\n        this.context = context;\n        this.list = list;\n    }\n\n    @Override\n    public RecyclerView.ViewHolder onCreateViewHolder(ViewGroup parent, int viewType) {\n        View v = LayoutInflater.from(parent.getContext()).inflate(R.layout.item_layout, parent, false);\n        return new ViewHolder(v);\n    }\n\n    @Override\n    public void onBindViewHolder(ViewHolder viewHolder, int position) {\n        viewHolder.textView.setText(list.get(position));\n    }\n\n    @Override\n    public int getItemCount() {\n        return list.size();\n    }\n\n    public class ViewHolder extends RecyclerView.ViewHolder {\n        public TextView textView;\n        public ViewHolder(View View) {\n            super(view);\n            textView= (TextView) itemView.findViewById(R.id.textView);\n        }\n    }\n}\n```\n\n有几个问题需要注意：\n> - layout中放的应该是`android.support.v7.widget.RecyclerView` 不然会报错。\n> - `getItemCount()` 的返回值不能为空，不然不会执行`onBindViewHolder`\n> - RecyclerView必须指定LayoutManger，不然同样会报错。\n\n## **RecyclerView的点击事件**\n官方文档中并没有给我们类似ListView的`OnItemClickListener`回调方法，由于RecyclerView比ListView更高级，所以它并没有行或者列的概念，子View可以任意布局，每个子View处理自己的onClick事件，也就是说在Adapter中给子view的rootview设置点击回调。我们今天所要实现的是另外一种方式，类似ListView的`OnItemClickListener`的方式。通过文档我们知道RecyclerView留给开发者一个`RecyclerView.OnItemTouchListener`接口，我们要做的就是实现它，实现点击的回调和长按回调。当然了，这种方式只是一个开始，我们还可以拓展为各种复杂的手势操作的回调。\n参考自：<http://blog.csdn.net/hlglinglong/article/details/44981889>\n```java\npublic class RecyclerItemClickListener implements RecyclerView.OnItemTouchListener{  \n    private View childView;  \n    private RecyclerView touchView;  \n    public RecyclerItemClickListener(Context context, final OnItemClickListener mListener) {  \n        mGestureDetector = new GestureDetector(context, new GestureDetector.SimpleOnGestureListener(){  \n            @Override  \n            public boolean onSingleTapUp(MotionEvent ev) {  \n                if (childView != null && mListener != null) {  \n                    mListener.onItemClick(childView, touchView.getChildPosition(childView));  \n                }  \n                return true;  \n            }  \n            @Override  \n            public void onLongPress(MotionEvent ev) {  \n                if (childView != null && mListener != null) {  \n                    mListener.onLongClick(childView, touchView.getChildPosition(childView));  \n                }  \n            }  \n        });  \n    }  \n\n    GestureDetector mGestureDetector;  \n\n    public interface OnItemClickListener {  \n        public void onItemClick(View view, int position);  \n        public void onLongClick(View view, int posotion);  \n    }  \n\n    @Override  \n    public boolean onInterceptTouchEvent(RecyclerView recyclerView, MotionEvent motionEvent) {  \n        mGestureDetector.onTouchEvent(motionEvent);  \n        childView = recyclerView.findChildViewUnder(motionEvent.getX(), motionEvent.getY());  \n        touchView = recyclerView;  \n        return false;  \n    }  \n\n    @Override  \n    public void onTouchEvent(RecyclerView recyclerView, MotionEvent motionEvent) {  \n\n    }  \n}\n```\n\n## **类似listview的`addHeaderView`和`addFooterView`**\n\nRecyclerView同样没有提供类似listview的`addHeaderView`和`addFooterView` 方法，不过我们可以自定义，参考文章：\n<https://github.com/dingdingyr/HeaderAndFooterRecyclerView->\n原理就是：\n```java\n\t\tGridLayoutManager manager = new GridLayoutManager(this, 2);\n        manager.setSpanSizeLookup(new GridLayoutManager.SpanSizeLookup() {\n            @Override\n            public int getSpanSize(int position) {\n                return adapter.getItemViewType()? manager.getSpanCount() : 1;\n            }\n        });\n```\nGirdLayout可以设置显示的行数，我们可以根据我们要显示的Item类型来指定这个值。\n\n**还有一个问题，那就是在更新apdater的时候不推荐使用`notifyDataSetChanged()` ，因为`notifyDataSetChanged()` 会强制刷新整个视图，如果插入新的数据可以使用 `public final void notifyItemRangeInserted(int positionStart, int itemCount);`。**\n","slug":"recyclerview","published":1,"updated":"2016-08-24T15:50:44.427Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cis92veba000hh8dq71vyy96s","content":"<p>最新在项目中使用了Android L出现的新控件RecyclerView，把学习的过程都贴出来，便于日后查询。</p>\n<p><img src=\"http://img.blog.csdn.net/20160416104439646\" alt=\"Android L\"></p>\n<a id=\"more\"></a>\n<p>RecyclerView提供了四种配置：</p>\n<blockquote>\n<ul>\n<li>RecyclerView.LayoutManager</li>\n<li>RecyclerView.Adapter&lt; VH extends RecyclerView.ViewHolder &gt;</li>\n<li>RecyclerView.ItemDecoration</li>\n<li>RecyclerView.ItemAnimator</li>\n</ul>\n</blockquote>\n<h2 id=\"RecyclerView-LayoutManager\"><a href=\"#RecyclerView-LayoutManager\" class=\"headerlink\" title=\"RecyclerView.LayoutManager\"></a><strong>RecyclerView.LayoutManager</strong></h2><p>一共有三种布局，分别是：</p>\n<blockquote>\n<ul>\n<li>GridLayoutManager      网格布局</li>\n<li>LinearLayoutManager   线性布局</li>\n<li>StaggeredGridLayoutManager     瀑布流布局</li>\n</ul>\n</blockquote>\n<h2 id=\"RecyclerView-ItemDecoration\"><a href=\"#RecyclerView-ItemDecoration\" class=\"headerlink\" title=\"RecyclerView.ItemDecoration\"></a><strong>RecyclerView.ItemDecoration</strong></h2><p>可以绘制特殊的RecyclerView的视图，放一篇参考文章<a href=\"http://blog.csdn.net/lmj623565791/article/details/45059587\" target=\"_blank\" rel=\"external\">http://blog.csdn.net/lmj623565791/article/details/45059587</a></p>\n<h2 id=\"RecyclerView-ItemAnimator\"><a href=\"#RecyclerView-ItemAnimator\" class=\"headerlink\" title=\"RecyclerView.ItemAnimator\"></a><strong>RecyclerView.ItemAnimator</strong></h2><p>动画效果，可以指定RecyclerView在添加删除Item时的动画效果。同样，放一篇参考效果<br><a href=\"https://github.com/wasabeef/recyclerview-animators\" target=\"_blank\" rel=\"external\">https://github.com/wasabeef/recyclerview-animators</a></p>\n<h2 id=\"RecyclerView-Adapter-lt-VH-extends-RecyclerView-ViewHolder-gt\"><a href=\"#RecyclerView-Adapter-lt-VH-extends-RecyclerView-ViewHolder-gt\" class=\"headerlink\" title=\"RecyclerView.Adapter&lt; VH extends RecyclerView.ViewHolder &gt;\"></a><strong>RecyclerView.Adapter&lt; VH extends RecyclerView.ViewHolder &gt;</strong></h2><p>RecyclerView的Adapter相比较listview的adapter，强制把ViewHolder分离了出来，有几个方法需要重写：<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">RecyclerViewAdapter</span> <span class=\"keyword\">extends</span> <span class=\"title\">RecyclerView</span>.<span class=\"title\">Adapter</span>&lt;<span class=\"title\">RecyclerViewAdapter</span>.<span class=\"title\">ViewHolder</span>&gt; </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Context context;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> List&lt;String&gt; list;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">RankRecyclerViewAdpter</span><span class=\"params\">(Context context, List&lt;String&gt; list)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.context = context;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.list = list;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> RecyclerView.<span class=\"function\">ViewHolder <span class=\"title\">onCreateViewHolder</span><span class=\"params\">(ViewGroup parent, <span class=\"keyword\">int</span> viewType)</span> </span>&#123;</span><br><span class=\"line\">        View v = LayoutInflater.from(parent.getContext()).inflate(R.layout.item_layout, parent, <span class=\"keyword\">false</span>);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> ViewHolder(v);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onBindViewHolder</span><span class=\"params\">(ViewHolder viewHolder, <span class=\"keyword\">int</span> position)</span> </span>&#123;</span><br><span class=\"line\">        viewHolder.textView.setText(list.get(position));</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span> <span class=\"title\">getItemCount</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> list.size();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ViewHolder</span> <span class=\"keyword\">extends</span> <span class=\"title\">RecyclerView</span>.<span class=\"title\">ViewHolder</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">public</span> TextView textView;</span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">ViewHolder</span><span class=\"params\">(View View)</span> </span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">super</span>(view);</span><br><span class=\"line\">            textView= (TextView) itemView.findViewById(R.id.textView);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>有几个问题需要注意：</p>\n<blockquote>\n<ul>\n<li>layout中放的应该是<code>android.support.v7.widget.RecyclerView</code> 不然会报错。</li>\n<li><code>getItemCount()</code> 的返回值不能为空，不然不会执行<code>onBindViewHolder</code></li>\n<li>RecyclerView必须指定LayoutManger，不然同样会报错。</li>\n</ul>\n</blockquote>\n<h2 id=\"RecyclerView的点击事件\"><a href=\"#RecyclerView的点击事件\" class=\"headerlink\" title=\"RecyclerView的点击事件\"></a><strong>RecyclerView的点击事件</strong></h2><p>官方文档中并没有给我们类似ListView的<code>OnItemClickListener</code>回调方法，由于RecyclerView比ListView更高级，所以它并没有行或者列的概念，子View可以任意布局，每个子View处理自己的onClick事件，也就是说在Adapter中给子view的rootview设置点击回调。我们今天所要实现的是另外一种方式，类似ListView的<code>OnItemClickListener</code>的方式。通过文档我们知道RecyclerView留给开发者一个<code>RecyclerView.OnItemTouchListener</code>接口，我们要做的就是实现它，实现点击的回调和长按回调。当然了，这种方式只是一个开始，我们还可以拓展为各种复杂的手势操作的回调。<br>参考自：<a href=\"http://blog.csdn.net/hlglinglong/article/details/44981889\" target=\"_blank\" rel=\"external\">http://blog.csdn.net/hlglinglong/article/details/44981889</a><br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">RecyclerItemClickListener</span> <span class=\"keyword\">implements</span> <span class=\"title\">RecyclerView</span>.<span class=\"title\">OnItemTouchListener</span></span>&#123;  </span><br><span class=\"line\">    <span class=\"keyword\">private</span> View childView;  </span><br><span class=\"line\">    <span class=\"keyword\">private</span> RecyclerView touchView;  </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">RecyclerItemClickListener</span><span class=\"params\">(Context context, <span class=\"keyword\">final</span> OnItemClickListener mListener)</span> </span>&#123;  </span><br><span class=\"line\">        mGestureDetector = <span class=\"keyword\">new</span> GestureDetector(context, <span class=\"keyword\">new</span> GestureDetector.SimpleOnGestureListener()&#123;  </span><br><span class=\"line\">            <span class=\"meta\">@Override</span>  </span><br><span class=\"line\">            <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">onSingleTapUp</span><span class=\"params\">(MotionEvent ev)</span> </span>&#123;  </span><br><span class=\"line\">                <span class=\"keyword\">if</span> (childView != <span class=\"keyword\">null</span> &amp;&amp; mListener != <span class=\"keyword\">null</span>) &#123;  </span><br><span class=\"line\">                    mListener.onItemClick(childView, touchView.getChildPosition(childView));  </span><br><span class=\"line\">                &#125;  </span><br><span class=\"line\">                <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;  </span><br><span class=\"line\">            &#125;  </span><br><span class=\"line\">            <span class=\"meta\">@Override</span>  </span><br><span class=\"line\">            <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onLongPress</span><span class=\"params\">(MotionEvent ev)</span> </span>&#123;  </span><br><span class=\"line\">                <span class=\"keyword\">if</span> (childView != <span class=\"keyword\">null</span> &amp;&amp; mListener != <span class=\"keyword\">null</span>) &#123;  </span><br><span class=\"line\">                    mListener.onLongClick(childView, touchView.getChildPosition(childView));  </span><br><span class=\"line\">                &#125;  </span><br><span class=\"line\">            &#125;  </span><br><span class=\"line\">        &#125;);  </span><br><span class=\"line\">    &#125;  </span><br><span class=\"line\"></span><br><span class=\"line\">    GestureDetector mGestureDetector;  </span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">OnItemClickListener</span> </span>&#123;  </span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onItemClick</span><span class=\"params\">(View view, <span class=\"keyword\">int</span> position)</span></span>;  </span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onLongClick</span><span class=\"params\">(View view, <span class=\"keyword\">int</span> posotion)</span></span>;  </span><br><span class=\"line\">    &#125;  </span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span>  </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">onInterceptTouchEvent</span><span class=\"params\">(RecyclerView recyclerView, MotionEvent motionEvent)</span> </span>&#123;  </span><br><span class=\"line\">        mGestureDetector.onTouchEvent(motionEvent);  </span><br><span class=\"line\">        childView = recyclerView.findChildViewUnder(motionEvent.getX(), motionEvent.getY());  </span><br><span class=\"line\">        touchView = recyclerView;  </span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">false</span>;  </span><br><span class=\"line\">    &#125;  </span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span>  </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onTouchEvent</span><span class=\"params\">(RecyclerView recyclerView, MotionEvent motionEvent)</span> </span>&#123;  </span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;  </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<h2 id=\"类似listview的addHeaderView和addFooterView\"><a href=\"#类似listview的addHeaderView和addFooterView\" class=\"headerlink\" title=\"类似listview的addHeaderView和addFooterView\"></a><strong>类似listview的<code>addHeaderView</code>和<code>addFooterView</code></strong></h2><p>RecyclerView同样没有提供类似listview的<code>addHeaderView</code>和<code>addFooterView</code> 方法，不过我们可以自定义，参考文章：<br><a href=\"https://github.com/dingdingyr/HeaderAndFooterRecyclerView-\" target=\"_blank\" rel=\"external\">https://github.com/dingdingyr/HeaderAndFooterRecyclerView-</a><br>原理就是：<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">GridLayoutManager manager = <span class=\"keyword\">new</span> GridLayoutManager(<span class=\"keyword\">this</span>, <span class=\"number\">2</span>);</span><br><span class=\"line\">      manager.setSpanSizeLookup(<span class=\"keyword\">new</span> GridLayoutManager.SpanSizeLookup() &#123;</span><br><span class=\"line\">          <span class=\"meta\">@Override</span></span><br><span class=\"line\">          <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span> <span class=\"title\">getSpanSize</span><span class=\"params\">(<span class=\"keyword\">int</span> position)</span> </span>&#123;</span><br><span class=\"line\">              <span class=\"keyword\">return</span> adapter.getItemViewType()? manager.getSpanCount() : <span class=\"number\">1</span>;</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">      &#125;);</span><br></pre></td></tr></table></figure></p>\n<p>GirdLayout可以设置显示的行数，我们可以根据我们要显示的Item类型来指定这个值。</p>\n<p><strong>还有一个问题，那就是在更新apdater的时候不推荐使用<code>notifyDataSetChanged()</code> ，因为<code>notifyDataSetChanged()</code> 会强制刷新整个视图，如果插入新的数据可以使用 <code>public final void notifyItemRangeInserted(int positionStart, int itemCount);</code>。</strong></p>\n","excerpt":"<p>最新在项目中使用了Android L出现的新控件RecyclerView，把学习的过程都贴出来，便于日后查询。</p>\n<p><img src=\"http://img.blog.csdn.net/20160416104439646\" alt=\"Android L\"></p>","more":"<p>RecyclerView提供了四种配置：</p>\n<blockquote>\n<ul>\n<li>RecyclerView.LayoutManager</li>\n<li>RecyclerView.Adapter&lt; VH extends RecyclerView.ViewHolder &gt;</li>\n<li>RecyclerView.ItemDecoration</li>\n<li>RecyclerView.ItemAnimator</li>\n</ul>\n</blockquote>\n<h2 id=\"RecyclerView-LayoutManager\"><a href=\"#RecyclerView-LayoutManager\" class=\"headerlink\" title=\"RecyclerView.LayoutManager\"></a><strong>RecyclerView.LayoutManager</strong></h2><p>一共有三种布局，分别是：</p>\n<blockquote>\n<ul>\n<li>GridLayoutManager      网格布局</li>\n<li>LinearLayoutManager   线性布局</li>\n<li>StaggeredGridLayoutManager     瀑布流布局</li>\n</ul>\n</blockquote>\n<h2 id=\"RecyclerView-ItemDecoration\"><a href=\"#RecyclerView-ItemDecoration\" class=\"headerlink\" title=\"RecyclerView.ItemDecoration\"></a><strong>RecyclerView.ItemDecoration</strong></h2><p>可以绘制特殊的RecyclerView的视图，放一篇参考文章<a href=\"http://blog.csdn.net/lmj623565791/article/details/45059587\">http://blog.csdn.net/lmj623565791/article/details/45059587</a></p>\n<h2 id=\"RecyclerView-ItemAnimator\"><a href=\"#RecyclerView-ItemAnimator\" class=\"headerlink\" title=\"RecyclerView.ItemAnimator\"></a><strong>RecyclerView.ItemAnimator</strong></h2><p>动画效果，可以指定RecyclerView在添加删除Item时的动画效果。同样，放一篇参考效果<br><a href=\"https://github.com/wasabeef/recyclerview-animators\">https://github.com/wasabeef/recyclerview-animators</a></p>\n<h2 id=\"RecyclerView-Adapter-lt-VH-extends-RecyclerView-ViewHolder-gt\"><a href=\"#RecyclerView-Adapter-lt-VH-extends-RecyclerView-ViewHolder-gt\" class=\"headerlink\" title=\"RecyclerView.Adapter&lt; VH extends RecyclerView.ViewHolder &gt;\"></a><strong>RecyclerView.Adapter&lt; VH extends RecyclerView.ViewHolder &gt;</strong></h2><p>RecyclerView的Adapter相比较listview的adapter，强制把ViewHolder分离了出来，有几个方法需要重写：<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">RecyclerViewAdapter</span> <span class=\"keyword\">extends</span> <span class=\"title\">RecyclerView</span>.<span class=\"title\">Adapter</span>&lt;<span class=\"title\">RecyclerViewAdapter</span>.<span class=\"title\">ViewHolder</span>&gt; </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Context context;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> List&lt;String&gt; list;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">RankRecyclerViewAdpter</span><span class=\"params\">(Context context, List&lt;String&gt; list)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.context = context;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.list = list;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> RecyclerView.<span class=\"function\">ViewHolder <span class=\"title\">onCreateViewHolder</span><span class=\"params\">(ViewGroup parent, <span class=\"keyword\">int</span> viewType)</span> </span>&#123;</span><br><span class=\"line\">        View v = LayoutInflater.from(parent.getContext()).inflate(R.layout.item_layout, parent, <span class=\"keyword\">false</span>);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> ViewHolder(v);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onBindViewHolder</span><span class=\"params\">(ViewHolder viewHolder, <span class=\"keyword\">int</span> position)</span> </span>&#123;</span><br><span class=\"line\">        viewHolder.textView.setText(list.get(position));</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span> <span class=\"title\">getItemCount</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> list.size();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ViewHolder</span> <span class=\"keyword\">extends</span> <span class=\"title\">RecyclerView</span>.<span class=\"title\">ViewHolder</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">public</span> TextView textView;</span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">ViewHolder</span><span class=\"params\">(View View)</span> </span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">super</span>(view);</span><br><span class=\"line\">            textView= (TextView) itemView.findViewById(R.id.textView);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>有几个问题需要注意：</p>\n<blockquote>\n<ul>\n<li>layout中放的应该是<code>android.support.v7.widget.RecyclerView</code> 不然会报错。</li>\n<li><code>getItemCount()</code> 的返回值不能为空，不然不会执行<code>onBindViewHolder</code></li>\n<li>RecyclerView必须指定LayoutManger，不然同样会报错。</li>\n</ul>\n</blockquote>\n<h2 id=\"RecyclerView的点击事件\"><a href=\"#RecyclerView的点击事件\" class=\"headerlink\" title=\"RecyclerView的点击事件\"></a><strong>RecyclerView的点击事件</strong></h2><p>官方文档中并没有给我们类似ListView的<code>OnItemClickListener</code>回调方法，由于RecyclerView比ListView更高级，所以它并没有行或者列的概念，子View可以任意布局，每个子View处理自己的onClick事件，也就是说在Adapter中给子view的rootview设置点击回调。我们今天所要实现的是另外一种方式，类似ListView的<code>OnItemClickListener</code>的方式。通过文档我们知道RecyclerView留给开发者一个<code>RecyclerView.OnItemTouchListener</code>接口，我们要做的就是实现它，实现点击的回调和长按回调。当然了，这种方式只是一个开始，我们还可以拓展为各种复杂的手势操作的回调。<br>参考自：<a href=\"http://blog.csdn.net/hlglinglong/article/details/44981889\">http://blog.csdn.net/hlglinglong/article/details/44981889</a><br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">RecyclerItemClickListener</span> <span class=\"keyword\">implements</span> <span class=\"title\">RecyclerView</span>.<span class=\"title\">OnItemTouchListener</span></span>&#123;  </span><br><span class=\"line\">    <span class=\"keyword\">private</span> View childView;  </span><br><span class=\"line\">    <span class=\"keyword\">private</span> RecyclerView touchView;  </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">RecyclerItemClickListener</span><span class=\"params\">(Context context, <span class=\"keyword\">final</span> OnItemClickListener mListener)</span> </span>&#123;  </span><br><span class=\"line\">        mGestureDetector = <span class=\"keyword\">new</span> GestureDetector(context, <span class=\"keyword\">new</span> GestureDetector.SimpleOnGestureListener()&#123;  </span><br><span class=\"line\">            <span class=\"meta\">@Override</span>  </span><br><span class=\"line\">            <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">onSingleTapUp</span><span class=\"params\">(MotionEvent ev)</span> </span>&#123;  </span><br><span class=\"line\">                <span class=\"keyword\">if</span> (childView != <span class=\"keyword\">null</span> &amp;&amp; mListener != <span class=\"keyword\">null</span>) &#123;  </span><br><span class=\"line\">                    mListener.onItemClick(childView, touchView.getChildPosition(childView));  </span><br><span class=\"line\">                &#125;  </span><br><span class=\"line\">                <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;  </span><br><span class=\"line\">            &#125;  </span><br><span class=\"line\">            <span class=\"meta\">@Override</span>  </span><br><span class=\"line\">            <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onLongPress</span><span class=\"params\">(MotionEvent ev)</span> </span>&#123;  </span><br><span class=\"line\">                <span class=\"keyword\">if</span> (childView != <span class=\"keyword\">null</span> &amp;&amp; mListener != <span class=\"keyword\">null</span>) &#123;  </span><br><span class=\"line\">                    mListener.onLongClick(childView, touchView.getChildPosition(childView));  </span><br><span class=\"line\">                &#125;  </span><br><span class=\"line\">            &#125;  </span><br><span class=\"line\">        &#125;);  </span><br><span class=\"line\">    &#125;  </span><br><span class=\"line\"></span><br><span class=\"line\">    GestureDetector mGestureDetector;  </span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">OnItemClickListener</span> </span>&#123;  </span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onItemClick</span><span class=\"params\">(View view, <span class=\"keyword\">int</span> position)</span></span>;  </span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onLongClick</span><span class=\"params\">(View view, <span class=\"keyword\">int</span> posotion)</span></span>;  </span><br><span class=\"line\">    &#125;  </span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span>  </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">onInterceptTouchEvent</span><span class=\"params\">(RecyclerView recyclerView, MotionEvent motionEvent)</span> </span>&#123;  </span><br><span class=\"line\">        mGestureDetector.onTouchEvent(motionEvent);  </span><br><span class=\"line\">        childView = recyclerView.findChildViewUnder(motionEvent.getX(), motionEvent.getY());  </span><br><span class=\"line\">        touchView = recyclerView;  </span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">false</span>;  </span><br><span class=\"line\">    &#125;  </span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span>  </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onTouchEvent</span><span class=\"params\">(RecyclerView recyclerView, MotionEvent motionEvent)</span> </span>&#123;  </span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;  </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<h2 id=\"类似listview的addHeaderView和addFooterView\"><a href=\"#类似listview的addHeaderView和addFooterView\" class=\"headerlink\" title=\"类似listview的addHeaderView和addFooterView\"></a><strong>类似listview的<code>addHeaderView</code>和<code>addFooterView</code></strong></h2><p>RecyclerView同样没有提供类似listview的<code>addHeaderView</code>和<code>addFooterView</code> 方法，不过我们可以自定义，参考文章：<br><a href=\"https://github.com/dingdingyr/HeaderAndFooterRecyclerView-\">https://github.com/dingdingyr/HeaderAndFooterRecyclerView-</a><br>原理就是：<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">GridLayoutManager manager = <span class=\"keyword\">new</span> GridLayoutManager(<span class=\"keyword\">this</span>, <span class=\"number\">2</span>);</span><br><span class=\"line\">      manager.setSpanSizeLookup(<span class=\"keyword\">new</span> GridLayoutManager.SpanSizeLookup() &#123;</span><br><span class=\"line\">          <span class=\"meta\">@Override</span></span><br><span class=\"line\">          <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span> <span class=\"title\">getSpanSize</span><span class=\"params\">(<span class=\"keyword\">int</span> position)</span> </span>&#123;</span><br><span class=\"line\">              <span class=\"keyword\">return</span> adapter.getItemViewType()? manager.getSpanCount() : <span class=\"number\">1</span>;</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">      &#125;);</span><br></pre></td></tr></table></figure></p>\n<p>GirdLayout可以设置显示的行数，我们可以根据我们要显示的Item类型来指定这个值。</p>\n<p><strong>还有一个问题，那就是在更新apdater的时候不推荐使用<code>notifyDataSetChanged()</code> ，因为<code>notifyDataSetChanged()</code> 会强制刷新整个视图，如果插入新的数据可以使用 <code>public final void notifyItemRangeInserted(int positionStart, int itemCount);</code>。</strong></p>"},{"title":"翻译：如何在Node.js和Express中使用MySql","date":"2016-04-15T14:57:37.000Z","_content":"\n## 连接到mysql数据库\n\n在这之前先安装正确的npm包：\n```JavaScript\n    npm install mysql\n```\n**mysql** 是一个非常容易使用的模块，它提供了你可能需要的所有功能。安装好后，你需要连接数据库的方法是：\n```JavaScript\nvar mysql = require('mysql')\n\nvar connection = mysql.createConnection({\n  host: 'localhost',\n  user: 'your_user',\n  password: 'some_secret',\n  database: 'database'\n})\n\nconnection.connect(function(err) {\n  if (err) throw err\n  console.log('You are now connected...')\n})\n```\n<!--more-->\n现在，你可以读写你的数据库了。\n\n## 读写mysql数据库\n\n你已经知道如何去连接你的数据库了，现在让我们看一个简单的例子：\n```JavaScript\nvar mysql = require('mysql')\n\nvar connection = mysql.createConnection({\n  host: 'localhost',\n  user: 'your_user',\n  password: 'some_secret',\n  database: 'database'\n})\n\nconnection.connect(function(err) {\n  if (err) throw err\n  console.log('You are now connected...')\n\n  connection.query('CREATE TABLE people(id int primary key, name varchar(255), age int, address text)', function(err, result) {\n    if (err) throw err\n    connection.query('INSERT INTO people (name, age, address) VALUES (?, ?, ?)', ['Larry', '41', 'California, USA'], function(err, result) {\n      if (err) throw err\n      connection.query('SELECT * FROM people', function(err, results) {\n        if (err) throw err\n        console.log(results[0].id)\n        console.log(results[0].name)\n        console.log(results[0].age)\n        console.log(results[0].address)\n      })\n    })\n  })\n})\n```\n你能够看到在上面的占位符`?`，它不仅仅使使用起来更容易，而且也是安全的。\n\n## 更换你的 *db.js* 文件\n\n虽然你看到的mysql模块非常容易，但是真实的应用有着更加复杂的需求。这就是为什么在[Connecting and Working with MongoDB](https://www.terlici.com/2015/04/03/mongodb-node-express.html)中，我们创建一个分开的文件db.js来帮助我们管理我们的连接。\n它的作用是无论何时我们不用经常键入凭证来很容易地连接数据库。它的第二个目标就是很容易运行测试。\n\n```JavaScript\nvar mysql = require('mysql')\n  , async = require('async')\n\nvar PRODUCTION_DB = 'app_prod_database'\n  , TEST_DB = 'app_test_database'\n\nexports.MODE_TEST = 'mode_test'\nexports.MODE_PRODUCTION = 'mode_production'\n\nvar state = {\n  pool: null,\n  mode: null,\n}\n\nexports.connect = function(mode, done) {\n  state.pool = mysql.createPool({\n    host: 'localhost',\n    user: 'your_user',\n    password: 'some_secret',\n    database: mode === exports.MODE_PRODUCTION ? PRODUCTION_DB : TEST_DB\n  })\n\n  state.mode = mode\n  done()\n}\n\nexports.get = function() {\n  return state.pool\n}\n\nexports.fixtures = function(data) {\n  var pool = state.pool\n  if (!pool) return done(new Error('Missing database connection.'))\n\n  var names = Object.keys(data.tables)\n  async.each(names, function(name, cb) {\n    async.each(data.tables[name], function(row, cb) {\n      var keys = Object.keys(row)\n        , values = keys.map(function(key) { return \"'\" + row[key] + \"'\" })\n\n      pool.query('INSERT INTO ' + name + ' (' + keys.join(',') + ') VALUES (' + values.join(',') + ')', cb)\n    }, cb)\n  }, done)\n}\n\nexports.drop = function(tables, done) {\n  var pool = state.pool\n  if (!pool) return done(new Error('Missing database connection.'))\n\n  async.each(tables, function(name, cb) {\n    pool.query('DELETE * FROM ' + name, cb)\n  }, done)\n}\n```\n这个db.js有点儿比我们之前的要复杂的多。\n\n首先，它提供一种方法去连接数据库。在生产模块和测试模块都能\n去连接。测试模块仅在自动化测试时运行。\n\n然后，有一个`get`方法能够一直提供给你有效的连接，也可以用来查询数据库。而且，你可以去设置密码，其他模块也可以调用这个方法。\n\n最后，有两个方法`fixtures`和`drop`，很容易地去退出测试。\n\n**drop** 清空数据，它将会帮助你的测试数据库在测试之前总是空的。\n\n**fixtures** 使用json对象，加载数据库中的数据，看一个例子：\n```JavaScript\nvar data = {\n  tables: {\n    people: [\n     {id: 1, name: \"John\", age: 32},\n     {id: 2, name: \"Peter\", age: 29},\n    ],\n    cars: [\n      {id: 1, brand: \"Jeep\", model: \"Cherokee\", owner_id: 2},\n      {id: 2, brand: \"BMW\", model: \"X5\", owner_id: 2},\n      {id: 3, brand: \"Volkswagen\", model: \"Polo\", owner_id: 1},\n    ],\n  },\n}\n\nvar db = require('./db')\ndb.connect(db.MODE_PRODUCTION, function() {\n  db.fixtures(data, function(err) {\n    if (err) return console.log(err)\n    console.log('Data has been loaded...')\n  })\n})\n```\n\n## 使用SQL搭建模块\n\n所有事情准备好了，接下来看看如何在你的应用中使用db.js。来看一个例子：\n```JavaScript\ncontrollers/\n  comments.js\n  users.js\nmodels/\n  comment.js\n  user.js\nviews/\napp.js\ndb.js\npackage.json\n```\n**app.js** 是应用的入口，也是我们将要设置数据库连接的地方。来看一个例子：\n```JavaScript\nvar db = require('./db')\n\napp.use('/comments', require('./controllers/comments'))\napp.use('/users', require('./controllers/users'))\n\n// Connect to MySQL on start\ndb.connect(db.MODE_PRODUCTION, function(err) {\n  if (err) {\n    console.log('Unable to connect to MySQL.')\n    process.exit(1)\n  } else {\n    app.listen(3000, function() {\n      console.log('Listening on port 3000...')\n    })\n  }\n})\n```\n你的应用将会通过这个模块来与数据库交互。来看一个例子：\n```JavaScript\nvar db = require('../db.js')\n\nexports.create = function(userId, text, done) {\n  var values = [userId, text, new Date().toISOString()]\n\n  db.get().query('INSERT INTO comments (user_id, text, date) VALUES(?, ?, ?)', values, function(err, result) {\n    if (err) return done(err)\n    done(null, result.insertId)\n  })\n}\n\nexports.getAll = function(done) {\n  db.get().query('SELECT * FROM comments', function (err, rows) {\n    if (err) return done(err)\n    done(null, rows)\n  })\n}\n\nexports.getAllByUser = function(userId, done) {\n  db.get().query('SELECT * FROM comments WHERE user_id = ?', userId, function (err, rows) {\n    if (err) return done(err)\n    done(null, rows)\n  })\n}\n```\n正如你看到的db.js是你完全不用带薪连接数据库的问题，甚至不用只用是否是生产环境还是测试环境。\n\n## 为读和写使用不一样的实例\n\n随着你的应用需求的增长，今天，很多应用都是面向读的。这就意味着，人们读数据少于写数据。例如，所有这一类应用的社交网站，通常你的状态只被读一次，但是然后被成千上万的人去读。在这种情况下是通常有一个主要的数据库将接受所有的写,然后同步到一些MySQL实例将只读取请求。当你有更多的用户可以很容易地添加更多数据库去读，你的应用将仍然是非常快的。\n\n但是，如何在我们的初始化中解决这个问题呢？mysql模块 **PoolCluster** 特性非常有用,它可以配置几个实例,然后连接到所有的人。看一个db.js中的例子：\n```JavaScript\nvar mysql = require('mysql')\n  , async = require('async')\n\nvar PRODUCTION_DB = 'app_prod_database'\n  , TEST_DB = 'app_test_database'\n\nexports.MODE_TEST = 'mode_test'\nexports.MODE_PRODUCTION = 'mode_production'\n\nvar state = {\n  pool: null,\n  mode: null,\n}\n\nexports.connect = function(mode, done) {\n  if (mode === exports.MODE_PRODUCTION) {\n    state.pool = mysql.createPoolCluster()\n\n    state.pool.add('WRITE', {\n      host: '192.168.0.5',\n      user: 'your_user',\n      password: 'some_secret',\n      database: PRODUCTION_DB\n    })\n\n    state.pool.add('READ1', {\n      host: '192.168.0.6',\n      user: 'your_user',\n      password: 'some_secret',\n      database: PRODUCTION_DB\n    })\n\n    state.pool.add('READ2', {\n      host: '192.168.0.7',\n      user: 'your_user',\n      password: 'some_secret',\n      database: PRODUCTION_DB\n    })\n  } else {\n    state.pool = mysql.createPool({\n      host: 'localhost',\n      user: 'your_user',\n      password: 'some_secret',\n      database: TEST_DB\n    })\n  }\n\n  state.mode = mode\n  done()\n}\n\nexports.READ = 'read'\nexports.WRITE = 'write'\n\nexports.get = function(type, done) {\n  var pool = state.pool\n  if (!pool) return done(new Error('Missing database connection.'))\n\n  if (type === exports.WRITE) {\n    state.pool.getConnection('WRITE', function (err, connection) {\n      if (err) return done(err)\n      done(null, connection)\n    })\n  } else {\n    state.pool.getConnection('READ*', function (err, connection) {\n      if (err) return done(err)\n      done(null, connection)\n    })\n  }\n}\n\nexports.fixtures = function(data) {\n  var pool = state.pool\n  if (!pool) return done(new Error('Missing database connection.'))\n\n  var names = Object.keys(data.tables)\n  async.each(names, function(name, cb) {\n    async.each(data.tables[name], function(row, cb) {\n      var keys = Object.keys(row)\n        , values = keys.map(function(key) { return \"'\" + row[key] + \"'\" })\n\n      pool.query('INSERT INTO ' + name + ' (' + keys.join(',') + ') VALUES (' + values.join(',') + ')', cb)\n    }, cb)\n  }, done)\n}\n\nexports.drop = function(tables, done) {\n  var pool = state.pool\n  if (!pool) return done(new Error('Missing database connection.'))\n\n  async.each(tables, function(name, cb) {\n    pool.query('DELETE * FROM ' + name, cb)\n  }, done)\n}\n```\n这里有三处和之前的不一样。\n\n1. 当连接在连接方法在测试模式下,做你之前所做的。然而,当你在生产模式下,添加3个更多的servers。每一个server都有一个名字，第一个是`WRITE`，另外两个是`READ1`和`READ2`。应该很清楚每一个的目的是什么。`READ1`和`READ2`是`WRITE`的奴隶,所以每次有人写数据到`WRITE`,然后很快地对`READ1`和`READ2`可用。\n2. 第二处变化是`get`方法。之前，它会立即返回一个连接。现在，它返回一个连接到回调函数作为第二个参数提供。\n3. 最后一处变化还是在`get`方法。在你连接数据库的时候，你需要告诉连接的类型 **READ** 和 **WRITE**。然后根据名称设置为服务器将提供正确的类型的连接。在这种情况下你可以看到`getConnection`提供一种模式系统,这样您就可以选择适当的数据库\n\n然后让我们看一个使用 **db.js** 的实例：\n```JavaScript\nvar db = require('../db.js')\n\nexports.create = function(userId, text, done) {\n  var values = [userId, text, new Date().toISOString()]\n\n  db.get(db.WRITE, function(err, connection) {\n    if (err) return done('Database problem')\n\n    connection.query('INSERT INTO comments (user_id, text, date) VALUES(?, ?, ?)', values, function(err, result) {\n      if (err) return done(err)\n      done(null, result.insertId)\n    })\n  })\n}\n\nexports.getAll = function(done) {\n  db.get(db.READ, function(err, connection) {\n    if (err) return done('Database problem')\n\n    connection.query('SELECT * FROM comments', function (err, rows) {\n      if (err) return done(err)\n      done(null, rows)\n    })\n  })\n}\n\nexports.getAllByUser = function(userId, done) {\n  db.get(db.READ, function(err, connection) {\n    if (err) return done('Database problem')\n\n    connection.query('SELECT * FROM comments WHERE user_id = ?', userId, function (err, rows) {\n      if (err) return done(err)\n      done(null, rows)\n    })\n  })\n}\n```\n你也可以创建一个代理连接对象,基于可以查询了解这是一个写或读,然后选择适当的连接。这样你甚至不会改变你的模块。\n\n## 最后\n\n本文翻译了<https://www.terlici.com/2015/08/13/mysql-node-express.html>的大部分，如果有错误，可以留言。\n","source":"_posts/mysql-node-express.md","raw":"---\ntitle: 翻译：如何在Node.js和Express中使用MySql\ndate: 2016-04-15 22:57:37\ntags:\n  - Node.js\n  - mysql\n  - Express\n\n---\n\n## 连接到mysql数据库\n\n在这之前先安装正确的npm包：\n```JavaScript\n    npm install mysql\n```\n**mysql** 是一个非常容易使用的模块，它提供了你可能需要的所有功能。安装好后，你需要连接数据库的方法是：\n```JavaScript\nvar mysql = require('mysql')\n\nvar connection = mysql.createConnection({\n  host: 'localhost',\n  user: 'your_user',\n  password: 'some_secret',\n  database: 'database'\n})\n\nconnection.connect(function(err) {\n  if (err) throw err\n  console.log('You are now connected...')\n})\n```\n<!--more-->\n现在，你可以读写你的数据库了。\n\n## 读写mysql数据库\n\n你已经知道如何去连接你的数据库了，现在让我们看一个简单的例子：\n```JavaScript\nvar mysql = require('mysql')\n\nvar connection = mysql.createConnection({\n  host: 'localhost',\n  user: 'your_user',\n  password: 'some_secret',\n  database: 'database'\n})\n\nconnection.connect(function(err) {\n  if (err) throw err\n  console.log('You are now connected...')\n\n  connection.query('CREATE TABLE people(id int primary key, name varchar(255), age int, address text)', function(err, result) {\n    if (err) throw err\n    connection.query('INSERT INTO people (name, age, address) VALUES (?, ?, ?)', ['Larry', '41', 'California, USA'], function(err, result) {\n      if (err) throw err\n      connection.query('SELECT * FROM people', function(err, results) {\n        if (err) throw err\n        console.log(results[0].id)\n        console.log(results[0].name)\n        console.log(results[0].age)\n        console.log(results[0].address)\n      })\n    })\n  })\n})\n```\n你能够看到在上面的占位符`?`，它不仅仅使使用起来更容易，而且也是安全的。\n\n## 更换你的 *db.js* 文件\n\n虽然你看到的mysql模块非常容易，但是真实的应用有着更加复杂的需求。这就是为什么在[Connecting and Working with MongoDB](https://www.terlici.com/2015/04/03/mongodb-node-express.html)中，我们创建一个分开的文件db.js来帮助我们管理我们的连接。\n它的作用是无论何时我们不用经常键入凭证来很容易地连接数据库。它的第二个目标就是很容易运行测试。\n\n```JavaScript\nvar mysql = require('mysql')\n  , async = require('async')\n\nvar PRODUCTION_DB = 'app_prod_database'\n  , TEST_DB = 'app_test_database'\n\nexports.MODE_TEST = 'mode_test'\nexports.MODE_PRODUCTION = 'mode_production'\n\nvar state = {\n  pool: null,\n  mode: null,\n}\n\nexports.connect = function(mode, done) {\n  state.pool = mysql.createPool({\n    host: 'localhost',\n    user: 'your_user',\n    password: 'some_secret',\n    database: mode === exports.MODE_PRODUCTION ? PRODUCTION_DB : TEST_DB\n  })\n\n  state.mode = mode\n  done()\n}\n\nexports.get = function() {\n  return state.pool\n}\n\nexports.fixtures = function(data) {\n  var pool = state.pool\n  if (!pool) return done(new Error('Missing database connection.'))\n\n  var names = Object.keys(data.tables)\n  async.each(names, function(name, cb) {\n    async.each(data.tables[name], function(row, cb) {\n      var keys = Object.keys(row)\n        , values = keys.map(function(key) { return \"'\" + row[key] + \"'\" })\n\n      pool.query('INSERT INTO ' + name + ' (' + keys.join(',') + ') VALUES (' + values.join(',') + ')', cb)\n    }, cb)\n  }, done)\n}\n\nexports.drop = function(tables, done) {\n  var pool = state.pool\n  if (!pool) return done(new Error('Missing database connection.'))\n\n  async.each(tables, function(name, cb) {\n    pool.query('DELETE * FROM ' + name, cb)\n  }, done)\n}\n```\n这个db.js有点儿比我们之前的要复杂的多。\n\n首先，它提供一种方法去连接数据库。在生产模块和测试模块都能\n去连接。测试模块仅在自动化测试时运行。\n\n然后，有一个`get`方法能够一直提供给你有效的连接，也可以用来查询数据库。而且，你可以去设置密码，其他模块也可以调用这个方法。\n\n最后，有两个方法`fixtures`和`drop`，很容易地去退出测试。\n\n**drop** 清空数据，它将会帮助你的测试数据库在测试之前总是空的。\n\n**fixtures** 使用json对象，加载数据库中的数据，看一个例子：\n```JavaScript\nvar data = {\n  tables: {\n    people: [\n     {id: 1, name: \"John\", age: 32},\n     {id: 2, name: \"Peter\", age: 29},\n    ],\n    cars: [\n      {id: 1, brand: \"Jeep\", model: \"Cherokee\", owner_id: 2},\n      {id: 2, brand: \"BMW\", model: \"X5\", owner_id: 2},\n      {id: 3, brand: \"Volkswagen\", model: \"Polo\", owner_id: 1},\n    ],\n  },\n}\n\nvar db = require('./db')\ndb.connect(db.MODE_PRODUCTION, function() {\n  db.fixtures(data, function(err) {\n    if (err) return console.log(err)\n    console.log('Data has been loaded...')\n  })\n})\n```\n\n## 使用SQL搭建模块\n\n所有事情准备好了，接下来看看如何在你的应用中使用db.js。来看一个例子：\n```JavaScript\ncontrollers/\n  comments.js\n  users.js\nmodels/\n  comment.js\n  user.js\nviews/\napp.js\ndb.js\npackage.json\n```\n**app.js** 是应用的入口，也是我们将要设置数据库连接的地方。来看一个例子：\n```JavaScript\nvar db = require('./db')\n\napp.use('/comments', require('./controllers/comments'))\napp.use('/users', require('./controllers/users'))\n\n// Connect to MySQL on start\ndb.connect(db.MODE_PRODUCTION, function(err) {\n  if (err) {\n    console.log('Unable to connect to MySQL.')\n    process.exit(1)\n  } else {\n    app.listen(3000, function() {\n      console.log('Listening on port 3000...')\n    })\n  }\n})\n```\n你的应用将会通过这个模块来与数据库交互。来看一个例子：\n```JavaScript\nvar db = require('../db.js')\n\nexports.create = function(userId, text, done) {\n  var values = [userId, text, new Date().toISOString()]\n\n  db.get().query('INSERT INTO comments (user_id, text, date) VALUES(?, ?, ?)', values, function(err, result) {\n    if (err) return done(err)\n    done(null, result.insertId)\n  })\n}\n\nexports.getAll = function(done) {\n  db.get().query('SELECT * FROM comments', function (err, rows) {\n    if (err) return done(err)\n    done(null, rows)\n  })\n}\n\nexports.getAllByUser = function(userId, done) {\n  db.get().query('SELECT * FROM comments WHERE user_id = ?', userId, function (err, rows) {\n    if (err) return done(err)\n    done(null, rows)\n  })\n}\n```\n正如你看到的db.js是你完全不用带薪连接数据库的问题，甚至不用只用是否是生产环境还是测试环境。\n\n## 为读和写使用不一样的实例\n\n随着你的应用需求的增长，今天，很多应用都是面向读的。这就意味着，人们读数据少于写数据。例如，所有这一类应用的社交网站，通常你的状态只被读一次，但是然后被成千上万的人去读。在这种情况下是通常有一个主要的数据库将接受所有的写,然后同步到一些MySQL实例将只读取请求。当你有更多的用户可以很容易地添加更多数据库去读，你的应用将仍然是非常快的。\n\n但是，如何在我们的初始化中解决这个问题呢？mysql模块 **PoolCluster** 特性非常有用,它可以配置几个实例,然后连接到所有的人。看一个db.js中的例子：\n```JavaScript\nvar mysql = require('mysql')\n  , async = require('async')\n\nvar PRODUCTION_DB = 'app_prod_database'\n  , TEST_DB = 'app_test_database'\n\nexports.MODE_TEST = 'mode_test'\nexports.MODE_PRODUCTION = 'mode_production'\n\nvar state = {\n  pool: null,\n  mode: null,\n}\n\nexports.connect = function(mode, done) {\n  if (mode === exports.MODE_PRODUCTION) {\n    state.pool = mysql.createPoolCluster()\n\n    state.pool.add('WRITE', {\n      host: '192.168.0.5',\n      user: 'your_user',\n      password: 'some_secret',\n      database: PRODUCTION_DB\n    })\n\n    state.pool.add('READ1', {\n      host: '192.168.0.6',\n      user: 'your_user',\n      password: 'some_secret',\n      database: PRODUCTION_DB\n    })\n\n    state.pool.add('READ2', {\n      host: '192.168.0.7',\n      user: 'your_user',\n      password: 'some_secret',\n      database: PRODUCTION_DB\n    })\n  } else {\n    state.pool = mysql.createPool({\n      host: 'localhost',\n      user: 'your_user',\n      password: 'some_secret',\n      database: TEST_DB\n    })\n  }\n\n  state.mode = mode\n  done()\n}\n\nexports.READ = 'read'\nexports.WRITE = 'write'\n\nexports.get = function(type, done) {\n  var pool = state.pool\n  if (!pool) return done(new Error('Missing database connection.'))\n\n  if (type === exports.WRITE) {\n    state.pool.getConnection('WRITE', function (err, connection) {\n      if (err) return done(err)\n      done(null, connection)\n    })\n  } else {\n    state.pool.getConnection('READ*', function (err, connection) {\n      if (err) return done(err)\n      done(null, connection)\n    })\n  }\n}\n\nexports.fixtures = function(data) {\n  var pool = state.pool\n  if (!pool) return done(new Error('Missing database connection.'))\n\n  var names = Object.keys(data.tables)\n  async.each(names, function(name, cb) {\n    async.each(data.tables[name], function(row, cb) {\n      var keys = Object.keys(row)\n        , values = keys.map(function(key) { return \"'\" + row[key] + \"'\" })\n\n      pool.query('INSERT INTO ' + name + ' (' + keys.join(',') + ') VALUES (' + values.join(',') + ')', cb)\n    }, cb)\n  }, done)\n}\n\nexports.drop = function(tables, done) {\n  var pool = state.pool\n  if (!pool) return done(new Error('Missing database connection.'))\n\n  async.each(tables, function(name, cb) {\n    pool.query('DELETE * FROM ' + name, cb)\n  }, done)\n}\n```\n这里有三处和之前的不一样。\n\n1. 当连接在连接方法在测试模式下,做你之前所做的。然而,当你在生产模式下,添加3个更多的servers。每一个server都有一个名字，第一个是`WRITE`，另外两个是`READ1`和`READ2`。应该很清楚每一个的目的是什么。`READ1`和`READ2`是`WRITE`的奴隶,所以每次有人写数据到`WRITE`,然后很快地对`READ1`和`READ2`可用。\n2. 第二处变化是`get`方法。之前，它会立即返回一个连接。现在，它返回一个连接到回调函数作为第二个参数提供。\n3. 最后一处变化还是在`get`方法。在你连接数据库的时候，你需要告诉连接的类型 **READ** 和 **WRITE**。然后根据名称设置为服务器将提供正确的类型的连接。在这种情况下你可以看到`getConnection`提供一种模式系统,这样您就可以选择适当的数据库\n\n然后让我们看一个使用 **db.js** 的实例：\n```JavaScript\nvar db = require('../db.js')\n\nexports.create = function(userId, text, done) {\n  var values = [userId, text, new Date().toISOString()]\n\n  db.get(db.WRITE, function(err, connection) {\n    if (err) return done('Database problem')\n\n    connection.query('INSERT INTO comments (user_id, text, date) VALUES(?, ?, ?)', values, function(err, result) {\n      if (err) return done(err)\n      done(null, result.insertId)\n    })\n  })\n}\n\nexports.getAll = function(done) {\n  db.get(db.READ, function(err, connection) {\n    if (err) return done('Database problem')\n\n    connection.query('SELECT * FROM comments', function (err, rows) {\n      if (err) return done(err)\n      done(null, rows)\n    })\n  })\n}\n\nexports.getAllByUser = function(userId, done) {\n  db.get(db.READ, function(err, connection) {\n    if (err) return done('Database problem')\n\n    connection.query('SELECT * FROM comments WHERE user_id = ?', userId, function (err, rows) {\n      if (err) return done(err)\n      done(null, rows)\n    })\n  })\n}\n```\n你也可以创建一个代理连接对象,基于可以查询了解这是一个写或读,然后选择适当的连接。这样你甚至不会改变你的模块。\n\n## 最后\n\n本文翻译了<https://www.terlici.com/2015/08/13/mysql-node-express.html>的大部分，如果有错误，可以留言。\n","slug":"mysql-node-express","published":1,"updated":"2016-08-24T15:50:44.396Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cis92vebe000kh8dqyls59g8z","content":"<h2 id=\"连接到mysql数据库\"><a href=\"#连接到mysql数据库\" class=\"headerlink\" title=\"连接到mysql数据库\"></a>连接到mysql数据库</h2><p>在这之前先安装正确的npm包：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install mysql</span><br></pre></td></tr></table></figure></p>\n<p><strong>mysql</strong> 是一个非常容易使用的模块，它提供了你可能需要的所有功能。安装好后，你需要连接数据库的方法是：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> mysql = <span class=\"built_in\">require</span>(<span class=\"string\">'mysql'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> connection = mysql.createConnection(&#123;</span><br><span class=\"line\">  host: <span class=\"string\">'localhost'</span>,</span><br><span class=\"line\">  user: <span class=\"string\">'your_user'</span>,</span><br><span class=\"line\">  password: <span class=\"string\">'some_secret'</span>,</span><br><span class=\"line\">  database: <span class=\"string\">'database'</span></span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">connection.connect(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">err</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (err) <span class=\"keyword\">throw</span> err</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'You are now connected...'</span>)</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure></p>\n<a id=\"more\"></a>\n<p>现在，你可以读写你的数据库了。</p>\n<h2 id=\"读写mysql数据库\"><a href=\"#读写mysql数据库\" class=\"headerlink\" title=\"读写mysql数据库\"></a>读写mysql数据库</h2><p>你已经知道如何去连接你的数据库了，现在让我们看一个简单的例子：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> mysql = <span class=\"built_in\">require</span>(<span class=\"string\">'mysql'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> connection = mysql.createConnection(&#123;</span><br><span class=\"line\">  host: <span class=\"string\">'localhost'</span>,</span><br><span class=\"line\">  user: <span class=\"string\">'your_user'</span>,</span><br><span class=\"line\">  password: <span class=\"string\">'some_secret'</span>,</span><br><span class=\"line\">  database: <span class=\"string\">'database'</span></span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">connection.connect(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">err</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (err) <span class=\"keyword\">throw</span> err</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'You are now connected...'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">  connection.query(<span class=\"string\">'CREATE TABLE people(id int primary key, name varchar(255), age int, address text)'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">err, result</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (err) <span class=\"keyword\">throw</span> err</span><br><span class=\"line\">    connection.query(<span class=\"string\">'INSERT INTO people (name, age, address) VALUES (?, ?, ?)'</span>, [<span class=\"string\">'Larry'</span>, <span class=\"string\">'41'</span>, <span class=\"string\">'California, USA'</span>], <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">err, result</span>) </span>&#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (err) <span class=\"keyword\">throw</span> err</span><br><span class=\"line\">      connection.query(<span class=\"string\">'SELECT * FROM people'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">err, results</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (err) <span class=\"keyword\">throw</span> err</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(results[<span class=\"number\">0</span>].id)</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(results[<span class=\"number\">0</span>].name)</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(results[<span class=\"number\">0</span>].age)</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(results[<span class=\"number\">0</span>].address)</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure></p>\n<p>你能够看到在上面的占位符<code>?</code>，它不仅仅使使用起来更容易，而且也是安全的。</p>\n<h2 id=\"更换你的-db-js-文件\"><a href=\"#更换你的-db-js-文件\" class=\"headerlink\" title=\"更换你的 db.js 文件\"></a>更换你的 <em>db.js</em> 文件</h2><p>虽然你看到的mysql模块非常容易，但是真实的应用有着更加复杂的需求。这就是为什么在<a href=\"https://www.terlici.com/2015/04/03/mongodb-node-express.html\" target=\"_blank\" rel=\"external\">Connecting and Working with MongoDB</a>中，我们创建一个分开的文件db.js来帮助我们管理我们的连接。<br>它的作用是无论何时我们不用经常键入凭证来很容易地连接数据库。它的第二个目标就是很容易运行测试。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> mysql = <span class=\"built_in\">require</span>(<span class=\"string\">'mysql'</span>)</span><br><span class=\"line\">  , <span class=\"keyword\">async</span> = <span class=\"built_in\">require</span>(<span class=\"string\">'async'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> PRODUCTION_DB = <span class=\"string\">'app_prod_database'</span></span><br><span class=\"line\">  , TEST_DB = <span class=\"string\">'app_test_database'</span></span><br><span class=\"line\"></span><br><span class=\"line\">exports.MODE_TEST = <span class=\"string\">'mode_test'</span></span><br><span class=\"line\">exports.MODE_PRODUCTION = <span class=\"string\">'mode_production'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> state = &#123;</span><br><span class=\"line\">  pool: <span class=\"literal\">null</span>,</span><br><span class=\"line\">  mode: <span class=\"literal\">null</span>,</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">exports.connect = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">mode, done</span>) </span>&#123;</span><br><span class=\"line\">  state.pool = mysql.createPool(&#123;</span><br><span class=\"line\">    host: <span class=\"string\">'localhost'</span>,</span><br><span class=\"line\">    user: <span class=\"string\">'your_user'</span>,</span><br><span class=\"line\">    password: <span class=\"string\">'some_secret'</span>,</span><br><span class=\"line\">    database: mode === exports.MODE_PRODUCTION ? PRODUCTION_DB : TEST_DB</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">  state.mode = mode</span><br><span class=\"line\">  done()</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">exports.get = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> state.pool</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">exports.fixtures = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">data</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> pool = state.pool</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (!pool) <span class=\"keyword\">return</span> done(<span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">'Missing database connection.'</span>))</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">var</span> names = <span class=\"built_in\">Object</span>.keys(data.tables)</span><br><span class=\"line\">  <span class=\"keyword\">async</span>.each(names, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">name, cb</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">async</span>.each(data.tables[name], <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">row, cb</span>) </span>&#123;</span><br><span class=\"line\">      <span class=\"keyword\">var</span> keys = <span class=\"built_in\">Object</span>.keys(row)</span><br><span class=\"line\">        , values = keys.map(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">key</span>) </span>&#123; <span class=\"keyword\">return</span> <span class=\"string\">\"'\"</span> + row[key] + <span class=\"string\">\"'\"</span> &#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">      pool.query(<span class=\"string\">'INSERT INTO '</span> + name + <span class=\"string\">' ('</span> + keys.join(<span class=\"string\">','</span>) + <span class=\"string\">') VALUES ('</span> + values.join(<span class=\"string\">','</span>) + <span class=\"string\">')'</span>, cb)</span><br><span class=\"line\">    &#125;, cb)</span><br><span class=\"line\">  &#125;, done)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">exports.drop = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">tables, done</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> pool = state.pool</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (!pool) <span class=\"keyword\">return</span> done(<span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">'Missing database connection.'</span>))</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">async</span>.each(tables, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">name, cb</span>) </span>&#123;</span><br><span class=\"line\">    pool.query(<span class=\"string\">'DELETE * FROM '</span> + name, cb)</span><br><span class=\"line\">  &#125;, done)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>这个db.js有点儿比我们之前的要复杂的多。</p>\n<p>首先，它提供一种方法去连接数据库。在生产模块和测试模块都能<br>去连接。测试模块仅在自动化测试时运行。</p>\n<p>然后，有一个<code>get</code>方法能够一直提供给你有效的连接，也可以用来查询数据库。而且，你可以去设置密码，其他模块也可以调用这个方法。</p>\n<p>最后，有两个方法<code>fixtures</code>和<code>drop</code>，很容易地去退出测试。</p>\n<p><strong>drop</strong> 清空数据，它将会帮助你的测试数据库在测试之前总是空的。</p>\n<p><strong>fixtures</strong> 使用json对象，加载数据库中的数据，看一个例子：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> data = &#123;</span><br><span class=\"line\">  tables: &#123;</span><br><span class=\"line\">    people: [</span><br><span class=\"line\">     &#123;id: <span class=\"number\">1</span>, name: <span class=\"string\">\"John\"</span>, age: <span class=\"number\">32</span>&#125;,</span><br><span class=\"line\">     &#123;id: <span class=\"number\">2</span>, name: <span class=\"string\">\"Peter\"</span>, age: <span class=\"number\">29</span>&#125;,</span><br><span class=\"line\">    ],</span><br><span class=\"line\">    cars: [</span><br><span class=\"line\">      &#123;id: <span class=\"number\">1</span>, brand: <span class=\"string\">\"Jeep\"</span>, model: <span class=\"string\">\"Cherokee\"</span>, owner_id: <span class=\"number\">2</span>&#125;,</span><br><span class=\"line\">      &#123;id: <span class=\"number\">2</span>, brand: <span class=\"string\">\"BMW\"</span>, model: <span class=\"string\">\"X5\"</span>, owner_id: <span class=\"number\">2</span>&#125;,</span><br><span class=\"line\">      &#123;id: <span class=\"number\">3</span>, brand: <span class=\"string\">\"Volkswagen\"</span>, model: <span class=\"string\">\"Polo\"</span>, owner_id: <span class=\"number\">1</span>&#125;,</span><br><span class=\"line\">    ],</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> db = <span class=\"built_in\">require</span>(<span class=\"string\">'./db'</span>)</span><br><span class=\"line\">db.connect(db.MODE_PRODUCTION, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  db.fixtures(data, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">err</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (err) <span class=\"keyword\">return</span> <span class=\"built_in\">console</span>.log(err)</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'Data has been loaded...'</span>)</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure></p>\n<h2 id=\"使用SQL搭建模块\"><a href=\"#使用SQL搭建模块\" class=\"headerlink\" title=\"使用SQL搭建模块\"></a>使用SQL搭建模块</h2><p>所有事情准备好了，接下来看看如何在你的应用中使用db.js。来看一个例子：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">controllers/</span><br><span class=\"line\">  comments.js</span><br><span class=\"line\">  users.js</span><br><span class=\"line\">models/</span><br><span class=\"line\">  comment.js</span><br><span class=\"line\">  user.js</span><br><span class=\"line\">views/</span><br><span class=\"line\">app.js</span><br><span class=\"line\">db.js</span><br><span class=\"line\">package.json</span><br></pre></td></tr></table></figure></p>\n<p><strong>app.js</strong> 是应用的入口，也是我们将要设置数据库连接的地方。来看一个例子：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> db = <span class=\"built_in\">require</span>(<span class=\"string\">'./db'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">app.use(<span class=\"string\">'/comments'</span>, <span class=\"built_in\">require</span>(<span class=\"string\">'./controllers/comments'</span>))</span><br><span class=\"line\">app.use(<span class=\"string\">'/users'</span>, <span class=\"built_in\">require</span>(<span class=\"string\">'./controllers/users'</span>))</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Connect to MySQL on start</span></span><br><span class=\"line\">db.connect(db.MODE_PRODUCTION, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">err</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (err) &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'Unable to connect to MySQL.'</span>)</span><br><span class=\"line\">    process.exit(<span class=\"number\">1</span>)</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    app.listen(<span class=\"number\">3000</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"string\">'Listening on port 3000...'</span>)</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure></p>\n<p>你的应用将会通过这个模块来与数据库交互。来看一个例子：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> db = <span class=\"built_in\">require</span>(<span class=\"string\">'../db.js'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">exports.create = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">userId, text, done</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> values = [userId, text, <span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>().toISOString()]</span><br><span class=\"line\"></span><br><span class=\"line\">  db.get().query(<span class=\"string\">'INSERT INTO comments (user_id, text, date) VALUES(?, ?, ?)'</span>, values, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">err, result</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (err) <span class=\"keyword\">return</span> done(err)</span><br><span class=\"line\">    done(<span class=\"literal\">null</span>, result.insertId)</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">exports.getAll = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">done</span>) </span>&#123;</span><br><span class=\"line\">  db.get().query(<span class=\"string\">'SELECT * FROM comments'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">err, rows</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (err) <span class=\"keyword\">return</span> done(err)</span><br><span class=\"line\">    done(<span class=\"literal\">null</span>, rows)</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">exports.getAllByUser = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">userId, done</span>) </span>&#123;</span><br><span class=\"line\">  db.get().query(<span class=\"string\">'SELECT * FROM comments WHERE user_id = ?'</span>, userId, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">err, rows</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (err) <span class=\"keyword\">return</span> done(err)</span><br><span class=\"line\">    done(<span class=\"literal\">null</span>, rows)</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>正如你看到的db.js是你完全不用带薪连接数据库的问题，甚至不用只用是否是生产环境还是测试环境。</p>\n<h2 id=\"为读和写使用不一样的实例\"><a href=\"#为读和写使用不一样的实例\" class=\"headerlink\" title=\"为读和写使用不一样的实例\"></a>为读和写使用不一样的实例</h2><p>随着你的应用需求的增长，今天，很多应用都是面向读的。这就意味着，人们读数据少于写数据。例如，所有这一类应用的社交网站，通常你的状态只被读一次，但是然后被成千上万的人去读。在这种情况下是通常有一个主要的数据库将接受所有的写,然后同步到一些MySQL实例将只读取请求。当你有更多的用户可以很容易地添加更多数据库去读，你的应用将仍然是非常快的。</p>\n<p>但是，如何在我们的初始化中解决这个问题呢？mysql模块 <strong>PoolCluster</strong> 特性非常有用,它可以配置几个实例,然后连接到所有的人。看一个db.js中的例子：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> mysql = <span class=\"built_in\">require</span>(<span class=\"string\">'mysql'</span>)</span><br><span class=\"line\">  , <span class=\"keyword\">async</span> = <span class=\"built_in\">require</span>(<span class=\"string\">'async'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> PRODUCTION_DB = <span class=\"string\">'app_prod_database'</span></span><br><span class=\"line\">  , TEST_DB = <span class=\"string\">'app_test_database'</span></span><br><span class=\"line\"></span><br><span class=\"line\">exports.MODE_TEST = <span class=\"string\">'mode_test'</span></span><br><span class=\"line\">exports.MODE_PRODUCTION = <span class=\"string\">'mode_production'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> state = &#123;</span><br><span class=\"line\">  pool: <span class=\"literal\">null</span>,</span><br><span class=\"line\">  mode: <span class=\"literal\">null</span>,</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">exports.connect = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">mode, done</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (mode === exports.MODE_PRODUCTION) &#123;</span><br><span class=\"line\">    state.pool = mysql.createPoolCluster()</span><br><span class=\"line\"></span><br><span class=\"line\">    state.pool.add(<span class=\"string\">'WRITE'</span>, &#123;</span><br><span class=\"line\">      host: <span class=\"string\">'192.168.0.5'</span>,</span><br><span class=\"line\">      user: <span class=\"string\">'your_user'</span>,</span><br><span class=\"line\">      password: <span class=\"string\">'some_secret'</span>,</span><br><span class=\"line\">      database: PRODUCTION_DB</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">    state.pool.add(<span class=\"string\">'READ1'</span>, &#123;</span><br><span class=\"line\">      host: <span class=\"string\">'192.168.0.6'</span>,</span><br><span class=\"line\">      user: <span class=\"string\">'your_user'</span>,</span><br><span class=\"line\">      password: <span class=\"string\">'some_secret'</span>,</span><br><span class=\"line\">      database: PRODUCTION_DB</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">    state.pool.add(<span class=\"string\">'READ2'</span>, &#123;</span><br><span class=\"line\">      host: <span class=\"string\">'192.168.0.7'</span>,</span><br><span class=\"line\">      user: <span class=\"string\">'your_user'</span>,</span><br><span class=\"line\">      password: <span class=\"string\">'some_secret'</span>,</span><br><span class=\"line\">      database: PRODUCTION_DB</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    state.pool = mysql.createPool(&#123;</span><br><span class=\"line\">      host: <span class=\"string\">'localhost'</span>,</span><br><span class=\"line\">      user: <span class=\"string\">'your_user'</span>,</span><br><span class=\"line\">      password: <span class=\"string\">'some_secret'</span>,</span><br><span class=\"line\">      database: TEST_DB</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  state.mode = mode</span><br><span class=\"line\">  done()</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">exports.READ = <span class=\"string\">'read'</span></span><br><span class=\"line\">exports.WRITE = <span class=\"string\">'write'</span></span><br><span class=\"line\"></span><br><span class=\"line\">exports.get = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">type, done</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> pool = state.pool</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (!pool) <span class=\"keyword\">return</span> done(<span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">'Missing database connection.'</span>))</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (type === exports.WRITE) &#123;</span><br><span class=\"line\">    state.pool.getConnection(<span class=\"string\">'WRITE'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">err, connection</span>) </span>&#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (err) <span class=\"keyword\">return</span> done(err)</span><br><span class=\"line\">      done(<span class=\"literal\">null</span>, connection)</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    state.pool.getConnection(<span class=\"string\">'READ*'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">err, connection</span>) </span>&#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (err) <span class=\"keyword\">return</span> done(err)</span><br><span class=\"line\">      done(<span class=\"literal\">null</span>, connection)</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">exports.fixtures = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">data</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> pool = state.pool</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (!pool) <span class=\"keyword\">return</span> done(<span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">'Missing database connection.'</span>))</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">var</span> names = <span class=\"built_in\">Object</span>.keys(data.tables)</span><br><span class=\"line\">  <span class=\"keyword\">async</span>.each(names, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">name, cb</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">async</span>.each(data.tables[name], <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">row, cb</span>) </span>&#123;</span><br><span class=\"line\">      <span class=\"keyword\">var</span> keys = <span class=\"built_in\">Object</span>.keys(row)</span><br><span class=\"line\">        , values = keys.map(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">key</span>) </span>&#123; <span class=\"keyword\">return</span> <span class=\"string\">\"'\"</span> + row[key] + <span class=\"string\">\"'\"</span> &#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">      pool.query(<span class=\"string\">'INSERT INTO '</span> + name + <span class=\"string\">' ('</span> + keys.join(<span class=\"string\">','</span>) + <span class=\"string\">') VALUES ('</span> + values.join(<span class=\"string\">','</span>) + <span class=\"string\">')'</span>, cb)</span><br><span class=\"line\">    &#125;, cb)</span><br><span class=\"line\">  &#125;, done)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">exports.drop = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">tables, done</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> pool = state.pool</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (!pool) <span class=\"keyword\">return</span> done(<span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">'Missing database connection.'</span>))</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">async</span>.each(tables, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">name, cb</span>) </span>&#123;</span><br><span class=\"line\">    pool.query(<span class=\"string\">'DELETE * FROM '</span> + name, cb)</span><br><span class=\"line\">  &#125;, done)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>这里有三处和之前的不一样。</p>\n<ol>\n<li>当连接在连接方法在测试模式下,做你之前所做的。然而,当你在生产模式下,添加3个更多的servers。每一个server都有一个名字，第一个是<code>WRITE</code>，另外两个是<code>READ1</code>和<code>READ2</code>。应该很清楚每一个的目的是什么。<code>READ1</code>和<code>READ2</code>是<code>WRITE</code>的奴隶,所以每次有人写数据到<code>WRITE</code>,然后很快地对<code>READ1</code>和<code>READ2</code>可用。</li>\n<li>第二处变化是<code>get</code>方法。之前，它会立即返回一个连接。现在，它返回一个连接到回调函数作为第二个参数提供。</li>\n<li>最后一处变化还是在<code>get</code>方法。在你连接数据库的时候，你需要告诉连接的类型 <strong>READ</strong> 和 <strong>WRITE</strong>。然后根据名称设置为服务器将提供正确的类型的连接。在这种情况下你可以看到<code>getConnection</code>提供一种模式系统,这样您就可以选择适当的数据库</li>\n</ol>\n<p>然后让我们看一个使用 <strong>db.js</strong> 的实例：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> db = <span class=\"built_in\">require</span>(<span class=\"string\">'../db.js'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">exports.create = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">userId, text, done</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> values = [userId, text, <span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>().toISOString()]</span><br><span class=\"line\"></span><br><span class=\"line\">  db.get(db.WRITE, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">err, connection</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (err) <span class=\"keyword\">return</span> done(<span class=\"string\">'Database problem'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    connection.query(<span class=\"string\">'INSERT INTO comments (user_id, text, date) VALUES(?, ?, ?)'</span>, values, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">err, result</span>) </span>&#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (err) <span class=\"keyword\">return</span> done(err)</span><br><span class=\"line\">      done(<span class=\"literal\">null</span>, result.insertId)</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">exports.getAll = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">done</span>) </span>&#123;</span><br><span class=\"line\">  db.get(db.READ, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">err, connection</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (err) <span class=\"keyword\">return</span> done(<span class=\"string\">'Database problem'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    connection.query(<span class=\"string\">'SELECT * FROM comments'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">err, rows</span>) </span>&#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (err) <span class=\"keyword\">return</span> done(err)</span><br><span class=\"line\">      done(<span class=\"literal\">null</span>, rows)</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">exports.getAllByUser = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">userId, done</span>) </span>&#123;</span><br><span class=\"line\">  db.get(db.READ, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">err, connection</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (err) <span class=\"keyword\">return</span> done(<span class=\"string\">'Database problem'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    connection.query(<span class=\"string\">'SELECT * FROM comments WHERE user_id = ?'</span>, userId, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">err, rows</span>) </span>&#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (err) <span class=\"keyword\">return</span> done(err)</span><br><span class=\"line\">      done(<span class=\"literal\">null</span>, rows)</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>你也可以创建一个代理连接对象,基于可以查询了解这是一个写或读,然后选择适当的连接。这样你甚至不会改变你的模块。</p>\n<h2 id=\"最后\"><a href=\"#最后\" class=\"headerlink\" title=\"最后\"></a>最后</h2><p>本文翻译了<a href=\"https://www.terlici.com/2015/08/13/mysql-node-express.html\" target=\"_blank\" rel=\"external\">https://www.terlici.com/2015/08/13/mysql-node-express.html</a>的大部分，如果有错误，可以留言。</p>\n","excerpt":"<h2 id=\"连接到mysql数据库\"><a href=\"#连接到mysql数据库\" class=\"headerlink\" title=\"连接到mysql数据库\"></a>连接到mysql数据库</h2><p>在这之前先安装正确的npm包：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install mysql</span><br></pre></td></tr></table></figure></p>\n<p><strong>mysql</strong> 是一个非常容易使用的模块，它提供了你可能需要的所有功能。安装好后，你需要连接数据库的方法是：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> mysql = <span class=\"built_in\">require</span>(<span class=\"string\">'mysql'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> connection = mysql.createConnection(&#123;</span><br><span class=\"line\">  host: <span class=\"string\">'localhost'</span>,</span><br><span class=\"line\">  user: <span class=\"string\">'your_user'</span>,</span><br><span class=\"line\">  password: <span class=\"string\">'some_secret'</span>,</span><br><span class=\"line\">  database: <span class=\"string\">'database'</span></span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">connection.connect(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">err</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (err) <span class=\"keyword\">throw</span> err</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'You are now connected...'</span>)</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure></p>","more":"<p>现在，你可以读写你的数据库了。</p>\n<h2 id=\"读写mysql数据库\"><a href=\"#读写mysql数据库\" class=\"headerlink\" title=\"读写mysql数据库\"></a>读写mysql数据库</h2><p>你已经知道如何去连接你的数据库了，现在让我们看一个简单的例子：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> mysql = <span class=\"built_in\">require</span>(<span class=\"string\">'mysql'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> connection = mysql.createConnection(&#123;</span><br><span class=\"line\">  host: <span class=\"string\">'localhost'</span>,</span><br><span class=\"line\">  user: <span class=\"string\">'your_user'</span>,</span><br><span class=\"line\">  password: <span class=\"string\">'some_secret'</span>,</span><br><span class=\"line\">  database: <span class=\"string\">'database'</span></span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">connection.connect(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">err</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (err) <span class=\"keyword\">throw</span> err</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'You are now connected...'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">  connection.query(<span class=\"string\">'CREATE TABLE people(id int primary key, name varchar(255), age int, address text)'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">err, result</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (err) <span class=\"keyword\">throw</span> err</span><br><span class=\"line\">    connection.query(<span class=\"string\">'INSERT INTO people (name, age, address) VALUES (?, ?, ?)'</span>, [<span class=\"string\">'Larry'</span>, <span class=\"string\">'41'</span>, <span class=\"string\">'California, USA'</span>], <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">err, result</span>) </span>&#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (err) <span class=\"keyword\">throw</span> err</span><br><span class=\"line\">      connection.query(<span class=\"string\">'SELECT * FROM people'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">err, results</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (err) <span class=\"keyword\">throw</span> err</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(results[<span class=\"number\">0</span>].id)</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(results[<span class=\"number\">0</span>].name)</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(results[<span class=\"number\">0</span>].age)</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(results[<span class=\"number\">0</span>].address)</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure></p>\n<p>你能够看到在上面的占位符<code>?</code>，它不仅仅使使用起来更容易，而且也是安全的。</p>\n<h2 id=\"更换你的-db-js-文件\"><a href=\"#更换你的-db-js-文件\" class=\"headerlink\" title=\"更换你的 db.js 文件\"></a>更换你的 <em>db.js</em> 文件</h2><p>虽然你看到的mysql模块非常容易，但是真实的应用有着更加复杂的需求。这就是为什么在<a href=\"https://www.terlici.com/2015/04/03/mongodb-node-express.html\">Connecting and Working with MongoDB</a>中，我们创建一个分开的文件db.js来帮助我们管理我们的连接。<br>它的作用是无论何时我们不用经常键入凭证来很容易地连接数据库。它的第二个目标就是很容易运行测试。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> mysql = <span class=\"built_in\">require</span>(<span class=\"string\">'mysql'</span>)</span><br><span class=\"line\">  , <span class=\"keyword\">async</span> = <span class=\"built_in\">require</span>(<span class=\"string\">'async'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> PRODUCTION_DB = <span class=\"string\">'app_prod_database'</span></span><br><span class=\"line\">  , TEST_DB = <span class=\"string\">'app_test_database'</span></span><br><span class=\"line\"></span><br><span class=\"line\">exports.MODE_TEST = <span class=\"string\">'mode_test'</span></span><br><span class=\"line\">exports.MODE_PRODUCTION = <span class=\"string\">'mode_production'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> state = &#123;</span><br><span class=\"line\">  pool: <span class=\"literal\">null</span>,</span><br><span class=\"line\">  mode: <span class=\"literal\">null</span>,</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">exports.connect = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">mode, done</span>) </span>&#123;</span><br><span class=\"line\">  state.pool = mysql.createPool(&#123;</span><br><span class=\"line\">    host: <span class=\"string\">'localhost'</span>,</span><br><span class=\"line\">    user: <span class=\"string\">'your_user'</span>,</span><br><span class=\"line\">    password: <span class=\"string\">'some_secret'</span>,</span><br><span class=\"line\">    database: mode === exports.MODE_PRODUCTION ? PRODUCTION_DB : TEST_DB</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">  state.mode = mode</span><br><span class=\"line\">  done()</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">exports.get = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> state.pool</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">exports.fixtures = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">data</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> pool = state.pool</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (!pool) <span class=\"keyword\">return</span> done(<span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">'Missing database connection.'</span>))</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">var</span> names = <span class=\"built_in\">Object</span>.keys(data.tables)</span><br><span class=\"line\">  <span class=\"keyword\">async</span>.each(names, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">name, cb</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">async</span>.each(data.tables[name], <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">row, cb</span>) </span>&#123;</span><br><span class=\"line\">      <span class=\"keyword\">var</span> keys = <span class=\"built_in\">Object</span>.keys(row)</span><br><span class=\"line\">        , values = keys.map(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">key</span>) </span>&#123; <span class=\"keyword\">return</span> <span class=\"string\">\"'\"</span> + row[key] + <span class=\"string\">\"'\"</span> &#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">      pool.query(<span class=\"string\">'INSERT INTO '</span> + name + <span class=\"string\">' ('</span> + keys.join(<span class=\"string\">','</span>) + <span class=\"string\">') VALUES ('</span> + values.join(<span class=\"string\">','</span>) + <span class=\"string\">')'</span>, cb)</span><br><span class=\"line\">    &#125;, cb)</span><br><span class=\"line\">  &#125;, done)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">exports.drop = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">tables, done</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> pool = state.pool</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (!pool) <span class=\"keyword\">return</span> done(<span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">'Missing database connection.'</span>))</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">async</span>.each(tables, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">name, cb</span>) </span>&#123;</span><br><span class=\"line\">    pool.query(<span class=\"string\">'DELETE * FROM '</span> + name, cb)</span><br><span class=\"line\">  &#125;, done)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>这个db.js有点儿比我们之前的要复杂的多。</p>\n<p>首先，它提供一种方法去连接数据库。在生产模块和测试模块都能<br>去连接。测试模块仅在自动化测试时运行。</p>\n<p>然后，有一个<code>get</code>方法能够一直提供给你有效的连接，也可以用来查询数据库。而且，你可以去设置密码，其他模块也可以调用这个方法。</p>\n<p>最后，有两个方法<code>fixtures</code>和<code>drop</code>，很容易地去退出测试。</p>\n<p><strong>drop</strong> 清空数据，它将会帮助你的测试数据库在测试之前总是空的。</p>\n<p><strong>fixtures</strong> 使用json对象，加载数据库中的数据，看一个例子：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> data = &#123;</span><br><span class=\"line\">  tables: &#123;</span><br><span class=\"line\">    people: [</span><br><span class=\"line\">     &#123;id: <span class=\"number\">1</span>, name: <span class=\"string\">\"John\"</span>, age: <span class=\"number\">32</span>&#125;,</span><br><span class=\"line\">     &#123;id: <span class=\"number\">2</span>, name: <span class=\"string\">\"Peter\"</span>, age: <span class=\"number\">29</span>&#125;,</span><br><span class=\"line\">    ],</span><br><span class=\"line\">    cars: [</span><br><span class=\"line\">      &#123;id: <span class=\"number\">1</span>, brand: <span class=\"string\">\"Jeep\"</span>, model: <span class=\"string\">\"Cherokee\"</span>, owner_id: <span class=\"number\">2</span>&#125;,</span><br><span class=\"line\">      &#123;id: <span class=\"number\">2</span>, brand: <span class=\"string\">\"BMW\"</span>, model: <span class=\"string\">\"X5\"</span>, owner_id: <span class=\"number\">2</span>&#125;,</span><br><span class=\"line\">      &#123;id: <span class=\"number\">3</span>, brand: <span class=\"string\">\"Volkswagen\"</span>, model: <span class=\"string\">\"Polo\"</span>, owner_id: <span class=\"number\">1</span>&#125;,</span><br><span class=\"line\">    ],</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> db = <span class=\"built_in\">require</span>(<span class=\"string\">'./db'</span>)</span><br><span class=\"line\">db.connect(db.MODE_PRODUCTION, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  db.fixtures(data, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">err</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (err) <span class=\"keyword\">return</span> <span class=\"built_in\">console</span>.log(err)</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'Data has been loaded...'</span>)</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure></p>\n<h2 id=\"使用SQL搭建模块\"><a href=\"#使用SQL搭建模块\" class=\"headerlink\" title=\"使用SQL搭建模块\"></a>使用SQL搭建模块</h2><p>所有事情准备好了，接下来看看如何在你的应用中使用db.js。来看一个例子：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">controllers/</span><br><span class=\"line\">  comments.js</span><br><span class=\"line\">  users.js</span><br><span class=\"line\">models/</span><br><span class=\"line\">  comment.js</span><br><span class=\"line\">  user.js</span><br><span class=\"line\">views/</span><br><span class=\"line\">app.js</span><br><span class=\"line\">db.js</span><br><span class=\"line\">package.json</span><br></pre></td></tr></table></figure></p>\n<p><strong>app.js</strong> 是应用的入口，也是我们将要设置数据库连接的地方。来看一个例子：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> db = <span class=\"built_in\">require</span>(<span class=\"string\">'./db'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">app.use(<span class=\"string\">'/comments'</span>, <span class=\"built_in\">require</span>(<span class=\"string\">'./controllers/comments'</span>))</span><br><span class=\"line\">app.use(<span class=\"string\">'/users'</span>, <span class=\"built_in\">require</span>(<span class=\"string\">'./controllers/users'</span>))</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Connect to MySQL on start</span></span><br><span class=\"line\">db.connect(db.MODE_PRODUCTION, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">err</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (err) &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'Unable to connect to MySQL.'</span>)</span><br><span class=\"line\">    process.exit(<span class=\"number\">1</span>)</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    app.listen(<span class=\"number\">3000</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"string\">'Listening on port 3000...'</span>)</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure></p>\n<p>你的应用将会通过这个模块来与数据库交互。来看一个例子：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> db = <span class=\"built_in\">require</span>(<span class=\"string\">'../db.js'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">exports.create = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">userId, text, done</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> values = [userId, text, <span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>().toISOString()]</span><br><span class=\"line\"></span><br><span class=\"line\">  db.get().query(<span class=\"string\">'INSERT INTO comments (user_id, text, date) VALUES(?, ?, ?)'</span>, values, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">err, result</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (err) <span class=\"keyword\">return</span> done(err)</span><br><span class=\"line\">    done(<span class=\"literal\">null</span>, result.insertId)</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">exports.getAll = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">done</span>) </span>&#123;</span><br><span class=\"line\">  db.get().query(<span class=\"string\">'SELECT * FROM comments'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">err, rows</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (err) <span class=\"keyword\">return</span> done(err)</span><br><span class=\"line\">    done(<span class=\"literal\">null</span>, rows)</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">exports.getAllByUser = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">userId, done</span>) </span>&#123;</span><br><span class=\"line\">  db.get().query(<span class=\"string\">'SELECT * FROM comments WHERE user_id = ?'</span>, userId, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">err, rows</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (err) <span class=\"keyword\">return</span> done(err)</span><br><span class=\"line\">    done(<span class=\"literal\">null</span>, rows)</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>正如你看到的db.js是你完全不用带薪连接数据库的问题，甚至不用只用是否是生产环境还是测试环境。</p>\n<h2 id=\"为读和写使用不一样的实例\"><a href=\"#为读和写使用不一样的实例\" class=\"headerlink\" title=\"为读和写使用不一样的实例\"></a>为读和写使用不一样的实例</h2><p>随着你的应用需求的增长，今天，很多应用都是面向读的。这就意味着，人们读数据少于写数据。例如，所有这一类应用的社交网站，通常你的状态只被读一次，但是然后被成千上万的人去读。在这种情况下是通常有一个主要的数据库将接受所有的写,然后同步到一些MySQL实例将只读取请求。当你有更多的用户可以很容易地添加更多数据库去读，你的应用将仍然是非常快的。</p>\n<p>但是，如何在我们的初始化中解决这个问题呢？mysql模块 <strong>PoolCluster</strong> 特性非常有用,它可以配置几个实例,然后连接到所有的人。看一个db.js中的例子：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> mysql = <span class=\"built_in\">require</span>(<span class=\"string\">'mysql'</span>)</span><br><span class=\"line\">  , <span class=\"keyword\">async</span> = <span class=\"built_in\">require</span>(<span class=\"string\">'async'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> PRODUCTION_DB = <span class=\"string\">'app_prod_database'</span></span><br><span class=\"line\">  , TEST_DB = <span class=\"string\">'app_test_database'</span></span><br><span class=\"line\"></span><br><span class=\"line\">exports.MODE_TEST = <span class=\"string\">'mode_test'</span></span><br><span class=\"line\">exports.MODE_PRODUCTION = <span class=\"string\">'mode_production'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> state = &#123;</span><br><span class=\"line\">  pool: <span class=\"literal\">null</span>,</span><br><span class=\"line\">  mode: <span class=\"literal\">null</span>,</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">exports.connect = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">mode, done</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (mode === exports.MODE_PRODUCTION) &#123;</span><br><span class=\"line\">    state.pool = mysql.createPoolCluster()</span><br><span class=\"line\"></span><br><span class=\"line\">    state.pool.add(<span class=\"string\">'WRITE'</span>, &#123;</span><br><span class=\"line\">      host: <span class=\"string\">'192.168.0.5'</span>,</span><br><span class=\"line\">      user: <span class=\"string\">'your_user'</span>,</span><br><span class=\"line\">      password: <span class=\"string\">'some_secret'</span>,</span><br><span class=\"line\">      database: PRODUCTION_DB</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">    state.pool.add(<span class=\"string\">'READ1'</span>, &#123;</span><br><span class=\"line\">      host: <span class=\"string\">'192.168.0.6'</span>,</span><br><span class=\"line\">      user: <span class=\"string\">'your_user'</span>,</span><br><span class=\"line\">      password: <span class=\"string\">'some_secret'</span>,</span><br><span class=\"line\">      database: PRODUCTION_DB</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">    state.pool.add(<span class=\"string\">'READ2'</span>, &#123;</span><br><span class=\"line\">      host: <span class=\"string\">'192.168.0.7'</span>,</span><br><span class=\"line\">      user: <span class=\"string\">'your_user'</span>,</span><br><span class=\"line\">      password: <span class=\"string\">'some_secret'</span>,</span><br><span class=\"line\">      database: PRODUCTION_DB</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    state.pool = mysql.createPool(&#123;</span><br><span class=\"line\">      host: <span class=\"string\">'localhost'</span>,</span><br><span class=\"line\">      user: <span class=\"string\">'your_user'</span>,</span><br><span class=\"line\">      password: <span class=\"string\">'some_secret'</span>,</span><br><span class=\"line\">      database: TEST_DB</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  state.mode = mode</span><br><span class=\"line\">  done()</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">exports.READ = <span class=\"string\">'read'</span></span><br><span class=\"line\">exports.WRITE = <span class=\"string\">'write'</span></span><br><span class=\"line\"></span><br><span class=\"line\">exports.get = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">type, done</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> pool = state.pool</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (!pool) <span class=\"keyword\">return</span> done(<span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">'Missing database connection.'</span>))</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (type === exports.WRITE) &#123;</span><br><span class=\"line\">    state.pool.getConnection(<span class=\"string\">'WRITE'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">err, connection</span>) </span>&#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (err) <span class=\"keyword\">return</span> done(err)</span><br><span class=\"line\">      done(<span class=\"literal\">null</span>, connection)</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    state.pool.getConnection(<span class=\"string\">'READ*'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">err, connection</span>) </span>&#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (err) <span class=\"keyword\">return</span> done(err)</span><br><span class=\"line\">      done(<span class=\"literal\">null</span>, connection)</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">exports.fixtures = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">data</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> pool = state.pool</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (!pool) <span class=\"keyword\">return</span> done(<span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">'Missing database connection.'</span>))</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">var</span> names = <span class=\"built_in\">Object</span>.keys(data.tables)</span><br><span class=\"line\">  <span class=\"keyword\">async</span>.each(names, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">name, cb</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">async</span>.each(data.tables[name], <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">row, cb</span>) </span>&#123;</span><br><span class=\"line\">      <span class=\"keyword\">var</span> keys = <span class=\"built_in\">Object</span>.keys(row)</span><br><span class=\"line\">        , values = keys.map(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">key</span>) </span>&#123; <span class=\"keyword\">return</span> <span class=\"string\">\"'\"</span> + row[key] + <span class=\"string\">\"'\"</span> &#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">      pool.query(<span class=\"string\">'INSERT INTO '</span> + name + <span class=\"string\">' ('</span> + keys.join(<span class=\"string\">','</span>) + <span class=\"string\">') VALUES ('</span> + values.join(<span class=\"string\">','</span>) + <span class=\"string\">')'</span>, cb)</span><br><span class=\"line\">    &#125;, cb)</span><br><span class=\"line\">  &#125;, done)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">exports.drop = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">tables, done</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> pool = state.pool</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (!pool) <span class=\"keyword\">return</span> done(<span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">'Missing database connection.'</span>))</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">async</span>.each(tables, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">name, cb</span>) </span>&#123;</span><br><span class=\"line\">    pool.query(<span class=\"string\">'DELETE * FROM '</span> + name, cb)</span><br><span class=\"line\">  &#125;, done)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>这里有三处和之前的不一样。</p>\n<ol>\n<li>当连接在连接方法在测试模式下,做你之前所做的。然而,当你在生产模式下,添加3个更多的servers。每一个server都有一个名字，第一个是<code>WRITE</code>，另外两个是<code>READ1</code>和<code>READ2</code>。应该很清楚每一个的目的是什么。<code>READ1</code>和<code>READ2</code>是<code>WRITE</code>的奴隶,所以每次有人写数据到<code>WRITE</code>,然后很快地对<code>READ1</code>和<code>READ2</code>可用。</li>\n<li>第二处变化是<code>get</code>方法。之前，它会立即返回一个连接。现在，它返回一个连接到回调函数作为第二个参数提供。</li>\n<li>最后一处变化还是在<code>get</code>方法。在你连接数据库的时候，你需要告诉连接的类型 <strong>READ</strong> 和 <strong>WRITE</strong>。然后根据名称设置为服务器将提供正确的类型的连接。在这种情况下你可以看到<code>getConnection</code>提供一种模式系统,这样您就可以选择适当的数据库</li>\n</ol>\n<p>然后让我们看一个使用 <strong>db.js</strong> 的实例：<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> db = <span class=\"built_in\">require</span>(<span class=\"string\">'../db.js'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">exports.create = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">userId, text, done</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> values = [userId, text, <span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>().toISOString()]</span><br><span class=\"line\"></span><br><span class=\"line\">  db.get(db.WRITE, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">err, connection</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (err) <span class=\"keyword\">return</span> done(<span class=\"string\">'Database problem'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    connection.query(<span class=\"string\">'INSERT INTO comments (user_id, text, date) VALUES(?, ?, ?)'</span>, values, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">err, result</span>) </span>&#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (err) <span class=\"keyword\">return</span> done(err)</span><br><span class=\"line\">      done(<span class=\"literal\">null</span>, result.insertId)</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">exports.getAll = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">done</span>) </span>&#123;</span><br><span class=\"line\">  db.get(db.READ, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">err, connection</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (err) <span class=\"keyword\">return</span> done(<span class=\"string\">'Database problem'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    connection.query(<span class=\"string\">'SELECT * FROM comments'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">err, rows</span>) </span>&#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (err) <span class=\"keyword\">return</span> done(err)</span><br><span class=\"line\">      done(<span class=\"literal\">null</span>, rows)</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">exports.getAllByUser = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">userId, done</span>) </span>&#123;</span><br><span class=\"line\">  db.get(db.READ, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">err, connection</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (err) <span class=\"keyword\">return</span> done(<span class=\"string\">'Database problem'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    connection.query(<span class=\"string\">'SELECT * FROM comments WHERE user_id = ?'</span>, userId, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">err, rows</span>) </span>&#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (err) <span class=\"keyword\">return</span> done(err)</span><br><span class=\"line\">      done(<span class=\"literal\">null</span>, rows)</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>你也可以创建一个代理连接对象,基于可以查询了解这是一个写或读,然后选择适当的连接。这样你甚至不会改变你的模块。</p>\n<h2 id=\"最后\"><a href=\"#最后\" class=\"headerlink\" title=\"最后\"></a>最后</h2><p>本文翻译了<a href=\"https://www.terlici.com/2015/08/13/mysql-node-express.html\">https://www.terlici.com/2015/08/13/mysql-node-express.html</a>的大部分，如果有错误，可以留言。</p>"},{"title":"获取软键盘高度和生成9-patchh","date":"2016-08-24T15:30:49.000Z","comments":1,"_content":"\n最近在做一个类似聊天的功能，所以需要获取到软键盘的高度来控制界面的显示，同时有一些手机上面有虚拟按键，在界面布局的时候需要注意。下面的代码就是一段获取手机软键盘高度的办法。\n<!-- more -->\n```java\n\tRect r = new Rect();\n\tgetWindow().getDecorView().getWindowVisibleDisplayFrame(r);\n\tDisplayMetrics metrics = new DisplayMetrics();\n\tgetWindowManager().getDefaultDisplay().getMetrics(metrics);\n\t//屏幕的高度，不包含虚拟按键\n\tint screenHeight = metrics.heightPixels;\n\t//屏幕真实的高度，包含虚拟按键\n\tgetWindowManager().getDefaultDisplay().getRealMetrics(metrics);\n\t//虚拟按键的高度\n\tint virtualHight = metrics.heightPixels - screenHeight;\n\tint statusBarHeight=getStatusBarHeight(context);\n\t// 在不显示软键盘时，heightDiff等于状态栏的高度\n\t// 在显示软键盘时，heightDiff会变大，等于软键盘加状态栏的高度。\n\t// 所以heightDiff大于状态栏高度时表示软键盘出现了，\n\t// 这时可算出软键盘的高度，即heightDiff减去状态栏的高度\n\tif (heightDiff > statusBarHeight) {\n\t\tkeyboardHeight = heightDiff - statusBarHeight;\n\t}\n\n\tif (isShowKeyboard) {\n\t\t// 如果软键盘是弹出的状态，并且heightDiff小于等于状态栏高度，\n\t\tif (heightDiff <= statusBarHeight) {\n\t\t\t// 说明这时软键盘已经收起\n\t\t\tisShowKeyboard=false;\n\t\t}\n\t} else {\n        // 如果软键盘是收起的状态，并且heightDiff大于状态栏高度，\n        if (heightDiff > statusBarHeight) {\n         // 说明这时软键盘已经弹出\n         isShowKeyboard=true;\n\t\t}\n\t}\n```\n下面是获取手机状态栏高度的办法\n```java\n\t// 获取手机状态栏高度\n    public static int getStatusBarHeight(Context context) {\n        Class<?> c = null;\n        Object obj = null;\n        Field field = null;\n        int x = 0, statusBarHeight = 0;\n        try {\n            c = Class.forName(\"com.android.internal.R$dimen\");\n            obj = c.newInstance();\n            field = c.getField(\"status_bar_height\");\n            x=Integer.parseInt(field.get(obj).toString());\n            statusBarHeight = context.getResources().getDimensionPixelSize(x);\n        } catch (Exception e1) {\n            e1.printStackTrace();\n        }\n        return statusBarHeight;\n    }\n```\n对于聊天框，一开始想的是自定义控件的办法，后来在网上找到了**9-patch**，可以自动拉伸图片，需要用到的是**.png**的图片，可以找美工切好图，在Android studio上，右键选择图片，可以自动生成**xx.9.png**的文件，如下图：\n![xx.9.png](http://img.blog.csdn.net/20160824174835941)\n\n在```sdk\\tools\\``` 下面有**draw9patch** 命令，直接打开拉入图片也能生成**9-Patch**，如下图：\n![draw9patch](http://img.blog.csdn.net/20160824204210485)\n\n下面就是最终效果了，需要注意的是，生成的**xx.9.png**文件需保存在 **drawable**的目录下面，然后就可以直接调用了。\n在工具上，有边线可以直接拖动，多试验几次找到最合适自己的，如图所示黑色阴影是要显示的区域的边距，两条绿色区域的交叉处就是最后会被拉伸的地方，右边就是最后被拉伸的效果图。\n![效果](http://img.blog.csdn.net/20160824174900410)\n","source":"_posts/soft-keyboard-and-9-patch.md","raw":"---\ntitle: 获取软键盘高度和生成9-patchh\ndate: 2016-08-24 23:30:49\ntags: Android\ncomments: true\n---\n\n最近在做一个类似聊天的功能，所以需要获取到软键盘的高度来控制界面的显示，同时有一些手机上面有虚拟按键，在界面布局的时候需要注意。下面的代码就是一段获取手机软键盘高度的办法。\n<!-- more -->\n```java\n\tRect r = new Rect();\n\tgetWindow().getDecorView().getWindowVisibleDisplayFrame(r);\n\tDisplayMetrics metrics = new DisplayMetrics();\n\tgetWindowManager().getDefaultDisplay().getMetrics(metrics);\n\t//屏幕的高度，不包含虚拟按键\n\tint screenHeight = metrics.heightPixels;\n\t//屏幕真实的高度，包含虚拟按键\n\tgetWindowManager().getDefaultDisplay().getRealMetrics(metrics);\n\t//虚拟按键的高度\n\tint virtualHight = metrics.heightPixels - screenHeight;\n\tint statusBarHeight=getStatusBarHeight(context);\n\t// 在不显示软键盘时，heightDiff等于状态栏的高度\n\t// 在显示软键盘时，heightDiff会变大，等于软键盘加状态栏的高度。\n\t// 所以heightDiff大于状态栏高度时表示软键盘出现了，\n\t// 这时可算出软键盘的高度，即heightDiff减去状态栏的高度\n\tif (heightDiff > statusBarHeight) {\n\t\tkeyboardHeight = heightDiff - statusBarHeight;\n\t}\n\n\tif (isShowKeyboard) {\n\t\t// 如果软键盘是弹出的状态，并且heightDiff小于等于状态栏高度，\n\t\tif (heightDiff <= statusBarHeight) {\n\t\t\t// 说明这时软键盘已经收起\n\t\t\tisShowKeyboard=false;\n\t\t}\n\t} else {\n        // 如果软键盘是收起的状态，并且heightDiff大于状态栏高度，\n        if (heightDiff > statusBarHeight) {\n         // 说明这时软键盘已经弹出\n         isShowKeyboard=true;\n\t\t}\n\t}\n```\n下面是获取手机状态栏高度的办法\n```java\n\t// 获取手机状态栏高度\n    public static int getStatusBarHeight(Context context) {\n        Class<?> c = null;\n        Object obj = null;\n        Field field = null;\n        int x = 0, statusBarHeight = 0;\n        try {\n            c = Class.forName(\"com.android.internal.R$dimen\");\n            obj = c.newInstance();\n            field = c.getField(\"status_bar_height\");\n            x=Integer.parseInt(field.get(obj).toString());\n            statusBarHeight = context.getResources().getDimensionPixelSize(x);\n        } catch (Exception e1) {\n            e1.printStackTrace();\n        }\n        return statusBarHeight;\n    }\n```\n对于聊天框，一开始想的是自定义控件的办法，后来在网上找到了**9-patch**，可以自动拉伸图片，需要用到的是**.png**的图片，可以找美工切好图，在Android studio上，右键选择图片，可以自动生成**xx.9.png**的文件，如下图：\n![xx.9.png](http://img.blog.csdn.net/20160824174835941)\n\n在```sdk\\tools\\``` 下面有**draw9patch** 命令，直接打开拉入图片也能生成**9-Patch**，如下图：\n![draw9patch](http://img.blog.csdn.net/20160824204210485)\n\n下面就是最终效果了，需要注意的是，生成的**xx.9.png**文件需保存在 **drawable**的目录下面，然后就可以直接调用了。\n在工具上，有边线可以直接拖动，多试验几次找到最合适自己的，如图所示黑色阴影是要显示的区域的边距，两条绿色区域的交叉处就是最后会被拉伸的地方，右边就是最后被拉伸的效果图。\n![效果](http://img.blog.csdn.net/20160824174900410)\n","slug":"soft-keyboard-and-9-patch","published":1,"updated":"2016-08-24T15:41:35.873Z","layout":"post","photos":[],"link":"","_id":"cis92vebi000mh8dqkqyxy3qv","content":"<p>最近在做一个类似聊天的功能，所以需要获取到软键盘的高度来控制界面的显示，同时有一些手机上面有虚拟按键，在界面布局的时候需要注意。下面的代码就是一段获取手机软键盘高度的办法。<br><a id=\"more\"></a><br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Rect r = <span class=\"keyword\">new</span> Rect();</span><br><span class=\"line\">getWindow().getDecorView().getWindowVisibleDisplayFrame(r);</span><br><span class=\"line\">DisplayMetrics metrics = <span class=\"keyword\">new</span> DisplayMetrics();</span><br><span class=\"line\">getWindowManager().getDefaultDisplay().getMetrics(metrics);</span><br><span class=\"line\"><span class=\"comment\">//屏幕的高度，不包含虚拟按键</span></span><br><span class=\"line\"><span class=\"keyword\">int</span> screenHeight = metrics.heightPixels;</span><br><span class=\"line\"><span class=\"comment\">//屏幕真实的高度，包含虚拟按键</span></span><br><span class=\"line\">getWindowManager().getDefaultDisplay().getRealMetrics(metrics);</span><br><span class=\"line\"><span class=\"comment\">//虚拟按键的高度</span></span><br><span class=\"line\"><span class=\"keyword\">int</span> virtualHight = metrics.heightPixels - screenHeight;</span><br><span class=\"line\"><span class=\"keyword\">int</span> statusBarHeight=getStatusBarHeight(context);</span><br><span class=\"line\"><span class=\"comment\">// 在不显示软键盘时，heightDiff等于状态栏的高度</span></span><br><span class=\"line\"><span class=\"comment\">// 在显示软键盘时，heightDiff会变大，等于软键盘加状态栏的高度。</span></span><br><span class=\"line\"><span class=\"comment\">// 所以heightDiff大于状态栏高度时表示软键盘出现了，</span></span><br><span class=\"line\"><span class=\"comment\">// 这时可算出软键盘的高度，即heightDiff减去状态栏的高度</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> (heightDiff &gt; statusBarHeight) &#123;</span><br><span class=\"line\">\tkeyboardHeight = heightDiff - statusBarHeight;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> (isShowKeyboard) &#123;</span><br><span class=\"line\">\t<span class=\"comment\">// 如果软键盘是弹出的状态，并且heightDiff小于等于状态栏高度，</span></span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (heightDiff &lt;= statusBarHeight) &#123;</span><br><span class=\"line\">\t\t<span class=\"comment\">// 说明这时软键盘已经收起</span></span><br><span class=\"line\">\t\tisShowKeyboard=<span class=\"keyword\">false</span>;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">       <span class=\"comment\">// 如果软键盘是收起的状态，并且heightDiff大于状态栏高度，</span></span><br><span class=\"line\">       <span class=\"keyword\">if</span> (heightDiff &gt; statusBarHeight) &#123;</span><br><span class=\"line\">        <span class=\"comment\">// 说明这时软键盘已经弹出</span></span><br><span class=\"line\">        isShowKeyboard=<span class=\"keyword\">true</span>;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>下面是获取手机状态栏高度的办法<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 获取手机状态栏高度</span></span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">int</span> <span class=\"title\">getStatusBarHeight</span><span class=\"params\">(Context context)</span> </span>&#123;</span><br><span class=\"line\">       Class&lt;?&gt; c = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">       Object obj = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">       Field field = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">       <span class=\"keyword\">int</span> x = <span class=\"number\">0</span>, statusBarHeight = <span class=\"number\">0</span>;</span><br><span class=\"line\">       <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">           c = Class.forName(<span class=\"string\">\"com.android.internal.R$dimen\"</span>);</span><br><span class=\"line\">           obj = c.newInstance();</span><br><span class=\"line\">           field = c.getField(<span class=\"string\">\"status_bar_height\"</span>);</span><br><span class=\"line\">           x=Integer.parseInt(field.get(obj).toString());</span><br><span class=\"line\">           statusBarHeight = context.getResources().getDimensionPixelSize(x);</span><br><span class=\"line\">       &#125; <span class=\"keyword\">catch</span> (Exception e1) &#123;</span><br><span class=\"line\">           e1.printStackTrace();</span><br><span class=\"line\">       &#125;</span><br><span class=\"line\">       <span class=\"keyword\">return</span> statusBarHeight;</span><br><span class=\"line\">   &#125;</span><br></pre></td></tr></table></figure></p>\n<p>对于聊天框，一开始想的是自定义控件的办法，后来在网上找到了<strong>9-patch</strong>，可以自动拉伸图片，需要用到的是<strong>.png</strong>的图片，可以找美工切好图，在Android studio上，右键选择图片，可以自动生成<strong>xx.9.png</strong>的文件，如下图：<br><img src=\"http://img.blog.csdn.net/20160824174835941\" alt=\"xx.9.png\"></p>\n<p>在<code>sdk\\tools\\</code> 下面有<strong>draw9patch</strong> 命令，直接打开拉入图片也能生成<strong>9-Patch</strong>，如下图：<br><img src=\"http://img.blog.csdn.net/20160824204210485\" alt=\"draw9patch\"></p>\n<p>下面就是最终效果了，需要注意的是，生成的<strong>xx.9.png</strong>文件需保存在 <strong>drawable</strong>的目录下面，然后就可以直接调用了。<br>在工具上，有边线可以直接拖动，多试验几次找到最合适自己的，如图所示黑色阴影是要显示的区域的边距，两条绿色区域的交叉处就是最后会被拉伸的地方，右边就是最后被拉伸的效果图。<br><img src=\"http://img.blog.csdn.net/20160824174900410\" alt=\"效果\"></p>\n","excerpt":"<p>最近在做一个类似聊天的功能，所以需要获取到软键盘的高度来控制界面的显示，同时有一些手机上面有虚拟按键，在界面布局的时候需要注意。下面的代码就是一段获取手机软键盘高度的办法。<br>","more":"<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Rect r = <span class=\"keyword\">new</span> Rect();</span><br><span class=\"line\">getWindow().getDecorView().getWindowVisibleDisplayFrame(r);</span><br><span class=\"line\">DisplayMetrics metrics = <span class=\"keyword\">new</span> DisplayMetrics();</span><br><span class=\"line\">getWindowManager().getDefaultDisplay().getMetrics(metrics);</span><br><span class=\"line\"><span class=\"comment\">//屏幕的高度，不包含虚拟按键</span></span><br><span class=\"line\"><span class=\"keyword\">int</span> screenHeight = metrics.heightPixels;</span><br><span class=\"line\"><span class=\"comment\">//屏幕真实的高度，包含虚拟按键</span></span><br><span class=\"line\">getWindowManager().getDefaultDisplay().getRealMetrics(metrics);</span><br><span class=\"line\"><span class=\"comment\">//虚拟按键的高度</span></span><br><span class=\"line\"><span class=\"keyword\">int</span> virtualHight = metrics.heightPixels - screenHeight;</span><br><span class=\"line\"><span class=\"keyword\">int</span> statusBarHeight=getStatusBarHeight(context);</span><br><span class=\"line\"><span class=\"comment\">// 在不显示软键盘时，heightDiff等于状态栏的高度</span></span><br><span class=\"line\"><span class=\"comment\">// 在显示软键盘时，heightDiff会变大，等于软键盘加状态栏的高度。</span></span><br><span class=\"line\"><span class=\"comment\">// 所以heightDiff大于状态栏高度时表示软键盘出现了，</span></span><br><span class=\"line\"><span class=\"comment\">// 这时可算出软键盘的高度，即heightDiff减去状态栏的高度</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> (heightDiff &gt; statusBarHeight) &#123;</span><br><span class=\"line\">\tkeyboardHeight = heightDiff - statusBarHeight;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> (isShowKeyboard) &#123;</span><br><span class=\"line\">\t<span class=\"comment\">// 如果软键盘是弹出的状态，并且heightDiff小于等于状态栏高度，</span></span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (heightDiff &lt;= statusBarHeight) &#123;</span><br><span class=\"line\">\t\t<span class=\"comment\">// 说明这时软键盘已经收起</span></span><br><span class=\"line\">\t\tisShowKeyboard=<span class=\"keyword\">false</span>;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">       <span class=\"comment\">// 如果软键盘是收起的状态，并且heightDiff大于状态栏高度，</span></span><br><span class=\"line\">       <span class=\"keyword\">if</span> (heightDiff &gt; statusBarHeight) &#123;</span><br><span class=\"line\">        <span class=\"comment\">// 说明这时软键盘已经弹出</span></span><br><span class=\"line\">        isShowKeyboard=<span class=\"keyword\">true</span>;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>下面是获取手机状态栏高度的办法<br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 获取手机状态栏高度</span></span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">int</span> <span class=\"title\">getStatusBarHeight</span><span class=\"params\">(Context context)</span> </span>&#123;</span><br><span class=\"line\">       Class&lt;?&gt; c = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">       Object obj = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">       Field field = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">       <span class=\"keyword\">int</span> x = <span class=\"number\">0</span>, statusBarHeight = <span class=\"number\">0</span>;</span><br><span class=\"line\">       <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">           c = Class.forName(<span class=\"string\">\"com.android.internal.R$dimen\"</span>);</span><br><span class=\"line\">           obj = c.newInstance();</span><br><span class=\"line\">           field = c.getField(<span class=\"string\">\"status_bar_height\"</span>);</span><br><span class=\"line\">           x=Integer.parseInt(field.get(obj).toString());</span><br><span class=\"line\">           statusBarHeight = context.getResources().getDimensionPixelSize(x);</span><br><span class=\"line\">       &#125; <span class=\"keyword\">catch</span> (Exception e1) &#123;</span><br><span class=\"line\">           e1.printStackTrace();</span><br><span class=\"line\">       &#125;</span><br><span class=\"line\">       <span class=\"keyword\">return</span> statusBarHeight;</span><br><span class=\"line\">   &#125;</span><br></pre></td></tr></table></figure></p>\n<p>对于聊天框，一开始想的是自定义控件的办法，后来在网上找到了<strong>9-patch</strong>，可以自动拉伸图片，需要用到的是<strong>.png</strong>的图片，可以找美工切好图，在Android studio上，右键选择图片，可以自动生成<strong>xx.9.png</strong>的文件，如下图：<br><img src=\"http://img.blog.csdn.net/20160824174835941\" alt=\"xx.9.png\"></p>\n<p>在<code>sdk\\tools\\</code> 下面有<strong>draw9patch</strong> 命令，直接打开拉入图片也能生成<strong>9-Patch</strong>，如下图：<br><img src=\"http://img.blog.csdn.net/20160824204210485\" alt=\"draw9patch\"></p>\n<p>下面就是最终效果了，需要注意的是，生成的<strong>xx.9.png</strong>文件需保存在 <strong>drawable</strong>的目录下面，然后就可以直接调用了。<br>在工具上，有边线可以直接拖动，多试验几次找到最合适自己的，如图所示黑色阴影是要显示的区域的边距，两条绿色区域的交叉处就是最后会被拉伸的地方，右边就是最后被拉伸的效果图。<br><img src=\"http://img.blog.csdn.net/20160824174900410\" alt=\"效果\"></p>"}],"PostAsset":[],"PostCategory":[],"PostTag":[{"post_id":"cis92veal0006h8dqpk74w3uu","tag_id":"cis92veaf0004h8dqednbkytz","_id":"cis92veaq0009h8dqghxjr80p"},{"post_id":"cis92ve9x0000h8dqdook72zr","tag_id":"cis92veaf0004h8dqednbkytz","_id":"cis92veb0000bh8dq1e9tf48b"},{"post_id":"cis92vea80002h8dqtnwhjkla","tag_id":"cis92veao0007h8dqg5886fns","_id":"cis92veb6000eh8dqa8w63izj"},{"post_id":"cis92veb2000ch8dq79w4h596","tag_id":"cis92veao0007h8dqg5886fns","_id":"cis92veba000gh8dqsnbt1o0o"},{"post_id":"cis92veb7000fh8dqlixepypi","tag_id":"cis92veao0007h8dqg5886fns","_id":"cis92vebd000jh8dqe9di7gze"},{"post_id":"cis92veai0005h8dqab38plwy","tag_id":"cis92veaf0004h8dqednbkytz","_id":"cis92vebh000lh8dqmuj0yxy9"},{"post_id":"cis92veba000hh8dq71vyy96s","tag_id":"cis92veao0007h8dqg5886fns","_id":"cis92vebl000oh8dq44g53e58"},{"post_id":"cis92veao0008h8dqty1fpyeh","tag_id":"cis92vebc000ih8dq0djzps8d","_id":"cis92vebm000ph8dq5bgdf8zx"},{"post_id":"cis92vear000ah8dq1q9i9tye","tag_id":"cis92vebc000ih8dq0djzps8d","_id":"cis92vebp000rh8dqujyt1ebi"},{"post_id":"cis92vebe000kh8dqyls59g8z","tag_id":"cis92vebn000qh8dqj9cgyguh","_id":"cis92vebx000vh8dqtqcyq85j"},{"post_id":"cis92vebe000kh8dqyls59g8z","tag_id":"cis92vebq000sh8dq4mkob8z2","_id":"cis92veby000wh8dq373fdigo"},{"post_id":"cis92vebe000kh8dqyls59g8z","tag_id":"cis92vebu000th8dquypx3ive","_id":"cis92veby000xh8dqlobgwju6"},{"post_id":"cis92vebi000mh8dqkqyxy3qv","tag_id":"cis92vebw000uh8dq3st6a1u2","_id":"cis92vebz000yh8dqpndq8l7u"}],"Tag":[{"name":"冰与火之歌","_id":"cis92veaf0004h8dqednbkytz"},{"name":"android","_id":"cis92veao0007h8dqg5886fns"},{"name":"随笔","_id":"cis92vebc000ih8dq0djzps8d"},{"name":"Node.js","_id":"cis92vebn000qh8dqj9cgyguh"},{"name":"mysql","_id":"cis92vebq000sh8dq4mkob8z2"},{"name":"Express","_id":"cis92vebu000th8dquypx3ive"},{"name":"Android","_id":"cis92vebw000uh8dq3st6a1u2"}]}}